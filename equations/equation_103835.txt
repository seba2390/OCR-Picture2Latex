\begin{align}\mathcal{L} = & \sum_{a \in E} L_{sup}(out(a), y_a)+ \\ & + \lambda \sum_{r_j} \sum_{g \in R_j: \forall a \in ne(g) a \in E} L_{sem}(out(g), r_j({\bf y}_{ne(g)}))\end{align}