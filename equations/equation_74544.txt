\begin{align}\Delta W(t) = & ~ -\eta \frac{\partial L(W(t))}{\partial W(t)} \\ = & ~ -\eta\Big(\sum_{i=1}^{n}(f(x_i) - y_i) \underbrace{ \diag\{\phi'( (M \circ W(t))^\top\cdot x_i)\} }_{ m \times m }\underbrace{ a }_{m \times 1} \underbrace{ x_i^{\top} }_{1 \times d} \Big)^\top \circ \underbrace{M}_{d\times m} \\ = & ~ -\eta (\sum_{i=1}^n g_t(x_i) \cdot x_i^\top )^\top \circ M\\ = & ~ -\eta(\underbrace{X}_{d \times n} \cdot \underbrace{ g^\top_t(X) }_{n \times m} ) \circ \underbrace{M}_{d\times m}.\end{align}