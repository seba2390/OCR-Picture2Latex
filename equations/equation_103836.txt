\begin{align}b(x_i) &= \displaystyle\prod_{g:\ i \in ne(g)} \max_{\mathbf{x}_g:\ \mathbf{x}_i=x_i} \left[ \phi_g(\mathbf{x}_g) \cdot \displaystyle\prod_{j \in ne(g):\ i \ne j} b({\bf x}_j) \right] = \nonumber \\ &= \displaystyle\prod_{g:\ i \in ne(g)} \max_{\mathbf{x}_g \in \mathcal{T}_g:\ \mathbf{x}_i=x_i} \left[ \displaystyle\prod_{j \in ne(g):\ i \ne j} b({\bf x}_j) \right]\end{align}