\begin{align}p(o_1, \dots, o_T | \theta, a_0, \dots, a_{T-1}) & = \prod_{t=1}^{T} p(o_t|\theta, o_1, \dots, o_{t-1}, a_0, \dots, a_{t-1}) \\ & = \prod_{t=1}^{T} \int_{\mathbb{R}^n} p(o_t|\theta, s_t)p(s_t|\theta, o_1, \dots, o_{t-1}, a_0, \dots, a_{t-1})ds_t \\ & \approx \prod_{t=1}^{T} \int_{\mathbb{R}^n} p(o_t|\theta, s_t)\bar{b}_t^s(s_t|\theta)ds_t \\ & = \prod_{t=1}^{T} \mathbf{E}_{s_t \sim \bar{b}_t^s(s_t|\theta)} p(o_t|\theta, s_t) &\approx \prod_{t=1}^{T} \frac{1}{N}\sum_{i=1}^{N} p(o_t|\theta, s_t^i) \hspace{15pt} s_t^i \sim \bar{b_t}(s_t|\theta)\end{align}