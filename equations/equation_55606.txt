\begin{align}\nabla\mathcal{L}^{\text{DPO}}(\vx,\vy_w,\vy_l) = -\beta\sigma\left(\beta\log \frac{\pi_\theta(\vy_l|\vx)}{\pi^{\text{SFT}}(\vy_l|\vx)} - \beta\log \frac{\pi_\theta(\vy_w|\vx)}{\pi^{\text{SFT}}(\vy_w|\vx)} \right)\nabla\left(\log\frac{\pi_\theta(\vy_w|\vx)}{\pi_\theta(\vy_l|\vx)}\right)/2\end{align}