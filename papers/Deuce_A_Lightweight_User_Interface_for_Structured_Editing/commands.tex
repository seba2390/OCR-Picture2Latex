
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\snsScreenshotScale}{0.35}
\newcommand{\lambdaScreenshotScale}{0.265}
\newcommand{\lambdaScreenshotScaleBigger}{0.30}
%% \newcommand{\snsNewVersion}{\textsc{v0.6.2}}
\newcommand{\numUsers}{21}
\newcommand{\numExamples}{five}
\newcommand{\numMoreExamples}{four}
\newcommand{\exampleZero}{\sns{} Logo}
\newcommand{\exampleOne}{Target}
\newcommand{\exampleTwo}{Battery Icon}
\newcommand{\exampleThree}{Coffee Mug}
\newcommand{\exampleFour}{Mondrian Arch}
\newcommand{\locExamples}{100} %% 88 = 11 + 8 + 30 + 39 + 15
\newcommand{\timeRawVideos}{35}
\newcommand{\timeRawVideoBattery}{15}
\newcommand{\timeFullVideos}{\rkc{XXX}}
\newcommand{\locImplementation}{9,000}

  %% CodeMotion     2,800
  %% DeuceWidgets     100
  %% Deuce            800
  %% DeuceTools     2,100
  %% LangTools      2,000 ?
  %% Lang             200 ?
  %% LangSimplify     300 ?
  %% Controller       500 ?
  %% View             500 ?
  %% .js               30

\newcommand{\maybeCode}{Code}
\newcommand{\maybecode}{code}

%% \newcommand{\maybeCode}{}
%% \newcommand{\maybecode}{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\suppMaterials}
  {Supplementary Appendices~\cite{sns-deuce-full}}
\newcommand{\theAppendixCite}
  {\cite{sns-full}}

%% \newcommand{\suppMaterials}{Supplementary Materials}
%% \newcommand{\anonPlace}{Anonymous Place}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\mynote}[3]{\textcolor{#3}{\textsf{{#2}}}}

%% turn these off for release
\newcommand{\rkc}[1]{\mynote{rkc}{#1}{blue}}
\newcommand{\bnh}[1]{\mynote{bnh}{#1}{green}}

\def\parahead#1{\paragraph{\textbf{#1.}}}
\def\paraheadNoDot#1{\paragraph{\textbf{#1}}}

\def\sectionautorefname{\S\!}
\def\subsectionautorefname{\S\!}
\def\subsubsectionautorefname{\S\!}

\newcommand{\ie}{{\emph{i.e.}}}
\newcommand{\eg}{{\emph{e.g.}}}
\newcommand{\etc}{{\emph{etc.}}}
\newcommand{\cf}{{\emph{cf.}}}
\newcommand{\etal}{{\emph{et al.}}}

\newcommand{\little}{\mbox{\textsc{Little}}}
\newcommand{\sns}{\ensuremath{\textsc{Sketch-n-Sketch}}}
\newcommand{\version}[1]{\ensuremath{\textsc{v#1}}}
\newcommand{\deuce}{\ensuremath{\textsc{Deuce}}}
%% \newcommand{\littleDeuce}{\little{}\deuce{}}

%% \newcommand{\dndrLong}{\ensuremath{\textsc{Drag-and-Drop Refactoring}}}
\newcommand{\dndr}{\ensuremath{\textsc{DNDRefactoring}}}
%% \newcommand{\hareLong}{\ensuremath{\textsc{Haskell Refactorer}}}
\newcommand{\hare}{\ensuremath{\textsc{HaRe}}}
%% \newcommand{\ace}{\ensuremath{\textsc{Ace}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\defeq}{\circeq}
\newcommand{\set}[1]{\{{#1}\}}
\newcommand{\seq}[1]{\overline{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\deuceRewrite}{\ensuremath{\rightarrow}}
\newcommand{\deuceRewriteLeft}{\ensuremath{\leftarrow}}

\newcommand{\editorState}{EditorState}
\newcommand{\codeTool}[1]
  %% {\textit{#1}}
  {\textsl{#1}}
  %% {\textsc{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Spacing

\newcommand{\sep}{\hspace{0.06in}}
\newcommand{\sepPremise}{\hspace{0.20in}}
\newcommand{\hsepRule}{\hspace{0.20in}}
%% \newcommand{\hsepRule}{\hspace{0.12in}}
\newcommand{\vsepRuleHeight}{0.12in}
\newcommand{\vsepRule}{\vspace{\vsepRuleHeight}}
\newcommand{\miniSepOne}{\hspace{0.01in}}
\newcommand{\miniSepTwo}{\hspace{0.02in}}
\newcommand{\miniSepThree}{\hspace{0.03in}}
\newcommand{\miniSepFour}{\hspace{0.04in}}
\newcommand{\miniSepFive}{\hspace{0.05in}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Deuce Tool Table

\newcommand{\maybeOptions}[1]{\ifthenelse{\equal{#1}{}}{}{ (+ {#1})}}
\newcommand{\maybeSelectedEquations}[1]{\ifthenelse{\equal{#1}{0}}{}{ (or {#1})}}

%% A
%% \newcommand{\beginToolTable}{\begin{tabular}{llll|l}}
%% B
%% \newcommand{\beginToolTable}{\begin{tabular}{p{3.0in}|llll}}
%% C
\newcommand{\beginToolTable}{\begin{tabular}{p{3.5in}|ccc}}
%% A
%% \newcommand{\rowToolNoBreak}[6]{{#2}&{#3}&{#4}&{#5}&{#1}\maybeOptions{#6}}
%% B
%% \newcommand{\rowToolNoBreak}[6]{{#1}\maybeOptions{#6}&{#2}&{#3}&{#4}&{#5}}
%% C
\newcommand{\rowToolNoBreak}[6]{\codeTool{#1}\maybeOptions{#6}&{#2}&{#3}\maybeSelectedEquations{#4}&{#5}}
\newcommand{\rowTool}[6]{\rowToolNoBreak{\codeTool{#1}}{#2}{#3}{#4}{#5}{#6}\\}
\newcommand{\header}[1]{\textbf{#1}}
\newcommand{\toolTableHeaders}
  %% A
  %% {\multicolumn{4}{c|}{\textit{\makebox[2.6in]{Selected Widgets}}} &
  %%  \multicolumn{1}{l}{\textit{\makebox{Active Transformations}}} \\
  %% B
  %% {\multicolumn{1}{l|}{\textit{\makebox{Active Transformations}}} &
  %%  \multicolumn{4}{c}{\textit{\makebox[2.6in]{Selected Widgets}}} \\
  {\multicolumn{1}{l|}{\textit{\makebox{Active Transformations}}} &
   \multicolumn{3}{l}{\textit{Selected Widgets}} \\
   \rowTool{\header{Tool Name}}
           {\header{Expressions}}
           {\header{Patterns}}
           {\header{Defs}}
           %% {\header{Equations}}
           {\header{Targets}}
           {\header{Options}}\hline}
%% A
%% \newcommand{\toolCategory}[1]{\multicolumn{5}{c}{#1} \\ \hline}
%% B
%% \newcommand{\toolCategory}[1]{\multicolumn{5}{l}{#1} \\ \hline}
%% C
\newcommand{\toolCategory}[1]{\multicolumn{4}{l}{#1} \\ \hline}
\newcommand{\toolCategoryReuse}
  {\toolCategory{Preserve Behavior for Reuse}}
\newcommand{\toolCategoryStyle}
  {\toolCategory{Preserve Behavior for Readability or Subsequent Editing}}
\newcommand{\toolCategoryChange}
  {\toolCategory{Change Behavior}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\varConst}{c}
\newcommand{\varNum}{n}
\newcommand{\varNumK}{k}
\newcommand{\varNumAnnotated}{N}
%% \newcommand{\varNumAnn}{\ensuremath{\varNum\mathit{ann}}}
%% \newcommand{\varNumAnn}{\ensuremath{\mathit{range}}}
\newcommand{\varNumAnn}{\ensuremath{\beta}}
\newcommand{\varStr}{s}
\newcommand{\varBool}{b}
\newcommand{\varVal}{v}
\newcommand{\varValW}{w}
%% \newcommand{\varValW}{u}
%% \newcommand{\varWidgets}{\mathit{ws}}
%% \newcommand{\varWidgets}{\mathit{ranges}}
\newcommand{\varWidgets}{\mathit{rs}}
\newcommand{\varExp}{\textbf{e}}
\newcommand{\varExpBare}{e}
\newcommand{\varLoc}{\ell}
\newcommand{\varLocs}{\ensuremath{\mathcal{L}}}
\newcommand{\varLocId}{k}
%% \newcommand{\varLocAnn}{\ensuremath{\varLoc\mathit{ann}}}
\newcommand{\varLocAnn}{\ensuremath{\alpha}}
\newcommand{\varTrace}{t}
\newcommand{\varVar}{x}
\newcommand{\varPat}{\textbf{p}}
\newcommand{\varPatBare}{p}
\newcommand{\varKonstLoc}{\ttk}
\newcommand{\varOp}{op}
\newcommand{\varValCtx}{V}
\newcommand{\varEvalCtx}{E}
\newcommand{\varSubst}{\rho}
\newcommand{\varAttrSubst}{\theta}
\newcommand{\varZoneSubst}{\gamma}
\newcommand{\varOffset}{d}
\newcommand{\varTrigger}{\tau}
\newcommand{\locName}[1]{\ensuremath{\mathit{#1}}}
\newcommand{\varZone}{\zeta}
\newcommand{\varExpId}{i}
\newcommand{\varPathId}{js}
\newcommand{\varProgram}{\mathit{program}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\ttlcurly}{\ensuremath{\texttt{\char`\{}}\hspace{0.02in}}
\newcommand{\ttrcurly}{\ensuremath{\hspace{0.02in}\texttt{\char`\}}}}
\newcommand{\ttlparen}{\ensuremath{\texttt{(}}}
\newcommand{\ttrparen}{\ensuremath{\texttt{)}}}
\newcommand{\ttlbrack}{\ensuremath{\texttt{[}}}
\newcommand{\ttrbrack}{\ensuremath{\texttt{]}}}
\newcommand{\ttpipe}{\ensuremath{\texttt{|}}}
\newcommand{\ttdash}{\ensuremath{\texttt{-}}}
%% \newcommand{\ttunder}{\ensuremath{\texttt{\char`_}}}
%% \newcommand{\ttcolon}{\ensuremath{\texttt{:}}}
%% \newcommand{\ttsemi}{\ensuremath{\texttt{;}}}

%% \newcommand{\targetPosBefore}{\ensuremath{\textcolor{orange}{\bullet}}}
\newcommand{\targetPosBefore}{\ensuremath{\textcolor{cyan}{\bullet}}}
\newcommand{\targetPosAfter}{\ensuremath{\targetPosBefore}}
\newcommand{\targetsAround}[1]
  {\targetPosBefore\miniSepTwo{#1}\miniSepTwo\targetPosAfter}
\newcommand{\targetBefore}[1]
  {\targetPosBefore\miniSepTwo{#1}}

\newcommand{\num}[1]{\ensuremath{\texttt{#1}}}
\newcommand{\op}[1]{\ensuremath{\texttt{#1}}}
\newcommand{\opInv}[1]{\ensuremath{{#1}^{-1}}}
\newcommand{\inv}[2]{\ensuremath{\helperop{Inv}(#1)(#2)}}
\newcommand{\invL}[3]{\ensuremath{\helperop{InvL}(#1,#2)(#3)}}
\newcommand{\invR}[3]{\ensuremath{\helperop{InvR}(#1,#2)(#3)}}
\newcommand{\flip}[1]{\ensuremath{\helperop{Flip}({#1})}}
\newcommand{\parens}[1]{\ensuremath{\ttlparen{#1}\ttrparen}}
\newcommand{\bracks}[1]{\ensuremath{\ttlbrack{#1}\ttrbrack}}
\newcommand{\spaceOne}[1]{\ensuremath{\miniSepOne{#1}\miniSepOne}}
\newcommand{\expFun}[2]{\ensuremath{\expTwoThings{\lambda}{#1}{#2}}}
\newcommand{\expNil}{\ensuremath{\ttlbrack\ttrbrack}}
\newcommand{\expCons}[2]{\ensuremath{\bracks{\spaceOne{#1}\ttpipe\spaceOne{#2}}}}
\newcommand{\expList}[3]{\bracks{\spaceOne{\threeThings{#1}{#2}{#3}}}}
\newcommand{\expListTwo}[2]{\bracks{\spaceOne{\twoThings{#1}{#2}}}}
\newcommand{\expApp}[2]{\ensuremath{\parens{{#1}\miniSepThree{ }{#2}}}}
\newcommand{\expAppTwo}[3]{\ensuremath{\expApp{#1}{\twoThings{#2}{#3}}}}
\newcommand{\expAppMulti}[3]{\ensuremath{\expApp{#1}{\threeThings{#2}{\cdots}{#3}}}}
\newcommand{\expStr}[1]
  %% TODO use straight quotes
  {\ensuremath{\texttt{'{#1}'}}}
\newcommand{\expTrue}{\ensuremath{\texttt{true}}}
\newcommand{\expFalse}{\ensuremath{\texttt{false}}}

\newcommand{\expPair}[2]{\bracks{\spaceOne{\twoThings{#1}{#2}}}}
\newcommand{\expTriple}[3]{\bracks{\spaceOne{\threeThings{#1}{#2}{#3}}}}
\newcommand{\expListFour}[4]{\bracks{\spaceOne{\fourThings{#1}{#2}{#3}{#4}}}}

\newcommand{\labeledNum}[2]{\ensuremath{{#1}^{#2}}}
%%\newcommand{\numTrace}[2]{\ensuremath{{#1}\{{#2}\}}}
\newcommand{\numTrace}[2]{\labeledNum{#1}{#2}}
\newcommand{\ttNumName}[2]{\labeledNum{\num{#1}}{\locName{#2}}}
\newcommand{\ttNumLoc}[2]{\labeledNum{\num{#1}}{#2}}

\newcommand{\locPair}[2]{({#1},{#2})}
\newcommand{\annFreeze}{\texttt{!}}
\newcommand{\annThaw}{\texttt{?}}
%% \newcommand{\annAssignOnce}{\texttt{~}}

%% \newcommand{\numPair}[2]{({#1},{#2})}
\newcommand{\numTriple}[3]{({#1},{#2},{#3})}
\newcommand{\numRange}[2]
  {\ttlcurly{#1}\miniSepTwo\ttdash\miniSepTwo{#2}\ttrcurly}
\newcommand{\numWithRange}[3]{{#1}\miniSepOne\numRange{#2}{#3}}


\newcommand{\wrapInBox}[1]{\fcolorbox{orange}{white}{#1}}

\newcommand{\expFreeze}[1]{\ensuremath{{#1}\annFreeze}}
\newcommand{\expThaw}[1]{\ensuremath{{#1}\annThaw}}
%% \newcommand{\expLet}[3]{\expThreeThings{\texttt{let}}{#1}{#2}{#3}}
\newcommand{\expLetNoBox}[3]
  {\parens{\twoThings{{\texttt{let}\miniSepThree\ensuremath{{#1}\miniSepThree{#2}}}}{#3}}}
\newcommand{\expLet}[3]
  {\parens{\twoThings{\wrapInBox{\texttt{let}\miniSepThree\ensuremath{{#1}\miniSepThree{#2}}}}{#3}}}
  %% {\parens{\twoThings{\wrapInBox{\texttt{let}\miniSepThree\ensuremath{{#1}\miniSepThree{#2}}}_{\color{orange}\ \varExpId}}{#3}}}
\newcommand{\expLetRec}[3]{\expThreeThings{\texttt{letrec}}{#1}{#2}{#3}}
\newcommand{\expTopDefNoBox}[2]{\expTwoThings{\texttt{def}}{#1}{#2}}
\newcommand{\expTopDef}[2]{\wrapInBox{\expTwoThings{\texttt{def}}{#1}{#2}}}
\newcommand{\expDef}[3]{\twoThings{\expTopDef{#1}{#2}}{#3}}
%% \newcommand{\expDef}[3]{\twoThings{\expTwoThings{\texttt{def}}{#1}{#2}}{#3}}
\newcommand{\expDefRec}[3]{\twoThings{\expTwoThings{\texttt{defrec}}{#1}{#2}}{#3}}
\newcommand{\expIte}[3]{\expThreeThings{\texttt{if}}{#1}{#2}{#3}}
\newcommand{\expCase}[4]{\expFourThings{\texttt{case}}{#1}{#2}{#3}{#4}}
\newcommand{\expCaseTwo}[3]{\expThreeThings{\texttt{case}}{#1}{#2}{#3}}
\newcommand{\expBranch}[2]{\expOneThing{#1}{#2}}
\newcommand{\expBranchWithId}[4]{\wrapInBox{\expOneThing{#3}{#4}}}
%% \newcommand{\expBranchWithId}[4]{\wrapInBox{\expOneThing{#3}{#4}}_{\color{orange}\ {#1}.{#2}}}

\newcommand{\twoThings}[2]{\ensuremath{{#1}\miniSepThree{#2}}}
\newcommand{\threeThings}[3]{\ensuremath{{#1}\miniSepThree\twoThings{#2}{#3}}}
\newcommand{\fourThings}[4]{\ensuremath{{#1}\miniSepThree\threeThings{#2}{#3}{#4}}}
\newcommand{\fiveThings}[5]{\ensuremath{{#1}\miniSepThree\fourThings{#2}{#3}{#4}{#5}}}
\newcommand{\sixThings}[6]{\ensuremath{{#1}\miniSepThree\fiveThings{#2}{#3}{#4}{#5}{#6}}}
\newcommand{\sevenThings}[7]{\ensuremath{{#1}\miniSepThree\sixThings{#2}{#3}{#4}{#5}{#6}{#7}}}

\newcommand{\expOneThing}[2]{\ensuremath{\parens{\twoThings{#1}{#2}}}}
\newcommand{\expTwoThings}[3]{\ensuremath{\parens{\threeThings{#1}{#2}{#3}}}}
\newcommand{\expThreeThings}[4]{\ensuremath{\parens{\fourThings{#1}{#2}{#3}{#4}}}}
\newcommand{\expFourThings}[5]{\ensuremath{\parens{\fiveThings{#1}{#2}{#3}{#4}{#5}}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\figSyntaxLineBreak}{\\[1pt]}
\newcommand{\figSyntaxSpaceNextCategory}{\\[1pt]}
\newcommand{\figSyntaxSpaceNextCategoryMoreSpace}{\\[3pt]}
\newcommand{\figSyntaxSpaceItem}{\sep\mid\sep}
\newcommand{\figSyntaxSpaceItemNarrow}{\mid}
\newcommand{\figSyntaxEnd}{\end{array}$}

\newcommand{\figSyntaxBegin}{$\begin{array}{rcl}}
\newcommand{\figSyntaxRowLabel}[2]{{#2}&\miniSepTwo{::=}\miniSepTwo&}
\newcommand{\figSyntaxRow}{&\miniSepOne\mid\miniSepOne&}

%% \newcommand{\figSyntaxBegin}{$\begin{array}{rclrcl}}
%% \newcommand{\figSyntaxRowLabel}[2]{&&&{#2}&\miniSepOne{::=}\miniSepOne&}
%% \newcommand{\figSyntaxSuperRowLabel}[4]{{#2}&\miniSepOne{::=}\miniSepOne&{#3}&{#4}&\miniSepOne{::=}\miniSepOne&}

\newcommand{\relDescription}[1]{\ensuremath{\textrm{\textbf{#1}}}}
\newcommand{\judgementHead}[2]
  {\ensuremath{\relDescription{#1}\hfill\fbox{#2}}}
\newcommand{\judgementHeadThree}[3]
  {\ensuremath{\relDescription{#1}\ \textrm{{#2}}\hfill\fbox{#3}}}
\newcommand{\judgementHeadNameOnly}[1]
  {\ensuremath{\relDescription{#1}\hfill}}

\newcommand{\ruleName}[1]{\mbox{\textsc{\begin{normalsize}#1\end{normalsize}}}}
\newcommand{\ruleNameFig}[1]{\textsc{\begin{scriptsize}[#1]\end{scriptsize}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% fixed width letters

\newcommand{\tta}{\ensuremath{\texttt{a}}}
\newcommand{\ttb}{\ensuremath{\texttt{b}}}
\newcommand{\ttc}{\ensuremath{\texttt{c}}}
\newcommand{\ttd}{\ensuremath{\texttt{d}}}
\newcommand{\tte}{\ensuremath{\texttt{e}}}
\newcommand{\ttf}{\ensuremath{\texttt{f}}}
\newcommand{\ttg}{\ensuremath{\texttt{g}}}
\newcommand{\tth}{\ensuremath{\texttt{h}}}
\newcommand{\tti}{\ensuremath{\texttt{i}}}
\newcommand{\ttj}{\ensuremath{\texttt{j}}}
\newcommand{\ttk}{\ensuremath{\texttt{k}}}
\newcommand{\ttn}{\ensuremath{\texttt{n}}}
\newcommand{\tto}{\ensuremath{\texttt{o}}}
\newcommand{\ttp}{\ensuremath{\texttt{p}}}
\newcommand{\ttq}{\ensuremath{\texttt{q}}}
\newcommand{\ttr}{\ensuremath{\texttt{r}}}
\newcommand{\ttt}{\ensuremath{\texttt{t}}}
\newcommand{\ttv}{\ensuremath{\texttt{v}}}
\newcommand{\ttw}{\ensuremath{\texttt{w}}}
\newcommand{\ttx}{\ensuremath{\texttt{x}}}
\newcommand{\tty}{\ensuremath{\texttt{y}}}
\newcommand{\ttz}{\ensuremath{\texttt{z}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Operational Semantics

%%\newcommand{\reduce}{\ensuremath{\hookrightarrow}}
%%\newcommand{\reducesTo}[2]{{#1}\reduce{#2}}
%%\newcommand{\reducesToMulti}[2]{{#1}\reduce^{*}{#2}}
\newcommand{\reducesToMulti}[2]{{#1}\Downarrow{#2}}
\newcommand{\reducesToMultiWidgets}[3]{{#1}\Downarrow{(#2,#3)}}
\newcommand{\interp}[1]{\ensuremath{\llbracket\spaceOne{#1}\rrbracket}}
\newcommand{\hole}{\bullet}

\newcommand{\substBracks}[1]{[\miniSepOne{#1}\miniSepOne]}
\newcommand{\catSubsts}[2]{{#1}\miniSepTwo{#2}}
\newcommand{\emptySubst}{\substBracks{}}

%% TODO remove substOne, subst, substPlus
\newcommand{\substPlus}{\oplus}
\newcommand{\substOne}[2]{[{#2}/{#1}]}
\newcommand{\subst}[3]{{#1}\substOne{#2}{#3}}
\newcommand{\aSubst}[2]{{#1}\mapsto{#2}}
\newcommand{\aSubstOne}[2]
  {\substBracks{\aSubst{#1}{#2}}}
\newcommand{\aSubstTwo}[4]
  {\substBracks{\aSubst{#1}{#2},\aSubst{#3}{#4}}}
\newcommand{\aSubstThree}[6]
  {\substBracks{\aSubst{#1}{#2},\aSubst{#3}{#4},\aSubst{#5}{#6}}}
\newcommand{\aSubstFour}[8]
  {\substBracks{\aSubst{#1}{#2},\aSubst{#3}{#4},\aSubst{#5}{#6},\aSubst{#7}{#8}}}

\newcommand{\relConsistent}[2]{\ensuremath{{#1}\sim{#2}}}

\newcommand{\manip}{\ensuremath{\leadsto}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% \newcommand{\helperop}[1]{\ensuremath{\mathit{#1}}}
\newcommand{\helperop}[1]{\ensuremath{\mathsf{#1}}}
\newcommand{\locsOf}[1]{\ensuremath{\helperop{Locs}(#1)}}
\newcommand{\myEquation}[2]{\ensuremath{{#1}={#2}}}
\newcommand{\inferFaithful}[2]{\ensuremath{\helperop{SynthesizeFaithful}(#1,#2)}}
\newcommand{\inferPlausible}[2]{\ensuremath{\helperop{SynthesizePlausible}(#1,#2)}}
%% TODO remove this
\newcommand{\solve}[4]{\ensuremath{\helperop{Solve}(#1,#2,\myEquation{#3}{#4})}}
\newcommand{\solveOne}[4]{\ensuremath{\helperop{SolveOne}(#1,#2,\myEquation{#3}{#4})}}
\newcommand{\solvea}[4]{\ensuremath{\helperop{Solve_A}(#1,#2,\myEquation{#3}{#4})}}
\newcommand{\solveb}[4]{\ensuremath{\helperop{Solve_B}(#1,#2,\myEquation{#3}{#4})}}
\newcommand{\countPlus}[3]{\ensuremath{\helperop{WalkPlus}(#1,#2,#3)}}
\newcommand{\solveAndUpdate}[4]
  %% {\ensuremath{\helperop{SolveAndUpd}(#1,#2,\myEquation{#3}{#4})}}
  %% {\ensuremath{\helperop{InferUpd}(#1,#2,\myEquation{#3}{#4})}}
  %% {\ensuremath{\helperop{SolveOneAndUpd}(#1,#2,\myEquation{#3}{#4})}}
  {(\aSubst{#2}{\solveOne{#1}{#2}{#3}{#4}})}
\newcommand{\diff}[2]{\helperop{Diff}(#1,#2)}

\newcommand{\mmVar}[1]{\ensuremath{\mathit{#1}}} % "math-mode var"
\newcommand{\attrVal}[2]{#1[#2]}
\newcommand{\zone}[1]{\textsc{#1}}
\newcommand{\numOf}[1]{\ensuremath{\helperop{Num}(#1)}}
\newcommand{\traceOf}[1]{\ensuremath{\helperop{Tr}(#1)}}
%% \newcommand{\makeTrigger}[6]{\ensuremath{\helperop{MouseTrigger}(#1,#2,#3,#4,#5,#6)}}
%% \newcommand{\makeTrigger}[6]{\ensuremath{\helperop{ComputeTrigger}(#1,#2,#3,#4,#5,#6)}}
\newcommand{\makeTrigger}[4]{\ensuremath{\helperop{ComputeTrigger}(#1,#2,#3,#4)}}
%% \newcommand{\makeTriggerSimple}[6]{\ensuremath{\helperop{ComputeTrigger}(#2,#3,#4,#5,#6)}}
\newcommand{\makeTriggerSimple}[3]{\ensuremath{\helperop{ComputeTrigger}(#1,#2,#3)}}
\newcommand{\variance}[2]{{#1}\miniSepOne#2}
\newcommand{\dxPos}{\ensuremath{\variance{+}{\mmVar{dx}}}}
\newcommand{\dxNeg}{\ensuremath{\variance{-}{\mmVar{dx}}}}
\newcommand{\dyPos}{\ensuremath{\variance{+}{\mmVar{dy}}}}
\newcommand{\dyNeg}{\ensuremath{\variance{-}{\mmVar{dy}}}}
\newcommand{\attrVariance}[3]{#1\miniSepOne(\variance{#2}{#3})}

\newcommand{\mouseTrigger}[1]
  {\ensuremath{\lambda(\mmVar{dx},\mmVar{dy}).\ {#1}}}
  %% {\ensuremath{\lambda(\mmVar{mx'},\mmVar{my'}).\ {#1}}}
\newcommand{\mouseTriggerMulti}[2]
  {\ensuremath{\lambda({#1}).\ {#2}}}

\newcommand{\numOffset}[2]{\ensuremath{#1(#2)}}

\newcommand{\svgRHS}[1]{\ensuremath{``{#1}"}}
\newcommand{\toSvg}{\ensuremath{\hookrightarrow}}
\newcommand{\toSvgSub}[1]{\ensuremath{\hookrightarrow_{#1}}}
\newcommand{\svgStr}[1]{\ensuremath{\texttt{'}{#1\texttt{'}}}}
%% \newcommand{\svgStr}[1]{\ensuremath{``{#1}"}}
