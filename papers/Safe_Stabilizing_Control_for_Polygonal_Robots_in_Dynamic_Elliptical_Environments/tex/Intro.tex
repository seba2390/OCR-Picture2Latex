\section{Introduction}
\label{sec: intro}

% Operating safely in dynamic environments is crucial for autonomous robots in real-world scenarios. Existing control barrier functions for obstacle avoidance often assume point or circular robots, limiting their applicability to robots with more complex geometries. In this paper, we address this limitation by presenting an analytic approach to compute the distance between a polygonal robot and moving elliptical obstacles in a 2D environment. This distance computation is utilized in constructing a control barrier function for safe control synthesis, enabling the operation of a robot with a more intricate shape. Our proposed approach offers real-time tight elliptical obstacle avoidance for polygon-shaped robots. 

Obstacle avoidance in static and dynamic environments is a central challenge for safe mobile robot autonomy. 

At the planning level, several motion planning algorithms have been developed to provide a feasible path that ensures obstacle avoidance, including prominent approaches like A$^*$~\cite{A_star_planning}, RRT$^*$~\cite{RRT_star}, and their variants~\cite{informed_rrt_star, neural_rrt_star}. These algorithms typically assume that a low-level tracking controller can execute the planned path. However, in dynamic environments where obstacles and conditions change rapidly, reliance on such a controller can be limiting. A significant contribution to the field was made by Khatib \cite{potential-field}, who introduced artificial potential fields to enable collision avoidance during not only the motion planning stage but also the real-time control of a mobile robot. Later, Rimon and Koditschek \cite{navigation-function} developed navigation functions, a particular form of artificial potential functions that guarantees simultaneous collision avoidance and stabilization to a goal configuration.
%. These functions strive to ensure collision avoidance and stabilization towards a goal configuration simultaneously. 
% Meanwhile, Fox \cite{Fox1997TheDW} introduced the dynamics window concept, an influential approach to obstacle avoidance that proactively filters out unsafe control actions. 
In recent years, research has delved into the domain of trajectory generation and optimization, with innovative algorithms proposed for quadrotor safe navigation \cite{mellinger_snap_2011, zhou2019robust, tordesillas2019faster}. In parallel, the rise of learning-based approaches \cite{michels2005high, pfeiffer2018reinforced, loquercio2021learning} has added a new direction to the field, utilizing machine learning to facilitate both planning and real-time obstacle avoidance. Despite their promise, these methods often face challenges in dynamic environments and in providing safety guarantees.


In the field of safe control synthesis, integrating control Lyapunov functions (CLFs) and control barrier functions (CBFs) into a quadratic program (QP) has proven to be a reliable and efficient strategy for formulating safe stabilizing controls across a wide array of robotic tasks \cite{glotfelter2017nonsmooth, grandia_2021_legged, wang2017_aerial}. While CBF-based methodologies have been deployed for obstacle avoidance \cite{srinivasan2020synthesis, Long_learningcbf_ral21, almubarak2022safety, dawson2022learning, abdi2023safe}, such strategies typically simplify the robot as a point or circle and assume static environments when constructing CBFs for control synthesis. Some recent advances have also explored the use of time-varying CBFs to facilitate safe control in dynamic environments \cite{he2021rule, molnar2022safety, hamdipoor2023safe}. However, this concept has yet to be thoroughly investigated in the context of obstacle avoidance for rigid-body robots. For the safe autonomy of robot arms, Koptev \textit{et al}. \cite{Koptev2023_neural_joint_control} introduced a neural network approach to approximate the signed distance function of a robot arm and use it for safe reactive control in dynamic environments. In \cite{Hamatani2020arm}, a CBF construction formula is proposed for a robot arm with a static and circular obstacle. A configuration-aware control approach for the robot arm was proposed in \cite{ding2022configurationaware} by integrating geometric restrictions with CBFs. Thirugnanam \textit{et al}. \cite{discrete_polytope_cbf} introduced a discrete CBF constraint between polytopes and further incorporated the constraint in a model predictive control to enable safe navigation. The authors also extended the formulation for continuous-time systems in \cite{polytopic_cbf} but the CBF computation between polytopes is numerical, requiring a duality-based formulation with non-smooth CBFs. 

\subsubsection*{Notations}

The sets of non-negative real and natural numbers are denoted $\bbR_{\geq 0}$ and $\bbN$. For $N \in \bbN$, $[N] := \{1,2, \dots N\}$. The orientation of a 2D body is denoted by $0 \leq \theta < 2\pi$ for counter-clockwise rotation. We denote the corresponding rotation matrix as 
% \begin{equation}
% \label{eq: rotation}
    $\bfR(\theta) = \begin{bmatrix} \cos \theta & -\sin \theta \\ \sin \theta & \cos \theta \end{bmatrix}.$
% \end{equation}
The configuration of a 2D rigid-body is described by position and orientation, and the space of the positions and orientations in 2D is called the special Euclidean group, denoted as $SE(2)$. Also, we use $\|\bfx\|$ to denote the $L_2$ norm for a vector $\bfx$ and $\otimes$ to denote the Kronecker product. The gradient of a differentiable function $V$ is denoted by $\nabla V$, and its Lie derivative along a vector field $f$ by $\calL_f V  = \nabla V \cdot f$. A continuous function $\alpha: [0,a)\rightarrow [0,\infty )$ is of class $\calK$ if it is strictly increasing and $\alpha(0) = 0$. A continuous function $\alpha:\mathbb{R} \rightarrow \mathbb{R}$ is of extended class $\calK_{\infty}$ if it is of class $\calK$ and $\lim_{r \rightarrow \infty} \alpha(r) = \infty$. Lastly, consider the body-fixed frame of the ellipse $\calE'$. The signed distance function (SDF) of the ellipse $\psi_\calE: \mathbb{R}^2 \to \mathbb{R}$ is defined as 
\begin{equation}
%\label{eq: SDF}
    \psi_\calE(\bfp') 
    = \left\{
    \begin{array}{ll}
        d(\calE',\bfp'), & \text{if } \bfp' \in \calE^c,  \\
        -d(\calE',\bfp'), & \text{if } \bfp' \in \calE,
    \end{array} 
    \right. \notag
\end{equation}
where $d$ is the Euclidean distance. In addition, $\|\nabla \psi_\calE (\bfp')\| = 1$ for all $\bfp'$ except on the boundary of the ellipse and its center of mass, the origin.


\textbf{Contributions}: (i) We present an analytic distance formula in $SE(2)$ for elliptical and polygonal objects, enabling closed-form calculations for distance and its gradient. (ii) We introduce a novel time-varying control barrier function, specifically for rigid-body robots described by one or multiple $SE(2)$ configurations. Its efficacy of ensuring safe autonomy is demonstrated in ground robot navigation and multi-link robot arm problems. 

