

\section{Word-internal Structure Annotation}\label{sec:data-annotation}
%Intra-Word Character Dependency Treebank (IWDT)}

In this section, we describe in detail the annotation process of WIST. 
As shown in Figure \ref{fig:example}-(c), we adopt dependency trees for representing word-internal structure. 
The reason is two-fold. First, word-formation process correlates with syntax in different ways depending on language type \cite{Aikhenvald-2007-typological}. Such correlation is especially close for Chinese due to its lack of morphological inflections. In particular, \citet{grammar-notes-zhu-1982} presented thorough  investigation on Chinese word formation mainly from a syntactic view. 
Second, as a grammar formalism, dependency tree structure has been widely adopted for capturing sentence-level syntax due to its simplicity and flexibility in representing  relations. Meanwhile, its computational modeling is also developed quite well. 
%我们为什么采用依存树的形式？首先，汉语词内部结构本身和句法紧密相关，给出参考文献。第二，依存句法树形式，是近年来最流行的句法表示方法，多语言使用。主要就在于可以用label来区分组合的模式。




% 传统的人工标注数据通常以词为基本的syntactic unit, such as CTB, PKU, MSR, 
% This form of annotation does not
% give character-level syntactic structures for words,
% a source of linguistic information that is more fundamental
% and less sparse than atomic words.

% Considering that a word is defined by all the characters inside that subtly interact with each other from both syntax and semantics.
% Unlike alphabetical languages, Chinese
% characters convey meanings, and the meaning of
% most Chinese words takes roots in their character.a series of work因此一些工作开始标注词内部结构【引用】。most of the previous annotations通常只考虑内部结构框架或者核心字的位置，忽略了词内部各constituent unit之间的关系。Zhao 通过combine character-level POS tag来表示dependency label.然而这种表示不能直观地展示出各个字直接的主谓宾定状补关系。
% To overcome this obstacle, we construct一个词内部结构数据集according to our newly complied annotation guideline, which contains 11种依存关系，能够更直观地表达。。。

% Traditional manually annotated Chinese corpus such as CTB【】, PKU【】 and MSR【】 usually take words as the basic units, neglecting the character-level intra-word structures. In fact, the way that the Chinese characters inside the words interact with each other can convey meanings from the perspective of both syntax and semantic. In order to make use of the linguistic information from the internal word structure, several recent work has annotated constituent or dependency style internal structures for words【参考文献】. Most of these work mainly focus on the the hierarchical structure or the head character information for each word, without considering the relation types between constituent characters inside the word.
% % composition architecture 【意思是只关注框架结构，怎么写】 or the position of the head character for words, without considering the relation types between the constituent characters inside the words.
% 【Zhao】 represent intra-word character-level dependency label by combining the character-level POS tags of the constituent characters. However, the typical syntactic structures such as subject-predicate, verb-object, modifier-noun, coordination, which is quite important for analyzing。。。  can not be directly reflected by such dependency labels.
% To overcome this obstacle, we construct intra-word character dependency treebank of over xxx words CTB5 \cite{xue2005ctb} and CoNLL09 \cite{conll09} according to our newly complied annotation guideline, which contains 11 relations to intuitively reflect the internal dependency syntax for Chinese words.

% 什么是词内部结构？
% 为什么要标注词内部结构？
% 前人是怎么标注词内部结构的？
% 我们相比之下的优势？
% 可以给出图比较

%\subsection{Annotation Process}

\paragraph{Annotation guidelines.} 
After several months' survey,  we have compiled  systematic and detailed
 guidelines for word-internal structure annotation. 
Our guidelines are mainly based on the famous textbook on Chinese grammar of \citet{grammar-notes-zhu-1982}. 
We intensively studied all previous works on word-internal structure annotation, which are discussed in Section \ref{sec:related-work}.
We also find that it is quite beneficial to be familiar with guidelines developed by previous annotation projects for Chinese word segmentation \cite{ctb-xiafei,yu2003ppd}.

% 感觉没有说到重点。我们的规范，主要参考的了哪些资料？
% 语法讲义：稍微细致的展开一下。
% 汉语构词：

% Given an input word, annotators are asked to annotate the dependency arcs and the corresponding relation labels between the characters to capture the intra-word syntactic structure.
% The role of the IWDT annotation guideline is to provide the annotation rules of 
% intra-word syntax structures under various linguist phenomena for annotators' reference.
%After a few months' in-depth study,  we have compiled a systematic and detailed
%annotation guideline for Chinese intra-Word character dependency treebank construction. 

Our guidelines contain 11 relations specifically designed to capture the internal dependency syntax for Chinese words, as shown in Table \ref{tbl:summary-relation}. 
We derive most of the dependency relations by referring to guidelines of three popular Chinese dependency treebanks, i.e., UD, Harbin Institute Technology Chinese Dependency Treebank (HIT-CDT) \cite{HIT-CDT}, and Chinese Open Dependency Treebank (CODT) \cite{li-etal-2019-semi-supervised}. 
We give very detailed illustrations with examples in our 30-page guidelines to ensure annotation consistency and quality. 
Our guidelines are also gradually improved according to the feedback from the annotators. 
% The latest version is attached as supplementary material. 

\paragraph{Quality control.} 
We employ 18 undergraduate students as part-time annotators who are familiar with Chinese syntax, and select 6 capable annotators with a lot of data annotation experience as expert annotators 
to handle inconsistent submissions. %Before formal annotation
All the annotators (including expert annotators) were paid for their work . 
The salary is determined by both quantity and quality. Besides, we give extra bonus to the annotators with high accuracy. The average salary of the annotators is 30 RMB per hour.
% (a part-time waiter in KFC earns 20 RMB per hour in our city).
All annotators are trained %We train annotators 
for several hours to be familiar with our guidelines and the usage of annotation tool. 
% During formal annotation, annotators are encouraged to look up the guideline or use search engine for difficult or incomprehensible inputs, but are not allowed to discuss with each other, in order to guarantee quality.

We apply strict double annotation in order to guarantee quality. % of the labeled data. 
Each word 
% (without any word inputs) 
is randomly assigned to two annotators. Two identical submissions are directly used as the final answer. Otherwise, a third expert annotator is asked to decide the final answer after analyzing the two inconsistent annotations. 

\paragraph{Annotation tool.} 
We build a browser-based annotation tool to support the annotation workflow and facilitate project management.
% ,  which is also illustrated in detail in our supplementary material. 

%In the annotation interface, present all its POS tags to annotators. 
Given an annotation task, all its POS tags \footnote{In CTB5, a word may be annotated with different POS tags under different contexts. For example, ``发展 (development)'' is annotated as NN (noun) in the context ``促进经济发展 (boost the economic development )'', whereas ``发展 (develop)'' is annotated as (VV) verb in the context ``稳定地发展 (develop steadily)''. Therefore, when annotating the word ``发展 (develop/development )'', we present both ``noun'' and ``verb'' to the annotators for reference.''} of the focused word in CTB5 are presented to the annotator, in order to explore multiple internal structures for one word. 
In that case, the annotator can click a checkbox to inform us for further process. 
Please note that the manually annotated POS tags in CTB5 are converted into Universal Dependencies (UD) \footnote{\scriptsize{\url{universaldependencies.org/u/pos/}}} POS tags based on predefined mapping rules, since the original CTB5 POS tags are too fine-grained (33 tags) and difficult for annotators to understand.
The interface also presents several example sentences to improve annotation efficiency. We strongly encourage annotators to look up difficult words or characters in electronic dictionaries.\footnote{Eg., \url{hanyu.baidu.com}; \url{xh.5156edu.com/}} 
% 我们的标注系统的设计，告诉所有词性，及相应例句。supplementary material。
% 学习界面，允许投诉。
%  【支撑材料】



\setlength{\tabcolsep}{3pt}
\begin{table}[tb]
% \begin{small}
\begin{center}
\newcommand{\tabincell}[2]{\begin{tabular}{@{}#1@{}}#2\end{tabular}}
\begin{tabular}{l |r | r  r  r   r }
    \toprule
     & Total \# & 1 & 2 &  3 & $\ge$4 \\
    \hline
    word type & 37,449 &  5.6 & 58.3 & 22.8 & 13.3 \\
    %\hline
    word token & 508,764 & 48.0  & 44.1 & 6.0 & 1.9 \\
    % \hline
    % type (freq $<$ 3) & 23,919 & 2.9  & 52.9 & 26.2 & 18.0 \\
    % token (freq $<$ 3) & 29,560 & 3.1  & 54.3 & 25.7 & 16.9 \\
    % \hline
    % type (freq $=$ 2) & 5,641 & 4.2  & 60.4 & 23.7 & 11.7 \\
    % token (freq $=$ 2) & 11,282 & 4.2  & 60.4 & 23.7 & 11.7 \\
    % \hline
    % type (freq $=$ 1) & 18,278 & 2.5  & 50.6 & 26.9 & 20.0 \\
    % token (freq $=$ 1) & 18,278 & 2.5  & 50.6 & 26.9 & 20.0 \\
    \bottomrule
\end{tabular}
\end{center}
\caption{{Word distr. regarding char number in CTB5. }}\label{tbl:summary-different-num-word}
% \end{small}
\end{table}


\paragraph{Data selection.}  


Following previous works, we select multi-char words from CTB5 for annotation. 
Table \ref{tbl:summary-different-num-word} shows word distribution  regarding character numbers. 
We can see that only 5.6\% of words in the vocabulary contain one char, but they account for nearly half (48\%) token occurrences in the text. 
%However, when we focus on rare words, for instance with frequency less than 3, ....
The percent of words with two characters is high in both vocabulary (58.3) and text (44.1). 
We discard words containing special symbols such as English letters. Finally, we have annotated 32,954 multi-char words with their internal structure, containing 83,999 dependencies (2.5 characters per word).

% 我这么写的（非常简化，就是避免提CTB6，等录用后，我们考虑把规范提高到5万左右），一定要注意，词数别超过CTB中的multi-char words!

% 我们的标注分为三个阶段：第一阶段，我们选取了CTB5中频率大于2的所有词，过滤了包含非汉字等特殊符号的词，一共包含11,823词，（如果考虑词性的话，是15219词/词性对)。全部进行标注。然后我们就用这个标注的数据训练了一个parser。后面两个阶段都是用主动学习的方法（acl-2016-zhenghua)，简单的词不再标注。

% 第二阶段：ctb5-dev/test + ctb5剩余没有标注的。11,131个词（3131个词是dev和test中剩余的，然后又用主动学习的方法选了8000个词）

% 第三阶段：ctb6主动学习选择，10,000个词。

% 一共32,954个词。

% We choose 几个? typical canonical newswire texts from Penn Chinese Treebank (CTB5) \cite{xue2005ctb} for annotation.
% After filtering 1-character words, alphabets, digits and special characters, we collect all the Chinese words which is composed of more than 2 characters from CTB5, leading to xxx words for intra-word character dependency annotation.
% 讲一下主动学习。

\input{content/tbl-label-distr}

\section{Analysis on Annotated WIST} 

In this section, we analyze the annotated WIST from different aspects in order to gain more insights on Chinese word-formation patterns. 

% 这个还用分析吗？太多了。这个分析想干啥？单字的词性的分布，有点意思。不过和这个文章没啥关系。
% all对应的词性的比例（vocabulary vs. text)
% multi-char对应的词性的比例（vocabulary vs. text)

\paragraph{Inter-annotator consistency.}  
As discussed earlier, 
each word is labeled by two annotators, and inconsistent submissions are handled by a third senior annotator for obtaining a final answer. 
%Therefore, we can calculate the inter-annotation consistency and accuracy
The averaged inter-annotator consistency ratio is 83.0 dependency-wise, i.e., the percent of characters receiving the same head and label from two annotators, and 75.8 word-wise, i.e., the percent of words receiving the same whole trees. 
If we do not consider labels, the unlabeled consistency ratios increase to 87.5 dependency-wise and 85.1 word-wise. 
Although it may be a factor that most annotators are inexperienced in this new annotation task, 
such low consistency ratios indicate that annotating word-internal structure is quite challenging, especially when it comes to distinguishing syntactic roles. 
%these low ratios are still below our expectation. In fact, we find that annotating word-internal structure is quite challenging, which will be explained later?????. 
Meanwhile, this also demonstrates the importance of strict
double annotation, considering that nearly a quarter of words are inconsistent and require handling by senior annotators.  
% %不考虑label的弧一致率是多少？？？
% 不考虑label的弧一致率是87.5\%
% 不考虑label的词一致率是85.1\%

% 统一一下：只有说比例的时候，才把\%加上。

\paragraph{Annotation accuracy.}

%不考虑label的弧准确率是93.4\%,不考虑label词的准确率是92.1\%
We calculate annotation accuracy by comparing all submissions (as denominator) from annotators against the final answers in WIST. 
Please note that each word is double annotated. 
The overall dependency-wise accuracy for all annotators is 90.9, and word-wise is 86.9. 
If not considering labels, the overall unlabeled accuracy increases to 93.4 and 92.1, dependency- and word-wise respectively. 
%This shows that distinguishing different syntactic roles 

The first major row in Table \ref{table:label distribution} shows the label-wise annotation accuracy. 
We divide characters in WIST into 11 groups according to their final-answer labels, and then  calculate the percent of correct submissions for each group. 
%Each character are annotated by two annotators.  all submissions from  with a certain label, we calculate the percent of correct submissions from annotators. 
% For clarity, we only present 7 frequent labels. 
The highest accuracy %(93.9小数点后保留一位吧。模型结果统一用两位。) 
is obtained on ``repet'', since its pattern is quite regular. 
Determining the root character also seems relatively easy. 
% The accuracy for ``adv'' is only 80.6. 
The lowest accuracy is 62.0 on ``subj'' and 48.2 on ``pobj''.


Comparing unlabeled versus labeled accuracy, the gap is quite large. The extreme case is ``pobj''. Annotators usually can correctly decide the head (84.5\%), but very unlikely choose its true label ``pobj'' (48.2\%). Similarly, accuracy drops by 24.9 for ``subj''. We give more discussions on  annotation difficulties below. 


%所有的label中，我们发现那些label人工标注很困难，准确率较低，李正华来写。
%label准确率见word文档图1和表3。



%The overall annotation accuracy is 90.94(??还没更新), which is calculated by comparing the submission of all annotators with the final answers.  
%The inter-annotator character-wise consistency ratio is the percent of characters that achieve consensus on dependency heads and labels from two annotators, which is $\frac{28399}{34204}=83.03$ (还没更新). The word-wise consistency ratio is the percent of words that receive exactly the same annotations from two annotators, which is only $\frac{8969}{11823}=75.86$. This means about a quarter of all the words need to be further checked by a third expert annotator, indicating the complexity of the intra-word character dependency annotation task and the importance of strict double annotation for quality guarantee. 

\paragraph{Label distribution.} 
The third major row in Table \ref{table:label distribution} shows distribution of different labels in WIST. 
From the percentage of ``root'' (39.2\%), we can infer that one word contains 2.5 characters on average. 
The overall percent for ``att'' is 29.1, almost half of the remaining labels, meaning that ``att'' appears once every 1.45  words. This reveals that attribute modification is the most dominated pattern in word formation. 
Coordination structure (``coo'') takes the second place with 10.2\%. 
The third most used pattern is fragment (``frag'') with 5.7\%. 
We give more discussion on ``frag'' below. 
% We observe that the attribute modifier (att) label has the highest percentage by 39.14\%. In other words, more than a third of the Chinese words are formed by modifier-noun construction. For example, the word ``黑板 (blackboard)'' is
% composed of the modifier character ``黑 (black)'' and the noun character ``board''. Words with coordination (coo) structure also accounts for a large proportion by 26.50\%, where the meaning of their constituent characters are usually similar, related or opposite.
% label分布情况见word文档图2表4。

%\paragraph{Label distribution regarding POS tags.} 
%不同词性的词，包含的label的分布，NR要单独出来} 
Besides the overall distribution, the third major row in Table \ref{table:label distribution} gives label distribution per POS tag.
For clarity, we give the full name of each POS tag (UD, converted from the fine-grained CTB tags) in Table \ref{table:label distribution}, and it means the POS tag of the focused word.
If a word has multiple POS tags, then the same word-internal structure is used for each tag. For example, if a word ``发 (expand) $\xrightarrow{coo}$ 展 (expand)'' has two tags, i.e., Noun and Verb, then the number of ``coo’’ is added by one for both Noun and Verb.
% If a word has multiple POS tags, it is used for each tag. 
Moreover, a label is repeatedly counted if it appears several times in the same word. 
Due to space limitation, we only present high-frequency POS tags, with percentage shown in parenthesis. 
Please note that we adopt a coarse-grained POS tag set for clarity.

We can see that nouns are mostly formed with ``att'' (33.8\%) and ``coo'' (11.5\%), whereas verbs are with ``coo/obj/adv/cmp'' in the descending order. Proper nouns are evenly dominated by ``frag'' (29.6\%) and ``att'' (28.4\%). It is also obvious that proper nouns tend to be longer, consisting of 2.7 characters according to its ``root'' percentage. 
Numerals are mainly composed via ``att'' (75.7\%) and consist of 5.0 character on average. 
% 名词主要是att、coo
% 动词coo obj adv cmp
% 专有名词 att frag 词比较长
% 数词 att，词平均长度为5?
% 形容词  
% 副词
% 其他

\paragraph{Multiple structures for one word?} 
%One word have multiple同一个词有多个内部结构的情况：}  
Many words have multiple meanings.  
Then the question is: how many words really have multiple internal  structures? 
%We use coarse POS tags, as we discuss in 
As illustrated in Section \ref{sec:data-annotation}, we show all POS tags to annotators in order to obtain all internal structures of an ambiguous word.
%In CTB5, there are xxxx multi-char words having multiple  POS tags. 
However, in annotated WIST, we find there are only 103 such words with multiple internal structures, accounting for about 0.3\% of all annotated words, % 32,954
and 2.7\% of those having multiple POS tags. % 3,796
As a typical example, ``制服'' have two structures. 
As a verb, it means ``subdue'' and has ``制(control) $\xrightarrow{cmp}$ 服(tamely)''. As a noun, it means ``uniform'' and has ``制(regulated) $\xleftarrow{att}$ 服(cloth)''. 
% 第一批的所有词中，一共只有94个词有不同的结构，占比94/11823=0.795\%。比较典型的``制服''。when used as a verb, its meaning is overpower: the annotation is:  制（）、服（）; noun, uniform，标注是什么。
%由于这个比例很小，所以对实验的影响很小，我们可以safely assume each word has only a single internal structure. 
This low percentage reveals that most Chinese words actually have very steady internal structure. They have multiple POS tags, mainly because they are used for different syntactic functions without morphological inflections, such as ``发展'' as verb (``develop'') or noun (``development''). 

% \paragraph{POS tag distribution regarding labels. (注意要和label distr.的那个表中的比例一致！）} 

% Conversely, we can also calculate POS tag distribution for each label. Similarly to above, our calculation is based on word and POS tag pairs, and a word is repeatedly counted if a label appears more than once in the word. 
% Table xx shows the results. The distribution of the ``root'' label directly corresponds to the word distribution of our annotated data regarding POS tags. 
% 应该没地方写了。
% att主要在名词、数词、专有名词
% coo名词、动词
% frag 专有名词
% obj 动词、名词、形容词
% adv 动词 形容词 副词
% cmp 动词
% adjct 名词 动词 数词 副词
% subj 动词 名词


% 要根据词性的比例排序（比例也写上，注意一定要和表6中root的分布完全对应！！！赛豪、龚晨注意下，这句话先别删），如果一个词属于不同词性，就计算多次。
% 见word文档表5。

% 地方不够的话，应该要放到appendix


\paragraph{More on ``frag''.} 
The ``frag'' label is designed to handle all words that have no internal structure due to the lack of semantic composition. 
From Table \ref{table:label distribution}, we can see that ``frag'' accounts for 5.7\% of all labels. 
In order to gain more insights, we collect all 3,528 words containing ``frag'' in WIST, and randomly sample 100 words for investigation. 
Following the brief discussion in Section \ref{sec:intro}, we divide these words into three types, and find that 81 words are proper nouns (such as person name); 16 correspond to transliteration of foreign words; and 3 are single-morpheme words. 
% 比例可以看得到。我们发现3528个词内部包含frag标签，占比11\%。然后我们随机的选择100个，然后统计了一下。发现16个是transliteration（社会学），3个是single-morpheme words，81个是无内部结构的命名实体（人名）。

\paragraph{High-order structure distribution.} 
To gain more insights on complex word-formation structure, we focus on all three-char words. 
We find that the root usually lies in the third character by 74.6\%, and the percentage for the second and first characters is only 15.3 and 10.1 respectively. Looking more closely, we find the following four dominated structures. 

\setlength{\tabcolsep}{6pt}
\begin{center}
% \begin{small}
\newcommand{\tabincell}[2]{\begin{tabular}{@{}#1@{}}#2\end{tabular}}
\begin{tabular}{c r | c r }
%    \hline
    1 $\leftarrow$ 2 $\leftarrow$ 3 & 34.7\% &  
(1 $\rightarrow$ 2) $\leftarrow$ 3 & 34.2\% \\
\hline
1 $\leftarrow$ 2 $\rightarrow$ 3 & 15.3\% &  
1 $\rightarrow$ 2 $\rightarrow$ 3 & 7.0\% \\
%    \hline
\end{tabular}
% \end{small}
\end{center}

% For four-char words, the root most lies in the xx character, and the most popular structure is ....???

% 第1个字是核心的比例：7.02+1.17+1.87=10.06
% 2: 15.30
% 3: 34.67+34.20+5.78=74.65
% 四个字的比例呢：

% 只考虑3个字：
% 1 -> 2 -> 3：534  占比7.02\%
% 1 <- 2 <- 3：2639 占比34.67\%
% 1 -> 3 -> 2：89 占比1.17\%
% 3 -> 1 -> 2：2603 占比34.20\%
% 3 -> 1/2：440 占比5.78\%
% 1 -> 2/3：142 占比1.87\%
% 2 -> 1/3：1165 占比15.30\%
% 总数是7612.

\paragraph{Difficulties in annotation.} %Here we briefly discuss some typical annotation difficulties. 
Since it is difficult to capture the patterns on unlabeled-dependency inconsistencies, we focus on confusion patterns in label annotation. Among all characters receiving the same head but different labels from two annotators, 20.1\% correspond to ``\{att, adv\}'' confusion due to the ambiguity of the head character being a verb or a noun. 
The second confusion pattern is ``\{coo,frag\}'', with a proportion of 18.6, which are mainly from proper nouns. According to our guidelines, if the meaning of a proper noun is compounding, annotators have to annotate its real internal structures rather than using ``frag''. 
It is also very difficult to distinguish ``obj'' and ``pobj'', since the boundary between prepositions and verbs is vague in Chinese.
%due to historical r

% 只说了占比例最大的att,coo，其他标签没提。标签分布带来的启发：大部分中文词的含义能够通过它的内部结构和字的含义组合得到。

%att和adv，主要在于核心字的词性是名词还是动词，很难区分，边界非常模糊。

%类似介词和动词的区分，obj/pobj，比例小，困扰比较大，古代没介词，衍生出来的

%2.frag标签和coo标签混淆，依存弧方向正确，标签错误（18.6\%）。可能在标注规程中对于字词的理解不到位，coo这个标签是指两个字之间是相互独立的，并且都和整个词的意思有关，而frag标签则是指虽然两个字之间相互独立，但两个字单独的意思和整个词的意思是无关的。例子如：光华（coo），雅美（是一个专有名词，所以标注成frag，容易被误标成coo），蚯蚓（frag）。

% 有的专有名词内部是有结构的，有含义的。





% obj和pobj很难区分

% subj和att也很难区分

% 目前的分析，感觉没有什么insights。赛豪得深入想。


% 讨论词内部分析准确率时，我们最好的标注人员可以达到93左右，模型的结果还存在较大差距。一个重要的原因是，人可以查阅字和词在词典中解释，仔细分析。模型做不到。
