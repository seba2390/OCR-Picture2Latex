% automatic sequencing and labeling of sections, theorems and equations
\newcount\sectionno\sectionno=0
\newcount\equationno\equationno=0
\newcount\theoremno\theoremno=0
\newcount\figureno\figureno=0

\font\bigfont=cmbx10
\def\Heading#1{\bigskip\bigskip\goodbreak\centerline{\bigfont #1}\nobreak\bigskip\nobreak}
\def\Section#1{\global\advance\sectionno by 1\relax%
   \equationno=0\theoremno=0\Heading{\the\sectionno. #1}}

\newwrite\aux
\immediate\openout\aux=\jobname.aux

\def\formeq{\the\sectionno.\the\equationno}
\def\formth{\the\sectionno.\the\theoremno}
\def\formfig{\the\figureno}

\def\Elabel#1{\global\advance\equationno by 1 \formeq%
\immediate\write\aux{\def\string#1{\formeq}}%
\global\edef#1{\formeq}}

\def\Tlabel#1{\global\advance\theoremno by 1 \formth%
\immediate\write\aux{\def\string#1{\formth}}%
\global\edef#1{\formth}}

\def\Flabel#1{\global\advance\figureno by 1 \formfig%
\immediate\write\aux{\def\string#1{\formfig}}%
\global\edef#1{\formfig}}

