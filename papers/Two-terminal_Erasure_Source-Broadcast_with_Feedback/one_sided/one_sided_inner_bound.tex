\subsubsection{Inner Bound}
\label{subsubsec:inner_bound}

In this section, we formulate a hybrid coding scheme that incorporates both repetition coding and sending random linear combinations of source symbols.  The code is tuned via two parameters, $\omegaparam, \gammaparam \in [0, 1]$.  We target point-to-point optimal performance for the stronger user in this section, and show that this is possible for any values of $\omegaparam$ and $\gammaparam$.  In the next section however, we show how to optimize $\omegaparam$ and $\gammaparam$ to achieve the optimal minmax latency.  As in the coding scheme in Section~\ref{sec:two_users}, we again split the coding scheme into phases.  

In Phase~\Rmnum{1}, we begin by sending each source symbol uncoded over the channel.  That is, Phase~\Rmnum{1} consists of $N$ transmissions and at time $t \in \{1, 2, \ldots, N\}$, we transmit $X(t) = S(t)$.  Let $\Aset \subseteq \{S(1), S(2), \ldots, S(N)\}$ be the set of symbols received by the stronger user in Phase~\Rmnum{1}.  Since the stronger user's feedback is available to all receivers and the transmitter, $\Aset$ is known to all parties.  
%We have that $\mathbb{E}|A| = 1 - \epsilon_1$ 

At the conclusion of Phase~\Rmnum{1}, we have that on average, for $i \in \{1, 2\}$, user~$i$ will have received $N(1 - \epsilon_i)$ source symbols and so will require an additional $N(\epsilon_i - d_i)$ symbols in the remaining phases.   Before moving on to Phase~\Rmnum{2}, we first organize the source symbols in $\Aset$ and $\AsetC$ into subsets, where $\AsetC \subseteq \{S(1), S(2), \ldots, S(N)\}$ denotes the complement of set $\Aset$. We first isolate a fraction of $N(\epsilon_1 - d_1)$ source symbols from $\AsetC$ into a set denoted as $\Bset$.  That is, we fix the remaining $N(\epsilon_1 - d_1)$ symbols that the stronger user requires in $\Bset$.  We then partition $\Bset$ into two disjoint sets, one that contains a fraction of $\omegaparam \in [0, 1]$ source symbols from $\Bset$, denoted as $\BsetOmega$, and the other that contains the remaining fraction of $1 - \omegaparam$ symbols, denoted as $\BsetOmegaC$, where $\Bset = \BsetOmega \cup \BsetOmegaC$.  Random linear combinations of the symbols in $\BsetOmega$ will be sent to the stronger user while the symbols in $\BsetOmegaC$ will be sent with repetition coding.  We further take a fraction of $\gammaparam \in [0, 1]$ source symbols from $\Aset$ and denote this set as $\Cset$.  Finally, we define $\Fset$ as the union of sets $\Cset$ and $\BsetOmega$.  Figure~\ref{fig:set_construction} illustrates the relationship between all sets and the manner in which they are constructed.

\begin{figure}
	\centering
%	\input{3/fig/schematic}
%	\includegraphics[scale=0.8]{3/one_sided/fig/system_model_one_sided}
	\includegraphics[scale=1]{one_sided/fig/set_construction}
%%	\includegraphics[width=0.6\textwidth]{outer_bound.png}
	\caption{A tree diagram illustrating the relationship between the sets of source symbols.  Each node represents a set of source symbols and a directed edge $(X,Y)$ indicates that set $Y$ is a subset of $X$.  If edge $(X, Y)$ is also \emph{weighted}, then the weight represents the expected cardinality of set $Y$.  Only sets involved in the coding scheme have incoming \emph{weighted} edges.  The direct successors of a node form a partition for the set representing the parent node.  The root of the tree is the entire source sequence, which is subsequently partitioned at each depth of the tree.  We also show set $\Fset$, which is the union of $\Cset$ and $\BsetOmega$.}
	\label{fig:set_construction}
\end{figure}

In Phase~\Rmnum{2} of the coding scheme, we designate the symbols of $\BsetOmegaC$ as the symbols to be transmitted to the stronger user with a repetition scheme.  However, we modify the repetition scheme to incorporate random linear combinations of symbols in $\Fset$.  In a conventional repetition scheme, we would retransmit $\bOmegaC \in \BsetOmegaC$ until it is received by the stronger user.  Upon reception by the stronger user, we move on to the next symbol $\bOmegaC' \in \BsetOmegaC$ and continue in this manner until all symbols in $\BsetOmegaC$ are accounted for.  Let $\bOmegaT \in \BsetOmegaC$ be the source symbol being repeated at time $t$.  Our modified coding scheme is similar to the conventional repetition scheme except that at any time $t$, instead of \emph{only} transmitting $\bOmegaT$, we instead send $v(t) + \bOmegaT$, where $v(t)$ is a \emph{new} random linear combination of the source symbols in $\Fset$ generated for every time $t$.  Let  $\bOmegaC \in \BsetOmegaC$.  If $\bOmegaT = \bOmegaC$ is transmitted and subsequently received by the stronger user at time $t$, the protocol for replacing $\bOmegaC$ at time $t+ 1$ with another source symbol from $\BsetOmegaC$ is identical to the conventional repetition scheme, however the only difference is that we now combine $\bOmegaT$ with a random linear combination of the symbols of $\Fset$ at every transmission.  Phase~\Rmnum{2} concludes when all symbols in $\BsetOmegaC$ have been accounted for by the modified repetition scheme.

\begin{remark}
	When applying a random linear code, we use the maximum distance separable (MDS)-type property that any collection of $N$ channel symbols gives $N$ linearly independent equations.  Although strictly speaking such codes do not exist over the binary field, randomly chosen combinations over long blocks are approximately MDS~\cite{TTAAJ17}.
%	when we use a random linear code, we will use MDS type property that any collection of N symbols gives N linearly independent equations. Although strictly speaking such codes do not exists over the binary field, randomly chosen combinations over long blocks are approximately MDS. You can cite a reference such as the following one: https://link.springer.com/chapter/10.1007/978-3-319-51103-0_14
\end{remark}

At the conclusion of Phase~\Rmnum{2}, since we have transmitted the symbols in $\BsetOmegaC$ as if we were utilizing a repetition scheme, we have that on average, the stronger user will have received $|\BsetOmegaC|$ equations involving $|\BsetOmegaC| + |\Fset|$ variables.  Notice, however, that since $\Fset \triangleq \Cset \cup \BsetOmega$, and $\Cset \subseteq \Aset$, the stronger user can subtract off all symbols originating from $\Cset$.  Therefore, Phase~\Rmnum{1} actually results in the stronger user receiving $|\BsetOmegaC|$ equations involving $|\BsetOmegaC| + |\BsetOmega| = |\Bset|$ \emph{unkown} variables, where $\mathbb{E}|\Bset| = N(\epsilon_1 - d_1)$.  The stronger user therefore requires an additional $|\BsetOmega|$ equations at the conclusion of Phase~\Rmnum{2}.

In Phase~\Rmnum{3}, we send the remaining equations to the stronger user by continuing to send $v(t)$ at any time $t$.  That is, we continue sending random linear combinations of the symbols in $\Fset$.  Phase~\Rmnum{3} concludes when the feedback of the stronger user indicates that he has received the missing $|\BsetOmega|$ equations.

At the conclusion of Phase~\Rmnum{3}, it is not hard to see that the stronger user achieves point-to-point optimal performance, since every channel symbol received has provided an independent equation that can be used to decode a new source symbol.  
%For $i \in \{1, 2\}$, let $w_{i}(d_i) = (1 - d_i)/(1 - \epsilon_i)$ represent the point-to-point optimal latency for user~$i$.  
At this point, if $\wtwo \leq \wone$, we halt any further transmissions, where $\wid$ is given by~\eqref{eq:wid_optimal}.

In Phase~\Rmnum{4}, if $\wtwo > \wone$, we continue to transmit $v(t)$, the random linear combinations of the source symbols in $\Fset$, for an additional $N(\wtwo- \wone)$ transmissions.





%only symbols providing new information are those originating from $\BsetOmega$
%
% involving $|\Bset|$ symbols, where $\mathbb{E}|\BsetOmegaC| = N(1 - \omegaparam)(\epsilon_1 - d_1)$.  We therefore need to send another $N\omegaparam(\epsilon_1 - d_1)$ equations to the stronger user.  
%
%In Phase~\Rmnum{3}, we send the remaining equations necessary for the stronger user to decode by continuing to send $v(t)$, random linear combinations of the source symbols in $\Fset$, until $N\omega(\epsilon_1 - d_1)$ symbols are received.  
%
%
%
%
%
%we send random linear combinations of the source symbols in $\Fset \triangleq \Cset \cup \BsetOmega$.  Let $v(t)$ be a \emph{new} random linear combination of the source symbols in $\Fset$ generated at time $t$.  Since $\Cset \subseteq \Aset$, the stronger user can subtract off all symbols originating from $\Cset$.  Therefore, the only symbols providing new information are those originating from $\BsetOmega$.  We use the stronger user's feedback to continue to send random linear combinations until the stronger user has received $|\BsetOmega|$ equations, where $\mathbb{E}|\BsetOmega| = \omegaparam(\epsilon_1 - d_1)$.  At the conclusion of Phase~\Rmnum{2}, by construction, the stronger user has decoded all symbols in $\Fset$.
%
%In Phase~\Rmnum{3}, we use a repetition coding scheme to send each symbol $\bOmegaC \in \BsetOmegaC$.  However, since all symbols in $\Fset$ have been decoded by the stronger user at the beginning of Phase~\Rmnum{3}, notice that we can also combine the symbol $\bOmegaC$ with a random linear combination of the symbols in $\Fset$ to the benefit of the weaker user, but at no extra cost to the stronger user.  That is, let $\bOmegaC$ be a symbol that would be sent with a repetition scheme at time $t$.  Then instead of transmitting $\bOmegaC$ at time $t$, we instead transmit $v'(t) = v(t) + \bOmegaC$ where $v(t)$ is a \emph{new} random linear combination of the source symbols in $\Fset$, which can be subtracted off by the stronger user.
%As with a conventional repetition scheme, we also repeat $\bOmegaC$ until it is received by the stronger user for all $\bOmegaC \in \BsetOmegaC$.  However, the difference in Phase~\Rmnum{3} is that we also combine $\bOmegaC$ with $v(t)$, a different linear combination of the source symbols in $\Fset$ at every retransmission.  At the conclusion of Phase~\Rmnum{3} it is not hard to see that the stronger user achieves point-to-point optimal performance, since every channel symbol received has lead to the decoding of a source symbol.  
%
%Finally, in Phase~\Rmnum{4}, if the weaker user has not yet met his distortion constraint, we continue to send random linear combinations of the source symbols in $\Fset$.

%instead of sending the random linear combination $v(t)$ at time $t$ as in Phase~\Rmnum{2}, we instead transmit $v'(t) = v(t) + \bOmegaC$ where $\bOmegaC \in \BsetOmegaC$ is a source symbol that has yet to be received by the stronger user.  Since the stronger user has decoded all symbols in $\Fset$ from the previous phase, he can subtract off $v(t)$ from $v'(t)$ at any time $t$ in Phase~\Rmnum{3}. 

