%\documentclass{standalone}
%
%\usepackage{tikz}
%%\usepackage[pdf]{pstricks}
%\usepackage{pstricks}
%\usepackage{pst-sigsys}
%
%\begin{document}

\psset{xunit=0.5cm,yunit=0.5cm}

\begin{pspicture}[showgrid=false](0,-15)(15, 0)
%\begin{pspicture}[showgrid=true](0,-15)(15, 0)
%	\psset{xunit=0.5cm,yunit=0.5cm}
	\scriptsize
	\pssignal(0,-7) {S}{{\normalsize$S^{k}$}}
	
	%%%%%%%%%%%%%%%%%%  Encoder %%%%%%%%%%%%%%%%%%
	\psfblock[framesize=2 7.5](3.5,-7){enc}{{\normalsize Encoder}}
	\newcount\cnt
	
	%%%%%%%%%%%%%%%%%%  Decoder %%%%%%%%%%%%%%%%%%
	\psfblock[framesize=1.5 3](15,-2.5){dec1}{{\small Decoder 1}}
	\psfblock[framesize=1.5 4.5](15,-10.25){dec2}{{\small Decoder 2}}

	%%%%%%%%%%%%%%%%%% Multipliers %%%%%%%%%%%%%%%%%%
	\cnt=0
	\psforeach{\ry}{0,-2,-4,-6,-8,-10,-12,-14}{\advance\cnt by 1\relax
		\pscircleop[oplength=.08](10,\ry){op\the\cnt}
		\pnode(5.5,\ry){enc_dot\the\cnt}
		\pnode(13.5,\ry){dec_dot\the\cnt}
	}
	
	\cnt=0
	\psforeach{\ry}{-1,-3,-5,-7,-9,-11,-13,-15}{\advance\cnt by 1\relax
		\pnode(10,\ry){N_arrow\the\cnt}
		\ncline[style=Arrow]{N_arrow\the\cnt}{op\the\cnt}
	}
	
	\pssignal(6.5,0.5){X1}{$X(1)$}
	\pssignal(6.5,-1.5){X2}{$X(2)$}
	\psldots[angle=90,ldotssep=0.1](6.5,-2.7)
	\pssignal(6.5,-3.5){Xn1}{$X(n_{1})$}
	\psldots[angle=90,ldotssep=0.1](8.5,-9)
	\pssignal(7,-11.5){Xn1p1}{$X(n_{1} + 1)$}	
	\pssignal(6.5,-13.5){Xn2}{$X(n_{2})$}
	\psldots[angle=90,ldotssep=0.1](8.5,-13)	
	
	\pssignal(11,-1){Z1_1}{$Z_{1}(1)$}
	\pssignal(11,-3){Z1_2}{$Z_{1}(2)$}
	\pssignal(11,-5){Z1_n1}{$Z_{1}(n_{1})$}
	\pssignal(11,-7){Z2_1}{$Z_{2}(1)$}
	\pssignal(11,-9){Z2_2}{$Z_{2}(2)$}
	\pssignal(11,-11){Z2_n1}{$Z_{2}(n_{1})$}
	\pssignal(11.5,-13){Z2_n1p1}{$Z_{2}(n_{1} + 1)$}
	\pssignal(11,-15){Z2_n2}{$Z_{2}(n_{2})$}
	
	\pssignal(12.5,0.5){Y1_1}{$Y_{1}(1)$}
	\pssignal(12.5,-1.5){Y1_2}{$Y_{1}(2)$}
	\pssignal(12.5,-3.5){Y1_n1}{$Y_{1}(n_{1})$}
	\pssignal(12.5,-5.5){Y2_1}{$Y_{2}(1)$}
	\pssignal(12.5,-7.5){Y2_2}{$Y_{2}(2)$}
	\pssignal(12.5,-9.5){Y2_n1}{$Y_{2}(n_{1})$}
	\pssignal(12,-11.5){Y2_n1p1}{$Y_{2}(n_{1} + 1)$}
	\pssignal(12.5,-13.5){Y2_n2}{$Y_{2}(n_{2})$}
	
	
	%%%%%%%%%%%%%%%%%%  Looped Input Dots  %%%%%%%%%%%%%%%%%%
	% Draw decoder 2's input dots
	\cnt=0
	\psforeach{\ry}{0,-1.75,-2.25, -3.75, -4.25, -6}{\advance\cnt by 1\relax
		\dotnode[dotsize=.08](9,\ry){dot_x1_\the\cnt}
	}	
	\cnt=0
	\psforeach{\ry}{-2,-3.75,-4.25,-8}{\advance\cnt by 1\relax
		\dotnode[dotsize=.08](8,\ry){dot_x2_\the\cnt}
	}
	\cnt=0
	\psforeach{\ry}{-4,-10}{\advance\cnt by 1\relax
		\dotnode[dotsize=.08](7,\ry){dot_xn1_\the\cnt}
	}
	
	\ncline[style=Arrow]{S}{enc}
	
	% X1
	\ncarc[arcangle=-50]{dot_x1_2}{dot_x1_3}
	\ncarc[arcangle=-50]{dot_x1_4}{dot_x1_5}
	\ncline{dot_x1_1}{dot_x1_2}
	\ncline{dot_x1_3}{dot_x1_4}
	\ncline{dot_x1_5}{dot_x1_6}

	% X2
	\ncarc[arcangle=-50]{dot_x2_2}{dot_x2_3}
	\ncarc[arcangle=-50]{dot_x2_4}{dot_x2_5}
	\ncline{dot_x2_1}{dot_x2_2}	
	\ncline{dot_x2_3}{dot_x2_4}	
	\ncline{dot_x2_5}{dot_x2_6}	
		
	\ncline{dot_xn1_1}{dot_xn1_2}
	
	\nclist[style=Arrow]{ncline}[naput]{enc_dot1,op1,dec_dot1}	
	\nclist[style=Arrow]{ncline}[naput]{enc_dot2,op2,dec_dot2}
	\nclist[style=Arrow]{ncline}[naput]{enc_dot3,op3,dec_dot3}
	\nclist[style=Arrow]{ncline}[naput]{dot_x1_6,op4,dec_dot4}	
	\nclist[style=Arrow]{ncline}[naput]{dot_x2_4,op5,dec_dot5}	
	\nclist[style=Arrow]{ncline}[naput]{dot_xn1_2,op6,dec_dot6}
	\nclist[style=Arrow]{ncline}[naput]{enc_dot7,op7,dec_dot7}
	\nclist[style=Arrow]{ncline}[naput]{enc_dot8,op8,dec_dot8}
	

	
\end{pspicture}

%\end{document}