%  A simple Tree
% % Author: Stefan Kottwitz
% % https://www.packtpub.com/hardware-and-creative/latex-cookbook
% \documentclass[border=10pt]{standalone} 
% %%%<
% \usepackage{verbatim}
% \usepackage[utf8x]{inputenc}
% \usepackage[T1]{fontenc}
% %%%>
% \begin{comment}
% :Title: A simple Tree
% :Tags: Trees;Cookbook
% :Author: Stefan Kottwitz
% :Slug: tree
% 
% A simple tree with a style for all nodes.
% \end{comment}
% 
% \usepackage{tikz}
% \usetikzlibrary{fit}
% \begin{document}
\begin{tikzpicture}[=>latex,
%    node distance = 2.5cm,
   minimum height   = 1.0cm,
   every node/.style={
%       %font=\ttfamily,
       text width=2.1cm
 , align=center},
 font={\sffamily\small}
] 
\tikzstyle{stateEdgePortion} = [black,thick];
\tikzstyle{stateEdge} = [stateEdgePortion,->];
\tikzstyle{edgeLabel} = [pos=0.5, text centered, draw=none, text width=2cm, fill= white, minimum height = 0 cm, font={\sffamily\small}];
\def\l{2.1}
 \node[name = rpm, draw=black]    at (0,0){fRPM};
 \node[name = CAA, draw=black]    at ({2.5*\l},-{3*\l}){CAA \\ PIANO};		
 \node[name = CFD, draw=black]    at (0,-{3*\l}){(U)RANS \\ TRACE};
%  \node[name = stoch]  at ({2*\l},-{1*\l})  {Stochastische Fluktuationen};
 
 \node[name = u, text width = 2cm, align =  left, minimum height = 0 cm, draw = none] 
                      at ({1.2*\l},-{2.2*\l}) {Background mean flow};
%input:
\node[name = BP] at (-{1.5*\l},-{2*\l}) {Operating point \& geometry};
\node[name = turb]   at (-{1.5*\l},{-1*\l}){Shape of correlation function};
%output
\node[name = schall] at ({4*\l},-{1.5*\l}) {Sound field};

  \draw (rpm.east)
       edge[stateEdge, bend left = 30] 
		node[edgeLabel]{Turbulent fluctuations}
%        (stoch.north); 
% \draw (stoch.south)
%        edge[stateEdge] % node[edgeLabel]{Als Quelle in}
       (CAA.north); 

%   \draw (stoch.north)
%        edge[stateEdge,dashed, bend right = 90]
%        node[edgeLabel]{realisiert}
%        (turb.north); 

	\draw (CFD.north)
       edge[stateEdge]
       node[edgeLabel]{Variance, \\ 
                       length scale }
       (rpm.south); 
	\draw (CFD.north east)
       edge[stateEdge]
       (u.south west); 
\draw (u.north west)
       edge[stateEdge, bend right = 15]
       ([xshift=2pt]rpm.south);
\draw (u.south)
       edge[stateEdge, bend left = 15]
       ([yshift=2pt]CAA.west);
\draw (CFD.east)
       edge[stateEdge]
       node[edgeLabel]{Geometry}
       (CAA.west);
\draw (CAA.east)
       edge[stateEdge, bend right = 30]
%        node[edgeLabel]{Geometrie}
       (schall.south);
\draw (BP.south)
       edge[stateEdge, bend right = 30]
%        node[edgeLabel]{Input}
       (CFD.west);

\draw (turb.north)
       edge[stateEdge, bend left = 30]
%        node[edgeLabel]{Input}
       (rpm.west);

%  \draw (project.north)
%       edge[stateEdge, bend left=30]
%       (filter.west); 
% \draw (filter.east)
%       edge[stateEdge, bend left=30]
%       (scale.north); 
% \draw (scale.south)
%       edge[stateEdge]
%       (interp.north); 
% \draw (interp.west)
%       edge[stateEdge, bend left=30]
%       (move.east); 
% \draw (move.north)
%       edge[stateEdge]
%       (project.south); 
 \node[draw,dotted, fit=(schall),inner sep=1mm] (out) {};
 \node[rotate=90,font=\ttfamily,gray,draw=none] at (out.east) {\colorbox{white}{Output}};
\node[draw,dotted, fit=(BP) (turb),inner sep=1mm] (input) {};
\node[rotate=90,font=\ttfamily,gray,draw=none] at (input.west) {\colorbox{white}{Input}};
\end{tikzpicture}
% \end{document}