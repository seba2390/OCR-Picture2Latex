Before proceeding to the proof of Lemma \ref{c3null}, we show Lemmas (\ref{m_2}, \ref{c3bssmall} and \ref{c3sat}). 

\begin{lemma}
\label{m_2}
Let $\agent_i$ be an agent in $\satagents_3$ and let ${\mathbb R}_z$ be the round of the second phase in which $\agent_i$ is satisfied. Then, for any other agent $\agent_j$ that is  in $\cthree^f$ in ${\mathbb R}_z$, $\valu_j(\secondset_i) < 1/2$ holds.
\end{lemma}

\begin{proof}
In ${\mathbb R}_z$, $\agent_i$ either belongs to $\cthree^s$ or $\cthree^b$. Thus, $\agent_j \prec_{pr} \agent_i$, and thus $\secondset_i$ is not feasible for $\agent_j$ in that round. Therefore, $\valu_j(\secondset_i)< 1/2$.
\end{proof}

\begin{lemma}
\label{c3bssmall}
Let $\agent_i \in \satagents_3$ be a satisfied agent and let ${\mathbb R}_z$ be the round in which $\agent_i$ is satisfied. Then, for every other agent $\agent_j$ that belongs to $\cthree^s \cup \cthree^b$ in that round, either $\valu_j(\secondset_i) < \epsilon_j$ or $\valu_j(\firstset_i) \leq 3/4-\epsilon_j$.

\end{lemma}
\begin{proof}
If $\secondset_i$ is not feasible for $\agent_j$, then the condition trivially holds. Moreover, by the definition, the statement is correct for the agents of $\cthree^b$. Therefore, it only suffices  to  consider the case that $\agent_j \in \cthree^s$ and $\secondset_i$ is feasible for $\agent_j$. Due to the priority rules for satisfying the agents in the second phase, $\agent_i \prec_{pr} \agent_j$ and hence, $\agent_i$ cannot be in  $\cthree^b$. Thus, $\agent_i \in \cthree^s$. According to Observation \ref{epsofcluster} and the fact that $\prec_{pr}$ is equivalent to $\prec_{o}$ for the agents in $\cthree^s$, we have $\valu_j(\firstset_i) \leq 3/4 - \epsilon_j$.
\end{proof}



\begin{lemma}
\label{c3sat}
During the second phase, for any agent  $\agent_i$ in  $\cthree$, we have: $$\sum_{\agent_j \in \satagents_3} \valu_i(\firstset_j \cup \secondset_j)< |\satagents_3| + 1/4.$$ 
\end{lemma}

\begin{proof}
To show Lemma \ref{c3sat}, we show that for all the agents $\agent_j \in \satagents_3$ except at most one agent, $\valu_i(\firstset_j \cup \secondset_j)<1$ holds. To show this, let ${\mathbb R}_z$ be an arbitrary round of the second phase, in which an agent $\agent_j \in \cthree$ is satisfied. First, note that in ${\mathbb R}_z$, $\agent_j$ belongs to $\cthree^s \cup \cthree^b$. Also, in round ${\mathbb R}_z$, $\agent_i$ belongs to one of $\cthree^s, \cthree^b$, or $\cthree^f$.  
 
If $\agent_i \in \cthree^f$, then by Lemma \ref{m_2}, $\valu_i(\secondset_j)<1/2$ holds. On the other hand, by definition, $\valu_i(\firstset_j)<1/2$ and hence, $\valu_i(\firstset_j \cup \secondset_j)<1$. 

Now, consider the case, where $\agent_i \in \cthree^b \cup \cthree^s$. Note that by Lemma \ref{c3bssmall}, either $\valu_i(\firstset_j) \leq 3/4-\epsilon_i$ or $\valu_i(\secondset_j) < \epsilon_i$. If $\valu_i(\secondset_j) < \epsilon_i$, then by Lemmas \ref{general} and \ref{c3fsmall}, we know $\valu_i(\firstset_j) < 3/4$ and hence, $\valu_i(\firstset_j \cup \secondset_j)<3/4 + \epsilon_i < 1$. 

For the case where $\valu_i(\firstset_j) \leq 3/4-\epsilon_i$, let $\ite_l$ be the item in $\secondset_j$ with the maximum value to $\agent_i$. By minimality of $\secondset_j$, $\secondset_j \setminus \{\ite_l\}$ is not feasible for any agent, including  $\agent_i$ and thus, $\valu_i(\secondset_j\setminus \{\ite_l\}) < \epsilon_i$. Recall that by Corollary \ref{small_c3}, there is at most one item $\ite_k$ in $\fitems$, such that $\valu_i(\ite _k) \geq 1/4$. In addition to this, $\valu_i(\ite_k) < 1/2$ trivially holds, since $\ite_k$ is not assigned to any agent during the clustering phase. If $\ite_l \neq \ite_k$, $\valu_i(\secondset_j)< 1/4 + \epsilon_i$ holds and hence, $$\valu_i(\firstset_j \cup \secondset_j) < 3/4-\epsilon_i + 1/4 + \epsilon_i<1.$$ Moreover, If $\ite_l = \ite_k$, $\valu_i(\secondset_j)< 1/2 + \epsilon_i$ holds and thus, $\valu_i(\firstset_j \cup \secondset_j) < 3/4-\epsilon_i + 1/2 + \epsilon_i<5/4$. But, this can happen at most one round. Therefore, for all the agents $\agent_j \in \satagents_3$ except at most one, $\valu_i(\firstset_j \cup \secondset_j)<1$. Also, for at most one agent $\agent_j \in \satagents_3$, $\valu_i(\firstset_j \cup \secondset_j)<5/4$. Thus, 
$$\sum_{\agent_j \in \satagents_3} \valu_i(\firstset_j \cup \secondset_j)< |\satagents_3| + 1/4.$$   
\end{proof}



\begin{proof}[of Lemma \ref{c3null}]
Suppose for the sake of contradiction that $\cthree \neq \emptyset$.  Note that, by the definition of $\cthree^b$, if $\cthree^s = \emptyset$ holds, then consequently $\cthree^b = \emptyset$. Therefore, since we have $\cthree = \cthree^s \cup \cthree^b \cup \cthree^f$, if $\cthree$ is non-empty, at least either of the two sets $\cthree^s$ or $\cthree^f$ is non-empty. In case $\cthree^s$ is non-empty, let $\agent_i$ be a winner of $\cthree^s$, otherwise let $\agent_i$ be an arbitrary agent of $\cthree^f$.

According to Lemma \ref{m_1}, for every agent $\agent_j \in \satagents_1^s \cup \satagents_2^s$, $\valu_i(\secondset_j) < {1/2}$ holds. Also, by Lemmas \ref{gsmallc1r} and \ref{cr2smallc3}, for every agent  $\agent_j \in \satagents_1^r \cup \satagents_2^r$, we have $\valu_i(\secondset_j) < {1/2}$. Therefore, 
$$\forall \agent_j \in \satagents_1 \cup \satagents_2 \qquad \valu_i(\secondset_j) < {1/2}.$$

Also, by Lemmas \ref{forc2c3} and \ref{forc3} we know that $\valu_i(\firstset_j)<{1/2}$ for every $\agent_j \in \satagents_1 \cup \satagents_2$. Thus, for every satisfied agent $\agent_j \in \satagents_1 \cup \satagents_2$, $\valu_i(\firstset_j \cup \secondset_j) <1$ holds, and hence 
\begin{equation}\label{eq1}
\sum_{\agent_j \in \satagents_1 \cup \satagents_2} \valu_i (\firstset_j \cup \secondset_j) < |\satagents_1 \cup \satagents_2|.
\end{equation}


Moreover, by Lemma \ref{c3sat}, the total value of items assigned to the agents in $\satagents_3$ to $\agent_i$ is less than $|\satagents_3| + 1/4$. More precisely,
\begin{equation}\label{eq2}
\sum_{\agent_j \in \satagents_3} \valu_i(\firstset_j \cup \secondset_j) \leq |\satagents_3| + 1/4.
\end{equation}
Inequality \eqref{eq1} along with Inequality \eqref{eq2} implies: 
\begin{equation}
\begin{split}
\sum_{\agent_j \in \satagents} \valu_i (\firstset_j \cup \secondset_j) & = \sum_{\agent_j \in \satagents_1 \cup \satagents_2} \valu_i (\firstset_j \cup \secondset_j) + \sum_{\agent_j \in \satagents_3} \valu_i (\firstset_j \cup \secondset_j)\\
& < |\satagents_1 \cup \satagents_2| + |\satagents_3| + 1/4\\
 & = |\satagents |+1/4
\end{split}
\end{equation}

Recall that the total sum of the item values for $\agent_i$ is equal to $n$. In addition to this, since every agent belongs to either of the Clusters $\cone$, $\ctwo$, $\cthree$, or $\satagents$ we have $$|\satagents| + |\cone| + |\ctwo| + |\cthree| = n.$$ Furthermore, every item $\ite_j \in \items$ either belongs to $\fitems$ or one of the sets $\firstset_{j'}$ and $\secondset_{j'}$ for an agent $\agent_{j'}$. More precisely,
$$\fitems = \items \setminus \Big[\bigcup_{\agent_j \in \satagents \cup \cone \cup \ctwo \cup \cthree^s} \firstset_j \cup \bigcup_{\agent_j \in \satagents} \secondset_j\Big].$$ 
 Therefore
\begin{equation}\label{eq5}
\begin{split}
\sum_{\agent_j \in \cone} \valu_i(\firstset_j) + \sum_{\agent_j \in \ctwo} \valu_i(\firstset_j) + \sum_{\agent_j \in \cthree^s} \valu_i(\firstset_j) + \valu_i({\fitems}) & = \valu_i(\items) - \sum_{\agent_j \in \satagents} \valu_i(\firstset_j \cup \secondset_j)\\
&= n - \sum_{\agent_j \in \satagents} \valu_i(\firstset_j \cup \secondset_j)\\
&\geq n - (|\satagents| + 1/4)\\
&= |\cone| + |\ctwo| + |\cthree|-1/4
\end{split}
\end{equation}

According to Lemmas \ref{forc2c3} and \ref{forc2},  
\begin{equation}\label{eq5.1}
\sum_{\agent_j \in \cone} \valu_i(\firstset_j) < {1/2}|\cone|
\end{equation}
 and 
\begin{equation}\label{eq5.2}
\sum_{\agent_j \in \ctwo} \valu_i(\firstset_j)< {1/2} |\ctwo|
\end{equation}
hold. Inequalities \eqref{eq5}, \eqref{eq5.1}, and \eqref{eq5.2} together prove
\begin{equation}\label{eq6}
\begin{split}
\valu_i({\fitems}) &\geq |\cone| + |\ctwo| + |\cthree|-1/4 - \big[\sum_{\agent_j \in \cone} \valu_i(\firstset_j) + \sum_{\agent_j \in \ctwo} \valu_i(\firstset_j) + \sum_{\agent_j \in \cthree^s} \valu_i(\firstset_j)\big]\\
&\geq |\cone| + |\ctwo| + |\cthree|-1/4 - \big[1/2|\cone| + 1/2|\ctwo| + \sum_{\agent_j \in \cthree^s} \valu_i(\firstset_j)\big]\\
&\geq 1/2 |\cone| + 1/2 |\ctwo| + |\cthree| -1/4 - \sum_{\agent_j \in \cthree^s} \valu_i(\firstset_j).
\end{split}
\end{equation}
Now, we consider two cases separately: (i) $\agent_i \in \cthree^s$ and  (ii) $\agent_i \in \cthree^f$.


\textbf{In case $\agent_i \in \cthree^s$}, since $\agent_i$ is a winner of $\cthree^s$, we have 
\begin{equation}
\begin{split}
\sum_{\agent_j \in \cthree^s} \valu_i(\firstset_j) & \leq \sum_{\agent_j \in \cthree^s}  \valu_i(\firstset_i)\\
& = \sum_{\agent_j \in \cthree^s} 3/4 - \epsilon_i\\
& = ({3/4}-\epsilon_i) |\cthree^s|.
\end{split}
\end{equation}
This combined with Inequality \eqref{eq6} concludes
\begin{equation*}
\begin{split}
 \valu(\fitems) &\geq  1/2 |\cone| + 1/2 |\ctwo| + |\cthree| -1/4 - \sum_{\agent_j \in \cthree^s} \valu_i(\firstset_j)\\
 & \geq 1/2 |\cone| + 1/2 |\ctwo| + |\cthree| - 1/4 - ({3/4}-\epsilon_i) |\cthree^s|\\
 & \geq 1/2 |\cone| + 1/2 |\ctwo| + (1/4 + \epsilon) |\cthree| - 1/4.
\end{split}
\end{equation*}
On the other hand, since $\agent_i \in \cthree^s$, $|\cthree| \geq 1$ and hence, $\valu_i({\fitems}) \geq {1/4} + \epsilon_j - {1/4} = \epsilon_j$. This means that $\fitems$ is feasible for $\agent_i$, which contradicts the termination of the algorithm. 

\textbf{In case $\agent_i \in \cthree^f$}, by the definition of $\cthree^f$ we know that $\sum_{\agent_j \in \cthree^s} \valu_i(\firstset_j) < {1/2} |\cthree^s|$, which by Inequality \eqref{eq6} implies:

$$\valu_i({\fitems}) > {1/2}|\cthree^s| + |\cthree^b| + |\cthree^f| + {1/2}|\ctwo| + {1/2}|\cone|-1/4.$$

Since $\agent_i \in \cthree^f$, we have $|\cthree^f| \geq 1$ and hence, $\valu_i({\fitems}) > 3/4$. Again, this contradicts the termination of the algorithm since $\fitems$ is feasible for $\agent_i$.  
\end{proof}

