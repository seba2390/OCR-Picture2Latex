\section{Introduction}
Distributed graph representation is concerned with augmenting each vertex (and possibly also edges) with useful and low-space information in order to efficiently address various graph queries in a distributed manner. As the
vertices and edges of the network may occasionally fail or malfunction, it is desirable
to make these representations robust against failures. In this paper, we provide new constructions of succinct \emph{labeled-based distributed data structures} that can handle connectivity, distance queries and routing in the presence of edge failures. 

Connectivity labels are short names attached to each vertex in the $n$-vertex input graph $G$, such that given the labels of a pair of vertices $s$ and $t$ (and no any other information), it is possible to deduce if $s$ and $t$ are connected in $G$. The primary complexity measure of the  labeling scheme is the label length (maximum length of a label). In general, labels can be viewed as the \emph{logical} names of the vertices \cite{kannan1992implicat,peleg2005informative}, as they are considerably more informative than the physical names that usually correspond to arbitrary $O(\log n)$-bit identifiers. For example, in routing applications the label of the vertex is treated as its ``address". It is quite immediate to provide connectivity labeling schemes of logarithmic length. Over the years, these labels have served the basis for devising also approximate distance labels, and compact routing schemes, which are arguably the \emph{grand finale} of the distributed representation schemes. 
%Roughly speaking, in the routing setting, the labels of the vertices are used to compute the next hop neighbor on some (possibly approximate) shortest path towards the target.


Our goal in this paper is to provide \emph{fault-tolerant} analogs for the above mentioned schemes, while paying a small overhead in terms of space and other complexity aspects. Several notions of fault-tolerant labeling and routing schemes have been addressed in the literature; starting with the earlier introduction of FT routing schemes by Dolev \cite{dolev1984new}, to the more recent formulations of forbidden-set labeling and routing schemes by Courcelle et al. \cite{courcelle2007forbidden,CourcelleT07}. Despite much activity revolving these topics, FT labeling and routing schemes with \emph{sub-linear} space are currently known only for a limited collection of graph families. We next elaborate more on the state-of-the-art affairs, and our main objectives.
%
%
%Specifically, we focus on three concrete distributed representations in the FT setting: connectivity labels, approximate distance labels and routing schemes. We next elaborate on each of these settings. 


\paragraph{Fault-Tolerant Connectivity and Distance Labeling.} 
FT connectivity labeling schemes, also known in the literature as \emph{forbidden-set} labeling \cite{CourcelleT07}, assign labels to the vertices and the edges of the graph such that given the labels of a vertex pair $s,t$, and the labels of the faulty edges $F$, one can determine if $s$ and $t$ are connected in $G \setminus F$. 
%\mtext{Several notions of fault-tolerant labeling and routing schemes have been addressed in the literature; starting with the earlier introduction of FT routing schemes by Dolev \cite{dolev1984new}, to the more recent formulations of forbidden-set labeling and routing schemes by Courcelle et al. \cite{courcelle2007forbidden,CourcelleT07}. Despite much activity revolving these topics, FT labeling and routing schemes with \emph{sub-linear} space are currently known only for a limited collection of graph families. We next elaborate more on the state-of-the-art affairs, and our main objectives.} \mtodo{the text I marked seems less related here, because it talks in general about FT labeling and routing, and not specifically on connectivity labels, so I think it would fit better before this paragraph. Also, we already said above that "we next elaborate on the topic", hence the last sentence seems repetitive.} %\mtodo{the discussion of related work in the next few pages is quite long. We can consider to have a shorter intro, mainly defining the main problems addressed, and have later a detailed related work section.}

 %including graphs with bounded treewidth, bounded dimension and planar graphs.
%As labeling scheme serves a natural basis for routing schemes, our knowledge the latter is also limited. Specifically, the current FT routing schemes still suffer from suboptimal space vs. stretch tradeoff, using routing tables of possibly super-linear size.

%
%
 %
%To perform also routing in the presence of faults, the FT-connectivity labels should be extended to report also approximate distances, as well as to output the next hop neighbor on the approximate shortest path towards the target. In the standard (fault-free) setting, connectivity labeling scheme with $O(\log n)$ label lengths, are by now a folklore. These labels serve the basis for providing approximate distance labeling, and eventually also compact routing schemes. Since the communication networks are operated in a distributed manner which are subject to local faulty events, it is desirable to devise compact fault-tolerant labeling and routing schemes. Fault-tolerant labeling (and routing) have been studied in the literature under several different terminologies (e.g., forbidden-set labeling, sensitive labeling etc.). Yet to this date, efficient constructions are only known for a limited collection of graph families such as graphs with bounded treewidth, bounded dimension and planar graphs. The problem of devising efficient FT schemes for general graphs (e.g., FT-connectivity labels of \emph{sub-linear} label length) has remains fairly open since the introduction of the FT routing setting by Dolev \cite{dolev1984new}. 

%FT labels for connectivity were introduced by \cite{courcelle2007forbidden}. %\mtext{under the term \emph{forbidden-set labeling}. Forbidden set refers to a subset $F$ of at most $f$ edges, such that given the labels of $s,t$ and $F$ one should determine if $s$ and $t$ are connected in $G \setminus F$. The forbidden edge set can be treated in this context as faulty edges\footnote{For routing, the forbidden-set scheme is slightly weaker than FT scheme as explained later.}.} \mtodo{not sure that this is the best place for discussing the forbidden-set name, maybe it can fit better in a related work section.} 
Since their introduction, efficient FT labeling schemes have been devised only for a restricted collection of graph families such as graphs with bounded tree-width and planar graphs \cite{CourcelleT07,AbrahamCGP16}. In the lack of any FT connectivity labeling schemes for general graphs with sub-linear label length (for any $f\geq 2$ faults\footnote{While there is no \emph{explicit} construction of FT labeling for general graphs, for $f=1$, the centralized distance sensitivity oracle of \cite{khanna2010approximate} might be modified to provide approximate distance labels against a single fault.}), we ask:

\begin{question}\label{q:label}
Is it possible to design FT connectivity labeling scheme resilient to at most $f$ edge faults, for general graphs with label length of $\poly(\log n)$ bits, or even $\poly(\log n,f)$ bits? 
\end{question}

%\mtodo{The next pargarph is a bit long, we can consider shortning it, and move the more detailed discussion to a related work section. Maybe just focus on the centralized data structures here and not on the certificates?} \mertodo{Yes, I agree, modifying accordingly.} 
%It is noteworthy that the key challenge in our setting is in the \emph{distributed} aspect of the problem, i.e., in \emph{distributively} compressing the graph information to report connectivity queries under any sequence of $f$ faults. For example, in the related sub-graph problem known as \emph{connectivity certificates}, it is known that one can efficiently compute a subgraph $H$ of $O(f n)$ edges that preserves the pairwise connectivity relations under $f$ edge faults \cite{cheriyan1993scan,thurimella1997sub}. This implies that in order to address the collection of all possible $\langle s, t, F \rangle$ connectivity queries (i.e., deciding if $s$ and $t$ are connected in $G \setminus F$), it is sufficient to store only $O(f n\log n)$ bits of information (i.e., storing the edges of the connectivity certificate). 
%These subgraphs can also be computed efficiently in the distributed CONGEST model \cite{Dory18,parter2019small}. 
%but it is unclear how to distribute the information of the $O(f n)$-bit graph information, say roughly ``evenly" among the vertices and the edges, so that FT-connectivity queries can handled efficiently. 
FT connectivity labels are also closely related to \emph{connectivity sensitivity oracles} \cite{patrascu2007planning}, which are low-space centralized data-structures that handle efficiently $\langle s, t, F \rangle$ connectivity queries using $S(n)$ space. Our main goal is in providing a \emph{distributed} variant of such constructions, e.g., where each vertex or edge in the graph ``holds" only $S(n)/n$ bits of information, such that an $\langle s,t, F \rangle$ query can be addressed using only the information stored by $s,t$ and $F$. 

%\paragraph{Fault-Tolerant Approximate Distance Labeling.} 
An important step towards designing FT compact routing schemes involves the computation of \emph{FT approximate distance labels}. In this setting, given the labels of $s,t$ and the faulty edges $F$, it is required to report an approximation for the $s$-$t$ shortest path distance in $G \setminus F$. %\mtodo{Also the part that starts here may fit better in a related work section (in this case, we will probably need to remove also the question from here - seems that one of the reviwers supported removing the questions in any case).} 
FT approximate distance labels can be viewed as the distributed analog of $f$-FT \emph{distance sensitivity oracles} \cite{khanna2010approximate,WeimannY10}. 
These are global succinct data-structures that given an $\langle s,t,F \rangle$ query report fast an estimate for the approximate $s$-$t$ distance in $G \setminus F$. Our goal is to provide FT approximate labeling schemes that match the state-of-the-art space vs. stretch tradeoff of the centralized data structures. %We therefore ask: 

%\mtodo{I'm not sure if we want to refer here and in the question to \cite{chechik2012f} as we didn't discuss it. Maybe just say that we want to get something similar to the state-of-the-art. Also, I'm not sure if we need here an explicit question, it repeats the text in the last line, and it seems to me that our main results are the connectivity labels and routing, so maybe it's ok to focus only on two questions in the intro?}
%
%\begin{question}\label{q:dist-label}
%Is it possible to design FT approximate distance labels with space vs. stretch tradeoff that match the state-of-the-art bounds of the \emph{centralized} sensitive oracles, e.g., of \cite{chechik2012f}?
%\end{question}

%\textbf{MP: While the main focus of this paper is in approximate distances, sensitivity oracles that report (possibly near) exact distances under faults have been studied also thoroughly in e.g., \cite{demetrescu2002oracles,bernstein2008improved,duan2009dual,WeimannY10,GrandoniW12,ChechikCFK17,van2019sensitive}. Since reporting exact distances requires linear label length already in the fault-free setting \cite{gavoille2004distance}, we focus on the approximate relaxation, where there is still hope to obtain labels of polylogarithmic length.}
%\mtodo{Same comment for this paragraph. Also, there is a recent paper about FT exact distance labels in planar graphs \cite{DBLP:journals/corr/abs-2102-07154} that we should probably mention, they show that any directed weighted planar
%graph admits fault-tolerant distance labels of size $O(n^{2/3})$. There are also some references cited in their paper that maybe we should discuss as well, for example see the paragraph ``Forbidden-set distance labeling schemes'' in page 2 here: https://arxiv.org/pdf/2102.07154.pdf} \mertodo{I actually preferred not open up the discussion on special graph families, e.g., planar graphs, graphs with bounded dimension, etc. We do mention it for the direct setting of routing or labeling, but I do not think it should be mentioned for oracles for the following reason. For labels, there was no prior work for general graphs, but for oracles we do have such works so no need to add the extra overhead of special graph families.} 

\paragraph{Fault-Tolerant Routing.} A desirable requirement in most communication networks is to provide efficient routing protocols in the presence of faults. Specifically, an $f$-FT routing protocol is a distributed algorithm that, for any set of at most $f$ faulty edges $F$, allows a vertex $s$ to route a message to a destination vertex $t$ along an approximate $s$-$t$ shortest path in $G \setminus F$ (without knowing $F$ in advance). The routing scheme consists of two algorithms: (i) a preprocessing algorithm which computes (succinct) routing tables and labels for each vertex in the graph; and (ii) a routing algorithm that given the received message and the routing table of vertex $v$ determines the next-hop (specified as a port number) on the $v$-$t$ (approximate) shortest path in $G \setminus F$. The efficiency of the scheme is determined by the tradeoff between the \emph{stretch} (i.e., the ratio between the weighted length of the $s$-$t$ route in $G\setminus F$ to the corresponding shortest path distance) and the \emph{space} of the routing tables, labels and messages. 
%
%
%
%\begin{enumerate}[noitemsep]
%\item the \emph{stretch} of the route, i.e., the ratio between the length of the route to the $s$-$t$ distance in $G \setminus F$. 
%\item the \emph{space} of the routing tables, routing labels and messages. 
%\end{enumerate}
While the stretch vs. space tradeoff of routing schemes is fully understood in the non-faulty setting, the corresponding bounds in the FT setting are still far from optimal. %In competitive FT routing schemes, it is required to provide $s$-$t$ routes of length that competes with the shortest $s$-$t$ path in $G \setminus F$, even in cases where $G \setminus F$ is not connected. %\mtodo{Also the part that starts here can fit better in a related work section. Also, a reviwer suggested to discuss also \cite{rajan2012space}. It seems that this work appeard after Chechik et al., and focus on the case of a single edge failure. They show (Theorem 1) a routing scheme with routing tables of size $\widetilde{O}(k \deg(v)+ n^{1/k})$ size per vertex, $O(k^2)$ stretch and $O(k+\log{n})$ size header that handle a failure of one edge.} \remove{\textbf{MP: The first formalization of FT routing schemes was given by the influential works of Dolev \cite{dolev1984new} and Peleg \cite{peleg1987fault}. These earlier works presented the first non-trivial solutions for general graphs supporting at most $\lambda$ faulty edges, where $\lambda$ is the edge-connectivity of the graph. Their routing labels had linear size, providing $s$-$t$ routes of possibly linear length (even in cases where the surviving $s$-$t$ path is of $O(1)$ length). In competitive FT routing schemes, it is required to provide $s$-$t$ routes of length that competes with the shortest $s$-$t$ path in $G \setminus F$, even in cases where $G \setminus F$ is not connected. Competitive FT routing schemes \cite{peleg2009good} for general graphs were given by Chechik et al. \cite{ChechikLPR10,chechik2012f} for the special case of $f\leq 2$ faults. 
%Specifically, for a given stretch parameter $k$, they gave a routing scheme with a total space bound of $\widetilde{O}(n^{1+1/k})$ bits, polylogarithmic-size labels and messages, and a routing \emph{stretch} of $O(k)$. 
%This scheme was extended later on for any $f$ by Chechik \cite{chechik2011fault}, at the cost of increasing the routing stretch to $O(f^2(f+\log^2 n)k)$.}}
So far, in all the prior schemes, the space of the individual routing tables could be linear in the worst case, even when allowing a large stretch bound. This is in strike contrast to the standard (non-faulty) compact routing schemes, e.g., by Thorup and Zwick \cite{thorup2001compact}, which provide each vertex a table of $\widetilde{O}(n^{1/k})$ bits, while guaranteeing a route stretch of $2k-1$. The current large gap in the quality of FT routing schemes compared to their non-faulty counterparts leads to the following question.

\begin{question}\label{q:route}
Is it possible to design $f$-fault-tolerant compact routing scheme for general graphs with \emph{sub-linear} table size and with a sub-logarithmic stretch?
\end{question}

%\textbf{MP: A more relaxed setting of FT routing scheme which has been studied in the literature is given by the \emph{forbidden set routing schemes}, introduced by Courcelle and Twigg \cite{CourcelleT07}. In that setting, it is assumed that the routing protocol knows in advance the set of faulty edges $F$. In contrast, in the FT routing setting, the failing edges are a-priori unknown to the routing algorithm,  and can only be detected upon arriving one of their endpoints. Forbidden set routing schemes have been devised to the same class of restricted graph families as obtained for the forbidden set labeling setting \cite{CourcelleT07,AbrahamCGP16,abraham2012fully}.}

%In contrast, in the forbidden-set setting the faulty edges are known at the beginning of the routing procedure. Similarly to forbidden-set labeling, forbidden set routing schemes have also been provided for special graph families, including graphs with bounded tree-width and clique-wideth \cite{CourcelleT07}, bounded doubling dimension \cite{AbrahamCGP16}, and planar graphs \cite{abraham2012fully}.


\input{result.tex}


