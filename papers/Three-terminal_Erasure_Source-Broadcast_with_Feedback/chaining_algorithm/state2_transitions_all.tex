\input{chaining_algorithm/fig/state2_table_all}

\begin{LaTeXdescription}
	\item [State~2]  We enumerate all outgoing transitions from State~2 based on all possible channel conditions in Table~\ref{tab:state2_transitions_all}.  We remind the reader that State~2 is characterized by user~$i$ having already started the chain-building process and the transmitter having just replaced the symbol intended for user~$j$ in the linear combination being sent.  Therefore, the symbol intended for user~$k$ is the common symbol between $\chainsetarg{t-1}$ and $\xsett$ in the precondition of Table~\ref{tab:table_of_states}.  
	We now go over the possible transitions based on whether this new linear combination was received by any of the receivers.
	\begin{enumerate}
		\item $\zall = (0, 0, 0)$.  This case is analogous to its counterpart in State~1.  The subsequent state is again State~5, the non-decoding absorbing state, since user~$i$ has has one less equation required to decode the number of unknown variables in the chain.  The transition to the subsequent state and the rewards allocated are identical for when $\zall = (0,0,0)$ in State~1.  
		\item $\zall = (0, 0, 1)$. This case is analogous to its counterpart in State~1.  
		\item $\zall = (0, 1, 0)$. This case is analogous to its counterpart in State~1.  
		\item $\zall = (0, 1, 1)$. This case is analogous to its counterpart in State~1.  
		\item $\zall = (1, 0, 0)$.  This case is similar to its counterpart in State~1 with one minor but important difference due to the fact that the chain-building process has already begun.  Recall that in this case, we have that both symbols in the previous linear combination sent will have to be replaced in the next timeslot.  However, instead of placing both these symbols in $Q_i$, we should place one of them in $\Qstar$, since it can be used to decode an entire chain of symbols.  We therefore set $\rhoqstar = \rhoqi = 1$.
		\item $\zall = (1, 0, 1)$.  This case is analogous to its counterpart in State~1, however since the chain-building process has begun, we transition to State~2 again in the next timeslot.
		\item $\zall = (1, 1, 0)$.  This case is in direct contrast from its counterpart in State~1.  Recall from the beginning of the description for State~2 that the symbol intended for user~$k$ is the symbol in common between $\chainsetarg{t-1}$ and $\xsett$.  Furthermore, given that $\zall = (1, 1, 0)$, user~$k$ has now received this symbol and so we must replace it in the next timeslot.  However, doing so would not allow us to continue building the current chain because there will be no symbols in common between  $\chainsetarg{t}$ and $\xsetarg{t+1}$.  Therefore, we transition to the non-decoding absorbing state in the next timeslot and  
%		Consider the two symbols involved in the linear combination just sent.  
%We 
place the symbol that was intended for user~$k$ in $\Qstar$.
%and the symbol intended for user~$j$ in $Q_i$ and 
%set $\rhoqi = \rhoqstar = 1$.
		\item $\zall = (1, 1, 1)$.  This case is analogous to its counterpart in State~1, except we transition back to State~2 in the next timeslot.
	\end{enumerate}
\end{LaTeXdescription}


\begin{LaTeXdescription}
	\item [State~3]  For brevity, we omit the details for State~3 and simply state that it is analogous to the discussion we have just given for State~2 with the roles of users~$j$ and~$k$ reversed.
\end{LaTeXdescription}