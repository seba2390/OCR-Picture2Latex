\section{Analysis}
\label{sec:analysis}

In this section, we analyze the coding scheme proposed in Section~\ref{subsec:instantly_decodable}, and the chaining algorithm of Section~\ref{subsubsec:chaining_algorithm}.
%In particular, we show that the solution of a linear programming problem characterizes the number of instantly decodable, distortion-innovative symbols that can be sent by Algorithm~\ref{alg:three_users}.  
For the analysis of the coding scheme in Section~\ref{subsec:instantly_decodable}, we show in Section~\ref{subsec:analysis_instantly_decodable} that the solution of a linear program characterizes the number of instantly decodable, distortion-innovative symbols that can be sent by the algorithm in Section~\ref{subsec:instantly_decodable}.
We furthermore give sufficient conditions for which all users can be point-to-point optimal.  In some cases, we find that users can be point-to-point optimal regardless of their distortion constraints.  Following this, in Section~\ref{subsec:chaining_algorithm_analysis} we analyze the chaining algorithm and give a sufficient condition for point-to-point optimal performance.

\subsection{Analysis of Coding Scheme of Section~\ref{subsec:instantly_decodable}}
\label{subsec:analysis_instantly_decodable}

Our analysis begins by first considering the systematic phase of our coding, which transmits the $N$ source symbols so that each symbol is recovered by at least one user.  Let $T_0$ be a random variable representing the number of transmissions required for this after being normalized by $N$.  In other words, $T_0$ will be said to be the \emph{latency} required.  Then it is clear that $T_0$ has expected value $\bar{T_0}$ given by
%
\begin{equation}
\label{eq:T0}
	\bar{T}_{0} = \frac{1}{1 - \epsilon_1\epsilon_2\epsilon_3}.
\end{equation}

During the systematic transmissions, we direct erased symbols to their appropriate queues as outlined in the algorithm of Section~\ref{subsec:instantly_decodable}.  Then, when the $NT_0$ transmissions are completed, we start sending linear combinations of the form $q_i \oplus q_{j,k}$, where $q_i \in Q_i, q_{j,k} \in \Q{j,k}$.
and $i,j,k\in \mathcal{U}$  are unique.

Let $T_i$ be a random variable representing the normalized number of transmissions we can send of the form $q_i \oplus q_{j,k}$.  We are able to do this so long as $Q_i$ and \Q{j,k} are non-empty.  Thus, we must bound the cardinality of these queues.  For \Q{j,k}, we have that a symbol is added during the systematic transmissions whenever user~$i$ receives a symbol that is erased at users~$j$ and~$k$.  Symbols are no longer added to this queue after the systematic transmissions, and so we have that $\Q{j,k}^{+}$, the  expected maximum normalized cardinality of \Q{j,k}, is given by
%
\begin{equation}
\label{eq:Qjk}
	\Q{j,k}^{+} = \bar{T}_0(1 - \epsilon_i)\epsilon_j\epsilon_k.
\end{equation}
%
Now, a symbol is removed from \Q{j,k} whenever user~$j$ or user~$k$ receives a linear combination involving one of its elements.  Thus,  \bT{i}, the expected value of $T_i$, is bounded as
%
\begin{equation}
\label{eq:Ti_Qjk}
	\bar{T}_i \leq \frac{\Q{j,k}^{+}}{1 - \epsilon_j\epsilon_k}.
\end{equation}

Inequality~\eqref{eq:Ti_Qjk} bounds \bT{i} relative to the size of \Q{j,k}.  We must also bound \bT{i} in terms of the cardinality of $Q_i$, since transmissions must stop if $Q_i$ is empty.  This bounding is not as straightforward, however, as symbols are added and removed from $Q_i$ as the algorithm progresses.  For example, $Q_1$ may be empty at a certain time, but later replenished when we send linear combinations of the form $q_2 \oplus q_{1,3}$.  In particular, when this linear combination is received by user~3 and not user~1, we add $q_{1,3}$ to $Q_1$ as user~1 is now the only user in need of it. If $N\bar{T}_2$ linear combinations of this form are sent, we can expect that $N\bar{T}_2\epsilon_1(1 - \epsilon_3)$ symbols are added to $Q_1$.  In general, after $N\bT{j}$ and $N\bT{k}$ linear combinations are sent from $Q_j$, \Q{i,k} and $Q_k$, \Q{i,j} respectively, we can expect that $N\bar{T}_j\epsilon_i(1 - \epsilon_k) + N\bar{T}_k\epsilon_i(1 - \epsilon_j)$ symbols are added to $Q_i$.  Given that $Q_i$ initially has $N\bar{T}_0\epsilon_i(1 - \epsilon_j)(1 - \epsilon_k)$ symbols after $N\bar{T}_0$ uncoded transmissions, we have then that the expected maximum normalized cardinality of $Q_i$ is given by \Qp{i}{\bT{j}}{\bT{k}}  where
%
\begin{equation}
\label{eq:Qi_plus}
	\Qp{i}{\bT{j}}{\bT{k}} = \bar{T}_0\epsilon_i(1 - \epsilon_j)(1 - \epsilon_k) + \bT{j}\epsilon_i(1 - \epsilon_k) + \bT{k}\epsilon_i(1 - \epsilon_j).
\end{equation}
%
Since a symbol is removed from $Q_i$ each time user~$i$ successfully receives a channel symbol, we can also write that
%
\begin{equation}
\label{eq:Ti_Qi}
	\bT{i} \leq \frac{\Qp{i}{\bT{j}}{\bT{k}} }{1 - \epsilon_i}.
\end{equation}

Notice that by the definition of our stopping condition, \bT{i} must actually meet \eqref{eq:Ti_Qjk} or \eqref{eq:Ti_Qi} with equality, since otherwise $Q_i$ and \Q{j,k} would still be non-empty, and we would not have reached the stopping condition.  So we in fact must have that for all $i \in \mathcal{U}$ with $j,k \in \mathcal{U}\setminus \{i\} \ s.t. \ j \neq k$,
%
\begin{equation}
\label{eq:Ti_min}
	\bT{i} = \min\left(\frac{\Qp{i}{\bT{j}}{\bT{k}} }{1 - \epsilon_i}, \frac{\Q{j,k}^{+}}{1 - \epsilon_j\epsilon_k} \right),
\end{equation}
where $\bT{i} > 0$.
%\color{red}
The following theorem proposes that the solution to \eqref{eq:Ti_min} is unique and can be characterized by solving the linear program 
%We show the existence of a solution to \eqref{eq:Ti_min} by considering the linear program

\begin{equation}
\label{eq:LP}
\begin{aligned}
	& \underset{\bT{1}, \bT{2}, \bT{3}}{\text{max}}
	&& \!\! \bT{1} + \bT{2} + \bT{3}\\
	& \text{subject to}
%\end{aligned}
%\end{equation}
%\[
%\begin{aligned}
	&& 	\!\! \bT{i} \leq \frac{\Qp{i}{\bT{j}}{\bT{k}} }{1 - \epsilon_i},\\
	&&& \!\!\bar{T}_i \leq \frac{\Q{j,k}^{+}}{1 - \epsilon_j\epsilon_k} \quad \forall i \in \mathcal{U}, j,k \in \mathcal{U}\setminus \{i\}, j \neq k.
\end{aligned}
%\]
\end{equation}
%
\begin{theorem}
\label{thm:LP_instantly_decodable}
	Let $\bT{i}$ be the expected value of the normalized number of analog transmissions that can be sent of the form $q_i \oplus q_{j,k}$, where $i \in \mathcal{U}, j,k \in \mathcal{U}\setminus\{i\}, j\neq k$.  Then $\bT{i}$ is uniquely given by the solution of~\eqref{eq:LP}.
\end{theorem}
\begin{proof}
We proceed toward this end by establishing several lemmas in the appendix in the accompanying supplemental material of this paper and which is also available in the extended version of this paper~\cite{TMK_feedback3_arxiv}.
%that collectively show that the only $(\bT{1}, \bT{2}, \bT{3})$ satisfying~\eqref{eq:Ti_min} is the unique optimal solution of~\eqref{eq:LP}.  
Lemma~\ifarxiv\ref{lem:LPToMin}\else\lemOPSatisfiesCond{}\fi~\cite{TMK_feedback3_arxiv} first establishes that any optimal solution to~\eqref{eq:LP} also satisfies~\eqref{eq:Ti_min}.  As $\bT{1} = \bT{2} = \bT{3} = 0$ is clearly a feasible solution of~\eqref{eq:LP}, we have that the feasible set of~\eqref{eq:LP} is non-empty.  Therefore, such a solution of~\eqref{eq:LP}, and by extension~\eqref{eq:Ti_min}, indeed exists.  
%
Conversely, Lemma~\ifarxiv\ref{lem:MinToLP}\else\lemCondSatisfiesOP{}\fi~\cite{TMK_feedback3_arxiv} establishes that any $(\bT{1}, \bT{2}, \bT{3})$ that satisfies~\eqref{eq:Ti_min} is also an optimal solution to~\eqref{eq:LP}.  
%Furthermore, we know that 
%Such a solution to~\eqref{eq:LP} exists since %the feasible set of~\eqref{eq:LP} 
%we use the fact that a solution to~\eqref{eq:LP} must exist since 
%
%We first notice that 
%the feasible set of this linear program is non-empty as $\bT{1} = \bT{2} = \bT{3} = 0$ is clearly feasible.  
%As $\bT{1} = \bT{2} = \bT{3} = 0$ is clearly a feasible solution of~\eqref{eq:LP}, we have that the feasible set of~\eqref{eq:LP} is non-empty.  Therefore, such a solution of~\eqref{eq:LP}, and by extension~\eqref{eq:Ti_min}, indeed exists.  
Finally, Lemma~\ifarxiv\ref{lem:unique}\else\lemOPunique{}\fi~\cite{TMK_feedback3_arxiv} then shows that the optimal solution for~\eqref{eq:LP} is unique.  We conclude that any $(\bT{1}, \bT{2}, \bT{3})$ satisfying~\eqref{eq:Ti_min} is itself unique and characterized by~\eqref{eq:LP}.
%Combining Lemmas~\ref{lem:LPToMin}, \ref{lem:MinToLP} and~\ref{lem:unique}, we therefore conclude that the solution to~\eqref{eq:LP} uniquely characterizes the number of 
%instantly-decodable, distortion-innovative transmissions that can be sent, which is suggested by~\eqref{eq:Ti_min}.
%Combining Lemmas~\ref{lem:LPToMin}, \ref{lem:MinToLP} and~\ref{lem:unique}, we therefore conclude that the only solution to~\eqref{eq:Ti_min} is the unique optimal solution of~\eqref{eq:LP}.  
\end{proof}
%\color{black}
Now, let $\bar{T}^{*} = (\bTs{1}, \bTs{2}, \bTs{3})$ be the optimal solution of~\eqref{eq:LP}, %for some scheduler, 
and let %let $t^{*}$ be given as
\begin{equation}
\label{eq:t_star}
	t^{*} = \bT{0} + \bTs{1} + \bTs{2} + \bTs{3},
\end{equation}  
%
where $\bar{T}_{0}$ is given by~\eqref{eq:T0}.
It is important to determine $t^{*}$ since it provides a lower bound for the number of instantly decodable, distortion-innovative transmissions possible.  From the discussion at the beginning of Section~\ref{sec:three_users}, we know that for any latency $w \leq t^{*}$, we can meet the point-to-point outer bound at $w$.  Say that user~$i$'s distortion, $d_i$, necessitates a minimum latency of $w_i(d_i)$ where

\begin{equation}
\label{eq:wioptimal}
	w_i(d_i) = \frac{1 - d_i}{1 - \epsilon_i}.
\end{equation}
Let
%
%\[
%w^{-}\dvec = \min_{i \in \mathcal{U}}  w_i (d_i)\quad
%w^{+}\dvec = \max_{i \in \mathcal{U}} w_i(d_i)
%\]
\begin{eqnarray}
\label{eq:w_minus}
%	w^{-} &=& \min_i  \frac{1 - d_i}{1 - \epsilon_i} \\
	w^{-}\dvec &=& \min_{i \in \mathcal{U}}  w_i (d_i)\\
\label{eq:w_plus}
	w^{+}\dvec &=& \max_{i \in \mathcal{U}} w_i(d_i).
%	w^{+} &=& \max_i \frac{1 - d_i}{1 - \epsilon_i}.
%		w^{-} &=& \min_i  \frac{(1 - d_i)}{(1 - \epsilon_i)}\\
%		w^{+} &=& \max_i \frac{(1 - d_i)}{(1 - \epsilon_i)}\\
\end{eqnarray}
%
It is clear then that $w^{+}$ is an outer bound for our problem, and if $w^{+} \leq t^{*}$, we are optimal for all users.  Notice however, that if $w^{-} \leq t^{*}$, we can also be optimal for all users.  This is because if $w^{-} \leq t^{*}$, one user can be fully satisfied at latency $w^{-}$, and so from thereon, we are left with only two users.  From~\cite{TMKS_TIT20} and the discussion in Section~\ref{subsec:instantly_decodable}, we know that we can remain optimal for the remaining two users, which leads us to the following theorem.

\begin{theorem}
\label{thm:w_minus}
	Given $\dvec \in \mathcal{D}^{3}$, let $t^{*}, w^{-}\dvec$ and $w^{+}\dvec$ be given by~\eqref{eq:t_star}, \eqref{eq:w_minus} and~\eqref{eq:w_plus} respectively.  Then if $w^{-}\dvec \leq t^{*}$, the latency $w^{+}\dvec$ is $(d_1, d_2, d_3)$-achievable.
%	\begin{eqnarray}
%		w^{-} &=& \min_i  \frac{1 - d_i}{1 - \epsilon_i} \\
%		w^{+} &=& \max_i \frac{1 - d_i}{1 - \epsilon_i}
%%		w^{-} &=& \min_i  \frac{(1 - d_i)}{(1 - \epsilon_i)}\\
%%		w^{+} &=& \max_i \frac{(1 - d_i)}{(1 - \epsilon_i)}\\
%	\end{eqnarray}
\end{theorem}
%
%Theorem~\ref{thm:w_minus} states that having $w^{-} \leq t^{*}$ is sufficient for point-to-point optimality.  
If $w^{-} > t^{*}$,  it may still be possible to achieve optimality.  In particular, this may happen if after $Nt^{*}$ transmissions have completed, we are left with non-empty queues $Q_i, i\in \mathcal{U}$. %$Q_1$, $Q_2$ and $Q_3$.  
%For $i \in \mathcal{U}$, 
We can calculate the expected normalized cardinality of $Q_i$ after $t^{*}$ transmissions, denoted as $| Q_i(t^{*}) |$, by noting that in $NT_i^{*}$ transmissions, a symbol is removed from $Q_i$ with probability $(1 - \epsilon_i)$, and so
%
\begin{equation}
\label{eq:Q_t_star}
	| Q_i(t^{*}) | = \Qp{i}{\bT{j}^{*}}{\bT{k}^{*}} - \bar{T}_i^{*}(1 - \epsilon_i),
%	| Q_i(t^{*}) | = \frac{\Qp{i}{\bT{j}^{*}}{\bT{k}^{*}} - (t^{*} - \bar{T}_0)(1 - \epsilon_i)}{N},
\end{equation}
%
where \Qp{i}{\bT{i}}{\bT{j}} is given by~\eqref{eq:Qi_plus}.
If $| Q_i(t^{*}) |$ is non-zero for all $i \in \mathcal{U}$, we can continue sending linear combinations of the form $q_1 \oplus q_2 \oplus q_3$ until a user's distortion constraint is met or one of the queues $Q_i$ is exhausted.  If the latter were to happen, we have that user~$i$ has actually reconstructed every source symbol since all queues $Q_U, U \subset \mathcal{U} \ s.t.\ i \in U$ are empty.  Therefore, we are again left with the situation in~\cite{TMKS_TIT20} involving only two users. We conclude that we can send instantly decodable, distortion-innovative symbols until \emph{all} users achieve lossless reconstructions.

\begin{theorem}
\label{thm:all}
	Let $Q^{-} = \min_{i \in \mathcal{U}} |Q_i(t^{*})|$, where $|Q_i(t^{*})|$ is given by~\eqref{eq:Q_t_star}.  If $Q^{-} > 0$, then for \textbf{any} $\dvec \in \mathcal{D}^{3}$, the latency $w^{+}\dvec$ is $(d_1, d_2, d_3)$-achievable.
\end{theorem}

\input{analysis/chaining_algorithm_analysis}