%%%%%%%%%%%% OLD PREAMBLE %%%%%%%%%%%%%%%%%

% Author: Animesh Garg
% Date : July 2015
% This is a list of common packages needed in a wide range of latex docs for everyday writing.
% ---------------------------------
%floats and figures
% ---------------------------------
\usepackage{graphics}
\usepackage{bbm}
\usepackage{dsfont}
\usepackage[pdftex]{graphicx}
\usepackage{wrapfig}
\DeclareGraphicsExtensions{.pdf,.png,.jpg}
%\pdfimageresolution200
\usepackage{epsfig}
\usepackage[font={small}]{caption}
\usepackage{subcaption}
%DONT USE BOTH SUBCAPTION AND SUBFIGURE
%\usepackage[center]{subfigure} 
% \usepackage{overpic}
\usepackage[rightcaption]{sidecap}
\usepackage{pbox}

\usepackage{bigstrut}
\setlength\bigstrutjot{3pt}

% ---------------------------------
%Math Stuff
% ---------------------------------
\usepackage{mathtools}
\usepackage{amsmath, amssymb, amscd}
\usepackage{ wasysym } %special symbols
% \usepackage{amsfonts}
\usepackage{mathptmx} % selects Times Roman as basic font
\usepackage{gensymb} 
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
% \usepackage{mdwmath}
% \usepackage{mdwtab}
% \usepackage{eqparbox} %equations
% \usepackage{mathtools}
\numberwithin{equation}{section} 
\usepackage{dsfont}

% ---------------------------------
%Symbols
% ---------------------------------
\DeclareMathAlphabet{\mathcal}{OMS}{lmsy}{m}{n}
% \DeclareSymbolFont{largesymbols}{OMX}{cmex}{m}{n}
\usepackage{textcomp} %for getting text tilde
%\DeclareSymbolFont{bbold}{U}{bbold}{m}{n}
%\DeclareSymbolFontAlphabet{\mathbbold}{bbold}
%\usepackage{dsfont}

% ---------------------------------
%  Algorithms
% ---------------------------------
% http://tex.stackexchange.com/questions/229355/algorithm-algorithmic-algorithmicx-algorithm2e-algpseudocode-confused

% \usepackage{algorithm} %float wrapper for algorithms. %dont use with algorithm2e
% %should only use one of algorithmic or algorithmicx or algorithm2e
% % \usepackage{algorithmic} %least preferred
% % \usepackage[ruled,vlined,linesnumbered]{algorithm2e} 
% \usepackage{algorithmic} %algpseudocode:layout for algorithmicx

% \algtext*{EndFunction}% Remove "end while" text
% \algtext*{EndWhile}% Remove "end while" text
% \algtext*{EndIf}% Remove "end if" text


% ---------------------------------
%Table Stuff
% ---------------------------------
\usepackage{array} %for table entries to be in center of cell
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{multicol}
\usepackage{booktabs}
\usepackage{tabulary}

% ---------------------------------
%DOCUMENT WIDE
% ---------------------------------
% \usepackage[T1]{fontenc} 
\usepackage[utf8]{inputenc}
\usepackage[english]{babel} %for hyphenation rules
\usepackage{units}
% \usepackage{siunitx}
\usepackage{bm}
% \usepackage{times} % assumes new font selection scheme installed
\usepackage{xspace}
\usepackage{flushend}%balance columns on last page
\usepackage{balance} 
\usepackage{csquotes}
\usepackage{makeidx}
\usepackage{blindtext}

\let\labelindent\relax
\usepackage{enumitem}

% \usepackage{tikz}
% \usetikzlibrary{backgrounds}

\usepackage{ragged2e}
% \usepackage{fixltx2e} %fix latex issue across versions not needed in new latex versions
\usepackage{soul} %text highlighting
\usepackage{subfiles} %individual file compilation--makes it quick 

% \usepackage[protrusion=true,expansion=true]{microtype}
% \setlength{\emergencystretch}{3em}

% \usepackage[yyyymmdd]{datetime}
% \renewcommand{\dateseparator}{-}
% \date{\protect\formatdate{1}{1}{2001}}

% ---------------------------------
%Bibliography and cross-ref
% ---------------------------------
% The following lines are for IEEE style conflicts with natbibs
% \makeatletter
% \let\NAT@parse\undefined
% \makeatother
% \usepackage[numbers]{natbib}
% \usepackage{cite} %DONT USE NATBIB AND CITE TOGETHER

%hyperlinking
\usepackage{url}
\makeatletter
\g@addto@macro{\UrlBreaks}{\UrlOrds}
\makeatother
\usepackage{color}
\usepackage[usenames,dvipsnames,table,xcdraw]{xcolor}
\usepackage{pgfplots} %do not use with xcolor
\pgfplotsset{compat=newest}

%=======U S E R  D E F I N E D  M A C R O S=======
% ---------------------------------
% User Comments
% ---------------------------------
\usepackage{marginnote}
% \newcommand{\bibhref}[2]{#2}
\usepackage{soul} %text highlighting
\newcommand{\todohl}[1]{{[\hl{#1?}]}}

%\usepackage[disable]{todonotes}
% \usepackage{todonotes}
\usepackage[colorinlistoftodos]{todonotes}
% \newcommand{\todo}[1]{\textcolor{red}{[#1?]}}
%takes in optional argument
\newcommand{\tocite}[1]{%
\textcolor{red}{[cite:\ifthenelse{\equal{#1}{}}{}{#1}?]}
}

\newcommand{\ignore}[1]{}
\newcommand{\etal}{et al.~}

%version in control in draft mode
\newcommand{\versionString}{\textcolor{red}{draft-mode-[\today\ \currenttime]}}

% ---------------------------------
% Label utils
% ---------------------------------

% Usage:
% \figlabel{myfigure} creates \label{fig:myfigure}
% \figref{myfigure} references it
\newcommand{\figlabel}[1]{\label{fig:#1}}
\newcommand{\figref}[1]{Figure\,\ref{fig:#1}}

% Usage:
% \seclabel{mysection} creates \label{sec:mysection}
% \secref{mysection} references it
\newcommand{\seclabel}[1]{\label{sec:#1}}
\newcommand{\secref}[1]{Section\,\ref{sec:#1}}

\newcommand{\chlabel}[1]{\label{ch:#1}}
\newcommand{\chref}[1]{Chapter\,\ref{ch:#1}}

% Usage:
% \tablabel{mytable} creates \label{tab:mytable}
% \tabref{mytable} references it
\newcommand{\tablabel}[1]{\label{tab:#1}}
\newcommand{\tabref}[1]{Table~\ref{tab:#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% space tweaks 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setlength{\abovecaptionskip}{1mm}        
\setlength{\belowcaptionskip}{0mm}        
\setlength{\textfloatsep}{0mm}
\setlength{\dbltextfloatsep}{3mm}
\renewcommand{\baselinestretch}{1.0}

\makeatletter
\newenvironment{mcases}[1][l]
 {\let\@ifnextchar\new@ifnextchar
  \left\lbrace
  \def\arraystretch{1.2}%
  \array{@{}l@{\quad}#1@{}}}
 {\endarray\right.}
\makeatother

\usepackage[pdfborder={0 0 0.5}]{hyperref}
% \usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    citecolor=black,
    filecolor=cyan,
    urlcolor=black
}

\usepackage{algorithm}
\usepackage[noend]{algpseudocode}

\usepackage[switch]{lineno}