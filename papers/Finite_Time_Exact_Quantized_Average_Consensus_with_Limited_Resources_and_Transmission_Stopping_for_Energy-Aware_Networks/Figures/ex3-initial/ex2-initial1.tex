\documentclass{article}

\usepackage{multido}
\usepackage{amsfonts}
\usepackage{pstricks,pst-plot,pst-node,pst-tree,pstricks-add}


\pagestyle{empty}
\newpsobject{showgrid}{psgrid}{subgriddiv=1,griddots=10}
\begin{document}

%%\noindent 2 circles and a square
\begin{center}
\begin{pspicture}(0,0)(10,10)

\psset{arrows=->,arcangle=10,arrowsize=4pt 2,labelsep=2pt}

$
\psmatrix
\cnodeput[fillstyle=solid,fillcolor=lightgray](5.5,7.5){S6}{v_6}
\cnodeput[fillstyle=solid,fillcolor=lightgray](7,9){S7}{v_7}
\cnodeput[fillstyle=solid,fillcolor=lightgray](7,6){S8}{v_8}
\cnodeput[fillstyle=solid,fillcolor=lightgray](2.5,7.5){S3}{v_3}
\cnodeput[fillstyle=solid,fillcolor=lightgray](4,6){S5}{v_5}
\cnodeput[fillstyle=solid,fillcolor=lightgray](4,9){S4}{v_4}
\cnodeput[fillstyle=solid,fillcolor=lightgray](1,9){S1}{v_1}
\cnodeput[fillstyle=solid,fillcolor=lightgray](1,6){S2}{v_2}
\psset{nodesep=3pt}

\rput(1,9.5){x_1=3}
\rput(1,5.5){x_2=4}
\rput(2.5,6.6){x_3=0}
\rput(4,9.5){x_4=0}
\rput(4,5.5){x_5=0}
\rput(5.5,6.6){x_6=0}
\rput(7,9.5){x_7=-4}
\rput(7,5.5){x_8=-3}



%\nccircle[arrowsize=4pt 2, angle=90]{->}{S1}{4.5mm}^{1/3\ \ \ \  \   \   \ }
%\nccircle[arrowsize=4pt 2, angle=-90]{<-}{S2}{4.5mm}^{\ \ \ \ \ \ 1/3}
%\nccircle[arrowsize=4pt 2, angle=90]{->}{S3}{4.5mm}^{1/2 \ \ \ \ \ \ }
%\nccircle[arrowsize=4pt 2, angle=-90]{<-}{S4}{4.5mm}^{\ \ \ \ \ \ 1/2}
%\nccircle[arrowsize=4pt 2, angle=-180]{<-}{S5}{4.5mm}^{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1/3}



\ncarc[arcangle=0]{->}{S1}{S3}^{1}
\ncarc[arcangle=0]{->}{S2}{S3}^{1}
\ncarc[arcangle=0]{->}{S3}{S4}^{1}
\ncarc[arcangle=0]{->}{S3}{S5}^{1}
\ncarc[arcangle=0]{->}{S4}{S6}^{1}
\ncarc[arcangle=0]{->}{S5}{S6}^{1}
\ncarc[arcangle=0]{->}{S6}{S7}^{1}
\ncarc[arcangle=0]{->}{S6}{S8}^{1}



\endpsmatrix
$




\end{pspicture}
\end{center}

\end{document}
