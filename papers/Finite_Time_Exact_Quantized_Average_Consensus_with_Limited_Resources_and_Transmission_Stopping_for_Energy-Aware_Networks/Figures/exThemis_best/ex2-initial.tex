\documentclass{article}

\usepackage{multido}
\usepackage{amsfonts}
\usepackage{pstricks,pst-plot,pst-node,pst-tree,pstricks-add}


\pagestyle{empty}
\newpsobject{showgrid}{psgrid}{subgriddiv=1,griddots=10}
\begin{document}

%%\noindent 2 circles and a square
\begin{center}
\begin{pspicture}(0,0)(10,10)

\psset{arrows=->,arcangle=10,arrowsize=4pt 2,labelsep=2pt}

$
\psmatrix
\cnodeput[fillstyle=solid,fillcolor=lightgray](2,5){S6}{v_6}
\cnodeput[fillstyle=solid,fillcolor=lightgray](6,5){S7}{v_7}
\cnodeput[fillstyle=solid,fillcolor=lightgray](1,7){S3}{v_3}
\cnodeput[fillstyle=solid,fillcolor=lightgray](4,7){S5}{v_5}
\cnodeput[fillstyle=solid,fillcolor=lightgray](7,7){S4}{v_4}
\cnodeput[fillstyle=solid,fillcolor=lightgray](2,9){S1}{v_1}
\cnodeput[fillstyle=solid,fillcolor=lightgray](6,9){S2}{v_2}
\psset{nodesep=3pt}

\rput(2,9.7){x_1=0}
\rput(6,9.7){x_2=0}
\rput(0,7.3){x_3=-7}
\rput(8,7.3){x_4=-7}
\rput(4,6){x_5=14}
\rput(2,4.3){x_6=7}
\rput(6,4.3){x_7=-7}

%\nccircle[arrowsize=4pt 2, angle=90]{->}{S1}{4.5mm}^{1/3\ \ \ \  \   \   \ }
%\nccircle[arrowsize=4pt 2, angle=-90]{<-}{S2}{4.5mm}^{\ \ \ \ \ \ 1/3}
%\nccircle[arrowsize=4pt 2, angle=90]{->}{S3}{4.5mm}^{1/2 \ \ \ \ \ \ }
%\nccircle[arrowsize=4pt 2, angle=-90]{<-}{S4}{4.5mm}^{\ \ \ \ \ \ 1/2}
%\nccircle[arrowsize=4pt 2, angle=-180]{<-}{S5}{4.5mm}^{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1/3}


\ncarc[arcangle=20]{->}{S1}{S2}^{7}
\ncarc[arcangle=10]{->}{S2}{S1}^{7}
\ncarc[arcangle=-10]{->}{S3}{S1}%^{7}
\rput(1.15,8){7}
\ncarc[arcangle=0]{->}{S1}{S5}^{7}
\ncarc[arcangle=0]{->}{S2}{S5}^{7}
\ncarc[arcangle=0]{->}{S3}{S5}^{7}
\ncarc[arcangle=0]{->}{S4}{S5}^{7}
\ncarc[arcangle=0]{->}{S5}{S6}%^{7}
\rput(2.7,6.25){7}
\ncarc[arcangle=0]{->}{S5}{S7}%^{7}
\rput(5.3,6.25){7}
\ncarc[arcangle=10]{->}{S4}{S2}%^{7}
\rput(6.85,8){7}
\ncarc[arcangle=-10]{->}{S7}{S4}%^{7}
\rput(7.1,5.7){7}
\ncarc[arcangle=10]{->}{S7}{S6}^{7}
\ncarc[arcangle=10]{->}{S6}{S3}%^{7}
\rput(0.9,5.7){7}



%\ncarc[arcangle=20]{->}{S1}{S2}%^{1/3}
%\ncarc[arcangle=10]{->}{S3}{S1}%^{1/3 \  }
%\ncarc[arcangle=10]{->}{S2}{S3}%_{1/3}
%%\ncarc[arcangle=-10]{->}{S3}{S4}%_{1/3}
%\ncarc[arcangle=10]{->}{S2}{S4}^{1/3}
%\ncarc{->}{S3}{S4}^{1/2}
%\ncarc[arcangle=-10]{->}{S4}{S1}%_{\ \ \  \ \ \ \  1/2}
%%\ncarc{->}{S5}{S3}%_{1/3}
%%\ncarc[arcangle=-10]{->}{S5}{S4}_{1/3}

%\rnode(2,3){dki}{stuff}

%\rput(2,3.2){\rnode{d112}{\psframebox[linewidth=0.4pt,fillcolor=lightgray,fillstyle=solid]{d_1^{12}}}}
%\rput(4,3.2){\rnode{d212}{\psframebox[linewidth=0.4pt,fillcolor=lightgray,fillstyle=solid]{d_2^{12}}}}

%\rput(2,0.5){\rnode{d121}{\psframebox[linewidth=0.4pt,fillcolor=lightgray,fillstyle=solid]{d_1^{21}}}}
%\rput(4,0.5){\rnode{d221}{\psframebox[linewidth=0.4pt,fillcolor=lightgray,fillstyle=solid]{d_2^{21}}}}


%\ncarc{->}{S1}{d112}^{b_{12}}
%\ncarc{->}{d112}{d212}^{1}
%\ncarc{->}{d212}{S2}^{1}
%\ncarc[arcangle=70]{->}{S1}{d212}^{b_{12}}

%\ncarc{->}{S2}{d221}_{b_{21}}
%\ncarc{->}{d221}{d121}_{1}
%\ncarc{->}{d121}{S1}_{1}
%\ncarc[arcangle=70]{->}{S2}{d121}_{b_{12}}


\endpsmatrix
$
%\psframe[fillstyle=solid,fillcolor=white](0,0)(11,11)

%\cnodeput(8.442,5.687){S1}{$S_{1}$}
%\cnodeput(9.455,3.671){R1}{$R_{1}$} \ncline[nodesep=1pt]{->}{S1}{R1}
%\rput(9.26,4.71){$g_{11}$}

%\cnodeput(6,0.382){S2}{$S_{2}$} \cnodeput(3.337,1.641){R2}{$R_{2}$}
%\ncline[nodesep=1pt]{->}{S2}{R2} \rput(4.8,1.25){$g_{22}$}

%\cnodeput(1.353,8.872){S3}{$S_{3}$}
%\cnodeput(1.143,6.291){R3}{$R_{3}$} \ncline[nodesep=1pt]{->}{S3}{R3}
%\rput(1.53,7.591){$g_{33}$}

%\cnodeput(6.468,8.107){S4}{$S_{4}$}
%\cnodeput(5.979,6.037){R4}{$R_{4}$} \ncline[nodesep=1pt]{->}{S4}{R4}
%\rput(5.877,7.191){$g_{44}$}


% Interferences
%\ncline[linestyle=dashed,linecolor=gray,nodesep=1pt]{->}{S1}{R2}
%\rput(4.3,6.5){\gray $g_{12}$}
%\ncline[linestyle=dashed,linecolor=gray,nodesep=1pt]{->}{S2}{R1}
%\rput(5.35,3){\gray $g_{21}$}

\end{pspicture}
\end{center}

\end{document}
