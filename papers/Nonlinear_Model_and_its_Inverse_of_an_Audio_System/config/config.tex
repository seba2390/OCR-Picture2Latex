%********************************************************************
% Packages
%********************************************************************

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}
\usepackage[square, numbers]{natbib}
\usepackage[fleqn]{amsmath}
\usepackage{packages/dia-classicthesis-ldpkg}
\usepackage[eulerchapternumbers, subfig, beramono, eulermath, parts, subfigure, dottedtoc]{packages/classicthesis}
\usepackage{xfrac}
\usepackage{marginnote}
\usepackage{graphicx} 
\usepackage{float}
\usepackage{setspace}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage[lined,boxed,commentsnumbered]{algorithm2e}
%********************************************************************
% classicthesis strings
%********************************************************************

\newcommand{\myTitle}{Modello nonlineare di un sistema audio e suo inverso\xspace}
\newcommand{\mySubtitle}{Nonlinear model and its inverse of an audio system\xspace}
\newcommand{\myDegree}{Corso di Laurea Magistrale in Informatica\xspace}
\newcommand{\myName}{Alessandro Loriga\xspace}
\newcommand{\myProf}{Prof. Gregorio Landi\xspace}
\newcommand{\mySupervisor}{Dott. Daniele Bernardini\xspace}
\newcommand{\myFaculty}{Scuola di Scienze Matematiche, Fisiche e Naturali\xspace}
\newcommand{\myDepartment}{Dipartimento di Sistemi e Informatica\xspace}
\newcommand{\myUni}{\protect{Universit√† degli Studi di Firenze}\xspace}
\newcommand{\myLocation}{Firenze\xspace}
\newcommand{\myTime}{Anno Accademico 2015-2016\xspace}

%********************************************************************
% Packages options
%********************************************************************
\doublespacing
% geometry
\usepackage{geometry}
\geometry{
	a4paper,
	ignoremp,
	bindingoffset = 1cm, 
	textwidth     = 13.5cm,
	textheight    = 21.5cm,
	lmargin       = 3.5cm,
	tmargin       = 4cm
}

% listings
\renewcommand*{\lstlistingname}{Source Code}
\newcommand*{\noaddvspace}{\renewcommand*{\addvspace}[1]{}}
\addtocontents{lol}{\protect\noaddvspace}
\let\oldlstlistoflistings\lstlistoflistings
\renewcommand{\lstlistoflistings}{%
    \begingroup%
        \let\oldnumberline\numberline%
        \renewcommand{\numberline}{\!\!\!\!\!\!\!\!\!\lstlistingname~\oldnumberline}%
        \oldlstlistoflistings%
    \endgroup
}
%\lstset{
%    keywordstyle=\color{RoyalBlue},%\bfseries,
%    basicstyle=\small\ttfamily,
%    %identifierstyle=\color{NavyBlue},
%    commentstyle=\color{Green}\ttfamily,
%    stringstyle=\rmfamily,
%    numbers=none,%left,%
%    numberstyle=\scriptsize,%\tiny
%    stepnumber=5,
%    numbersep=8pt,
%    showstringspaces=false,
%    frameround=ftff,
%    frame=single
%    %frame=L
%}
\colorlet{punct}{red!60!black}
\definecolor{background}{HTML}{EEEEEE}
\definecolor{delim}{RGB}{20,105,176}
\colorlet{numb}{magenta!60!black}

\lstset{
	numbers=left,
    numberstyle=\scriptsize,
    basicstyle=\small\sffamily,
    numbersep=3pt,
    frame=tb,
    columns=fullflexible,
    backgroundcolor=\color{background}
}
\lstset{
    numberbychapter=false,
    showstringspaces=false,
    breaklines=true
}

% perpage
\usepackage{perpage}
\MakePerPage{footnote}

% hyperref
\hypersetup{%
    %draft, % = no hyperlinking at all (useful in b/w printouts)
    colorlinks=true, linktocpage=true, pdfstartpage=3, pdfstartview=FitV,%
    % uncomment the following line if you want to have black links (e.g., for printing)
    colorlinks=false, linktocpage=false, pdfstartpage=3, pdfstartview=FitV, pdfborder={0 0 0},%
    breaklinks=true, pdfpagemode=UseNone, pageanchor=true, pdfpagemode=UseOutlines,%
    plainpages=false, bookmarksnumbered, bookmarksopen=true, bookmarksopenlevel=1,%
    hypertexnames=true, pdfhighlight=/O,%nesting=true,%frenchlinks,%
    urlcolor=webbrown, linkcolor=RoyalBlue, citecolor=webgreen, %pagecolor=RoyalBlue,%
    %urlcolor=Black, linkcolor=Black, citecolor=Black, %pagecolor=Black,%
    pdftitle={\myTitle},%
    pdfauthor={\textcopyright\ \myName, \myUni, \myFaculty},%
    pdfsubject={},%
    pdfkeywords={},%
    pdfcreator={pdfLaTeX},%
    pdfproducer={LaTeX with hyperref and classicthesis}%
}

% caption
\captionsetup{format=hang,font=small}

% graphicx
\graphicspath{{img/}}

%********************************************************************
% (Re)new commands & styles
%********************************************************************

% reversed acronym
\newcommand{\acr}[1]{\acs{#1} (\aclu{#1})}

% uppercase part number
\AtBeginDocument{\renewcommand{\thepart}{\Roman{part}}}

% bigger table vertical padding
\setlength{\extrarowheight}{3pt}

% fixed classicthesis chapter number (right-aligned)
\titleformat{\chapter}[display]%
	{\relax}{\mbox{}\oldmarginpar{\vspace*{-3\baselineskip}\makebox[40pt][r]{\color{halfgray}\chapterNumber\thechapter}}}{-5pt}%
	{\raggedright\spacedallcaps}[\normalsize\vspace*{.8\baselineskip}\titlerule]%
	
% language/strings for backrefs
\renewcommand{\backrefnotcitedstring}{\relax}%(Not cited.) 
\renewcommand{\backrefcitedsinglestring}[1]{(Citato a pagina~#1.)} 
\renewcommand{\backrefcitedmultistring}[1]{(Citato alle pagine~#1.)} 
\renewcommand{\backreftwosep}{ e~} 
\renewcommand{\backreflastsep}{ e~}

\newcommand{\bash}[1]{\lstinline[language=bash]{#1}}
\newcommand{\python}[1]{\lstinline[language=python]{#1}}
\newcommand{\cpp}[1]{\lstinline[language=C++]{#1}}

\newtheorem{theorem}{Theorem}

\lstdefinelanguage{json}{
    basicstyle=\normalfont\ttfamily,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    %frame=lines,
    backgroundcolor=\color{background},
    literate=
     *{0}{{{\color{numb}0}}}{1}
      {1}{{{\color{numb}1}}}{1}
      {2}{{{\color{numb}2}}}{1}
      {3}{{{\color{numb}3}}}{1}
      {4}{{{\color{numb}4}}}{1}
      {5}{{{\color{numb}5}}}{1}
      {6}{{{\color{numb}6}}}{1}
      {7}{{{\color{numb}7}}}{1}
      {8}{{{\color{numb}8}}}{1}
      {9}{{{\color{numb}9}}}{1}
      {:}{{{\color{punct}{:}}}}{1}
      {,}{{{\color{punct}{,}}}}{1}
      {\{}{{{\color{delim}{\{}}}}{1}
      {\}}{{{\color{delim}{\}}}}}{1}
      {[}{{{\color{delim}{[}}}}{1}
      {]}{{{\color{delim}{]}}}}{1},
}