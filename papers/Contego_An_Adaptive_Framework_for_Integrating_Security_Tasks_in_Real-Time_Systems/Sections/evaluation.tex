 \documentclass[../rt_server_main.tex]{subfiles}

 \begin{document}

\section{Evaluation} \label{sec:evaluation}

We evaluate \coolname with randomly generated synthetic workloads % \footnote{The use of synthetic task-set for design space exploration is very common in real-time literature \cite{mn_gp, mhasan_rtss16, sg1,sibin_RT_security_journal,lin2009static,delay_period,server_ab_uk,xie2007improving,taskshuffler} since it enables the designers to test and verify system performance with wide range of parameters.}
 (Section \ref{subsec:results}) as well as a proof-of-concept implementation on an ARM-based  embedded development board and real-time Linux (Section \ref{subsec:implementation_BBB}). 


\subsection{Experiment with Synthetic Task-sets}
\label{subsec:results}

% \todo[inline]{Rod: my understanding here is that the set of tasks in active and the set of tasks in passive mode are exactly the same for this part of the evaluation. If yes I would explain explicitly why}
% \hl{MH: Yes, for fare comparison we use same parameters. Explained in the beginning of 6.1.2}

\subfile{Sections/experimental_setup}

\subsubsection{Results}

\paragraph{Impact on Cumulative Tightness}





% \begin{figure}[!tbp]
%   \centering
%   \begin{minipage}[b]{0.48\textwidth}
%     \centering
% \includegraphics[width=2.9in]{diff_eta_active_passive_color}
% \caption{\pve mode vs \ave mode: difference in cumulative tightness of achievable periodic monitoring, $\boldsymbol{\eta^{av} - \eta^{pa}}$. Non-zero difference indicates that the \ave mode tasks achieve better tightness than \pve mode tasks.
% Each of the data points represents schedulable task-sets.}
% \label{fig:diff_eta_active_passive}
%   \end{minipage}
%   \hfill
%   \begin{minipage}[b]{0.48\textwidth}
%     \centering
% \includegraphics[width=2.9in]{xi_active_no_tol_color}
% \caption{The effectiveness of security  vs total utilization of the system. The closer the y-axis values to $1$, the nearer the period of each of the security task is to the desired period.
% }
% \label{fig:effect_security}
%   \end{minipage}
% \end{figure}

In Fig.~\ref{fig:diff_eta_active_passive} one can see the difference in the tightnesses of the periodic monitoring obtained by \pve and \ave mode (\ie $\eta^{ac} -\eta^{pa}$). For fair comparison we used the same task-sets for both modes. The x-axis of Fig.~\ref{fig:diff_eta_active_passive} represents the total system utilization (\eg utilization of both real-time and security tasks). The positive values in the y-axis of Fig.~\ref{fig:diff_eta_active_passive} imply that the \ave mode tasks obtain better tightness that the \pve mode tasks.  

 \begin{figure}[!t]
%\begin{wrapfigure}{r}{0.5\columnwidth}
\vspace{-1.00\baselineskip}
\centering
\includegraphics[width=2.9in]{diff_eta_active_passive_color}
\caption{\pve mode vs. \ave mode: difference in cumulative tightness of achievable periodic monitoring, $\eta^{av} - \eta^{pa}$. Non-zero difference indicates that the \ave mode tasks achieve better tightness than \pve mode tasks. %We assume tolerance for deadline is zero, \textbf{\textit i.e.,} $\boldsymbol{\epsilon_j = 0,~\forall \tau_j \in lp_R(\tau_\mathcal{S}^{ac})}$. 
Task-sets from different base-utilization groups are represented by different colors. Each of the data points represents schedulable task-sets.}
\label{fig:diff_eta_active_passive}
\vspace{-0.5\baselineskip}
%\end{wrapfigure}
 \end{figure}

The figure shows that \ave mode tasks can achieve better cumulative tightness, and that the cumulative tightness $\eta^{pa}$ is comparatively better in low to medium utilization. The main reason is that in \ave mode security tasks are allowed to execute with higher priority, that causes less interference and eventually increases the feasible region in the optimization problems (and hence provides better tightness). For higher utilizations the difference is close to zero. %However, this does not mean that the achieved tightness is lower
%\note[RBB]{Previous sentence is not clear.} 
%In fact, 
This is because, as utilization increases there is less slack in the system, making it difficult to schedule security tasks frequently and resulting in similar levels of tightness for both modes.


 


\paragraph{Effectiveness of Security}




The parameter $\eta^{(\cdot)}$ is given by the total number of security tasks and provides insights on cumulative measures of security. However, in this experiment (refer to Fig.~\ref{fig:effect_security}) we wanted to measure the effectiveness of the security of the system by observing whether \textit{each} of the security tasks in any mode can achieve an execution frequency closer to the desired one. Hence we used the following metric: 
$\xi = 1- \frac{ {\lVert \mathbf{T}^* - \mathbf{T^{des}}\rVert}_2}{{\lVert \mathbf{T^{max}} - \mathbf{T^{des}}\rVert}_2}$ where $\mathbf{T}^*$ is the solution obtained from Algorithm \ref{alg:sec_schd}, $\mathbf{T^{des}} = [T_i^{des}]_{\forall \tau_i }^{\mathsf{T}} $ and $\mathbf{T^{max}} = [T_i^{max}]_{\forall \tau_i }^{\mathsf{T}} $ are the desired and maximum period vector (refer to Section \ref{subsec:ex_setup}), respectively, and ${\lVert \cdot \rVert}_2$ denotes the Euclidean norm. The closer the value of $\xi$ to $1$, the nearer  each of the security task's  period is to the  desired period. 


 \begin{figure}[!t]
%\begin{wrapfigure}{l}{0.5\columnwidth}
%\vspace{-1.0\baselineskip}
\centering
\includegraphics[width=2.9in]{xi_active_no_tol_color}
\caption{The effectiveness of security  vs. total utilization of the system. The closer the y-axis values to $1$, the nearer each security task's period is to the desired period. Task-sets from different base-utilization groups are distinguished by different colors. %Similar to %Fig.~\ref{fig:diff_eta_active_passive}
%previous experiment, we consider $\boldsymbol{\epsilon_j = 0,~\forall \tau_j \in lp_R(\tau_\mathcal{S}^{ac})}$.
}
\label{fig:effect_security}
%\vspace{-1.0\baselineskip}
%\end{wrapfigure}
 \end{figure}



As the total utilization increases, the feasible set of the period adaptation problem that respects all constraints in  the optimization problems becomes more restrictive. As a result, we see the degradation in effectiveness (in terms of $\xi$) for the task-sets with higher utilization. However,
from our experiments we find that \coolname can achieve periods that are \textit{within $18\%$ of the desired periods}.




\begin{comment}




\paragraph{Effect on the Deadline Tolerance}


\begin{figure}[!t]
\centering
\includegraphics[width=3.0in]{deadline_tol_gain}
\caption{Impact of allowing a tolerance of deadline for low-priority real-time tasks. The improvement on cumulative tightness is measured by $\boldsymbol{\eta_{gain} = \frac{\eta_{\rm WithToleralce} - \eta_{\rm NoToleralce}}{\eta_{\rm NoToleralce}} \times 100 \%}$. We set tolerance with respect to deadline, \textbf{\textit i.e.,} $\boldsymbol{\epsilon_j = \delta D_j}$ and observe performance with  $\boldsymbol{5\%}$ and $\boldsymbol{10\%}$ tolerance (\textbf{\textit e.g.,} $\boldsymbol{\delta = 0.05}$ and $\boldsymbol{\delta = 0.10}$, respectively).}
\label{fig:dealine_tol_gain}
\end{figure}

The impact on allowing tolerance on low-priority real-time tasks is illustrated in Fig.~\ref{fig:dealine_tol_gain}.  We set the tolerance with respect to the deadline, \viz $\epsilon_j = \delta D_j,~\forall \tau_j \in lp_R(\tau_\mathcal{S}^{ac})$ where $\delta$ is varied from $0$ (no tolerance) to $0.10$ ($10\%$ of the original deadline). In  Fig.~\ref{fig:dealine_tol_gain} we observe the performance gain (in terms of cumulative tightness) when a small (\eg $5$-$10\%$) tolerance is allowed compared to the case when no tolerance is allowed (\eg $\delta=0$). The x-axis of Fig.~\ref{fig:dealine_tol_gain} represents total system utilization and y-axis shows the gain in cumulative tightness. We measure this gain as: $\eta_{gain} = \frac{\eta_{\rm WithToleralce} - \eta_{\rm NoToleralce}}{\eta_{\rm NoToleralce}} \times 100 \%$. As we can see from Fig.~\ref{fig:dealine_tol_gain}, by using the tolerance factor we can improve the cumulative tightness of periodic monitoring especially for the high utilization scenario.  For example, when the total system utilization is $0.8$ on average we can improve the effectiveness by $6.5\%$ when tolerance is $10\%$ ($\delta=0.10$) compared to the case no tolerance is allowed ($\epsilon_j = \delta=0, ~ \forall \tau_j$). This is mainly because in high utilization cases the feasibility regions in the optimization problem is very tight. Allowing the tolerance on deadline provides flexibility on the constrains and consequently it improves the quality of solution (\eg the objective value that we measured in terms of $\eta^{ac}$). In low utilization scenario the feasibility region is not very constrained and hence the gain of allowing tolerance is not very significant. The cost of imposing tolerance on deadline comes with the benefit of improved security guarantee and we envision that this may be acceptable for many practical RTS. 

\end{comment}


\paragraph{Impact on the Schedulability}


\begin{figure}[!t]
%\begin{wrapfigure}{r}{0.5\columnwidth}
%\vspace{-1.3\baselineskip}
\centering
\includegraphics[width=2.9in]{active_passive_schedulability_color}
\caption{Schedulability of real-time and security tasks in both modes. The acceptance ratio is defined by the ratio of the number of accepted
task sets over the total number of generated tasks. For each of the data points, 500 individual task-sets were tested.}
\label{fig:active_passive_sched}
\vspace{-1.0\baselineskip}
%\end{wrapfigure}
\end{figure}


We used the \textit{acceptance ratio}
metric to evaluate schedulability. The acceptance ratio (y-axis in Fig.~\ref{fig:active_passive_sched}) is defined as the number of accepted task-sets (\eg the task-sets that satisfied all the constraints) over the total number of generated ones. As depicted in Fig.~\ref{fig:active_passive_sched} the \ave mode task-set achieves better schedulability compared to the \pve ones. Recall that \ave mode task-sets can be promoted up to priority level $l_S$. As a result \ave mode security tasks potentially experience less interference than the \pve ones. This flexibility gives the optimization routines a larger  feasibility region to satisfy all the constraints. %Besides as we see from figure adding tolerance on deadline does not affect schedulability of the system.




\subfile{Sections/board_experiments}

%\input{Sections/board_experiments}





 \end{document}