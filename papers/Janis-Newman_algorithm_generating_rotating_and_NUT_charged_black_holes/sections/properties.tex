\section{Technical properties}
\label{app:technical-properties}


In this chapter we describe few technical properties of the algorithm.
We comment on the group properties that some of the JN transformations possess~\cite{Erbin:2016:DecipheringGeneralizingDemianskiJanisNewman}.
Another useful property of Giampieri's prescription is to allow to chain all coordinate transformation, making computations easier~\cite{Erbin:2015:JanisNewmanAlgorithmSimplifications}.
Then finally we discuss the fact that not all the rules \eqref{gen:eq:rules} are independent and several choices of complexification are equivalent~\cite{Erbin:2015:JanisNewmanAlgorithmSimplifications}, contrary to what is commonly believed.


\subsection{Group properties}
\label{app:group-properties}


We want to study the JN transformations that form a group: the main motivation is to state clearly the effect of chaining several transformations.
This observation can be useful for chaining several transformations, therefore adding charges to a solution that is already non-static (for example adding rotation to a solution that already contains a NUT charge).
More importantly this provides a setting where the algorithm has good chances to preserve Einstein equations.

We will make the assumptions that the functions $F(\theta)$ and $G(\theta)$ are linear in some parameters $\pi^A$ (implicit sum over $A$)
\begin{equation}
	F(\theta) = \pi^A F_A(\theta), \qquad
	G(\theta) = \pi^A G_A(\theta),
\end{equation} 
where $\{ F_A(\theta) \}$ and $\{ G_A(\theta) \}$ are the functions associated to the parameters and $A$ runs over the dimension of this space.
Mathematically the functions are member of an additive group $\mc G$ with elements in\footnotemark{} $\mc F \times \mc F$ ($\mc F$ being the space of functions with second derivatives) with generators $\big( F_A(\theta), G_A(\theta) \big)$, $A = 1, \ldots, \dim \mc V$ since there is an identity element $0$ and each element with coefficients $\pi^A$ possesses an inverse given by $- \pi^A$.%
\footnotetext{%
	For simplicity we consider the case where $F$ and $G$ are expanded over the same parameters, but this is not necessarily the case.
}
Adding the multiplication by a scalar turns this group into a vector space but we do not need this extra structure.
As a consequence the sum of two functions $F_1 = \pi_1^A F_A$ and $F_2 = \pi_2^A F_A$ gives another function $F_3 = \pi_3^A F_A$ with $\pi_3^A = \pi_1^A + \pi_2^A$.
These assumptions are motivated by the results of \cref{sec:derivation} where $F$ and $G$ were solutions of (non-homogeneous) second order linear differential equations where the $\pi^A$ are the integration constants.

After a first transformation
\begin{equation}
	r = r' + i\, F_1, \qquad
	u = u' + i\, G_1
\end{equation} 
one obtains the metric (omitting the primes)
\begin{equation}
	\begin{aligned}
		\dd s^2 = &- \tilde f^{\{1\}}_t (\dd u + H G_1'\, \dd\phi)^2
			+ \tilde f^{\{1\}}_\Omega (\dd\theta^2 + H^2 \dd\phi^2) \\
			&- 2 \sqrt{\tilde f^{\{1\}}_t \tilde f^{\{1\}}_r} (\dd u + G_1' H\, \dd\phi) (\dd r + F_1' H\, \dd\phi)
	\end{aligned}
\end{equation} 
where
\begin{equation}
	\tilde f^{\{1\}}_i = \tilde f^{\{1\}}_i(r, F_1).
\end{equation} 
Performing a second transformation
\begin{equation}
	r = r' + i\, F_2, \qquad
	u = u' + i\, G_2
\end{equation} 
the previous metric becomes (omitting the primes)
\begin{equation}
	\label{topdown:eq:metric-two-transf}
	\begin{aligned}
		\dd s^2 = &- \tilde f^{\{1,2\}}_t \big( \dd u + H (G_1' + G_2')\, \dd\phi \big)^2
			+ \tilde f^{\{1,2\}}_\Omega (\dd\theta^2 + H^2 \dd\phi^2) \\
			&- 2 \sqrt{\tilde f^{\{1,2\}}_t \tilde f^{\{1,2\}}_r} \big( \dd u + (G_1' + G_2') H\, \dd\phi \big) \big( \dd r + (F_1' + F_2') H\, \dd\phi \big)
	\end{aligned}
\end{equation} 
where
\begin{equation}
	\tilde f^{\{1,2\}}_i = \tilde f^{\{1,2\}}_i(r, F_1, F_2).
\end{equation}
This function is required to satisfy the following conditions (omitting the primes)
\begin{equation}
	\tilde f^{\{1,2\}}_i(r, F_1, 0) = \tilde f^{\{1\}}_i(r, F_1), \qquad
	\tilde f^{\{1,2\}}_i(r, F_1, F_2) = \tilde f^{\{2,1\}}_i(r, F_2, F_1).
\end{equation} 
The second condition means that the order of the transformations should not matter because we want to obtain the same solution given identical seed metric and parameters.

The metric \eqref{topdown:eq:metric-two-transf} is obviously equivalent to the one we would get with a unique transformation\footnotemark{}%
\footnotetext{%
	This breaks down when the metric is transformed with more complicated rules, such as in higher dimensions~\cite{Erbin:2015:FivedimensionalJanisNewmanAlgorithm}.
}
\begin{equation}
	r = r' + i\, (F_1 + F_2), \qquad
	u = u' + i\, (G_1 + G_2).
\end{equation} 
Then, for the transformations which are such that
\begin{equation}
	\label{topdown:eq:fi-sum-F}
	\tilde f^{\{1,2\}}_i(r, F_1, F_2) = \tilde f^{\{1\}}_i(r, F_1 + F_2),
\end{equation} 
the DJN transformations form an Abelian group thanks to the group properties of the function space.
This structure implies that we can first add one parameter, and later another one (say first the NUT charge, and then an angular momentum).
Said another way this group \emph{preserves Einstein equations} when the seed metric is a known (stationary) solution.
But note that it may be very difficult to do it as soon as one begins to replace the $F$ in the functions by their expression, because it obscures the original function â€“ in one word we can not find $\tilde f_i(r, F)$ from $\tilde f_i(r, \theta)$.

Another point worth to mention is that not all DJN transformation are in this group since the condition \eqref{topdown:eq:fi-sum-F} may not satisfied: we recall that imposing or not the latter is a choice that one is doing when performing the algorithm.
A simple example is provided by
\begin{equation}
	f(r) = r^2,
\end{equation} 
which can be transformed under the two successive transformations
\begin{equation}
	r = r' + i F_1, \qquad
	r' = r'' + i F_2
\end{equation} 
in two ways:
\begin{subequations}
\begin{align}
	1.& \qquad
		\tilde f^{\{1\}} = \abs{r}^2
			= r'^2 + F_1^2, \qquad
		\tilde f^{\{1,2\}} = \abs{r'}^2 + F_1^2
			= r''^2 + F_1^2 + F_2^2, \\
	2.& \qquad
		\tilde f^{\{1\}} = \abs{r}^2
			= \abs{r' + i F_1}^2, \qquad
		\begin{aligned}
			\tilde f^{\{1,2\}} &= \abs{r'' + i (F_1 + F_2)}^2 \\
				&= r''^2 + F_1^2 + F_2^2 + 2 F_1 F_2.
		\end{aligned}
\end{align}
\end{subequations}
Only the second option satisfy the property \eqref{topdown:eq:fi-sum-F} that leads to a group.
Such an example is provided in $5d$ where the function $f_\Omega(r) = r^2$ is successively transformed as~\cite{Erbin:2015:FivedimensionalJanisNewmanAlgorithm}
\begin{equation}
	r^2 \longrightarrow \abs{r}^2 = r^2 + a^2 \cos^2 \theta \longrightarrow \abs{r}^2 + a^2 \cos^2 \theta = r^2 + a^2 \cos^2 \theta + b^2 \sin^2 \theta,
\end{equation} 
with the functions
\begin{equation}
	F_1 = a \cos \theta, \qquad
	F_2 = b \sin \theta.
\end{equation} 
The condition \eqref{topdown:eq:fi-sum-F} is clearly not satisfied.


\subsection{Chaining transformations}
\label{sec:jna-prop:chaining}



The JN algorithm is summarized by the following table
\begin{equation}
	\begin{array}{cccccccccc}
 		t             & \to & u & \to & u \in \C    & \to & u' & \to & t'    \\
		r             &     &   & \to & r \in \C    & \to & r' &     &      \\
		\phi          &     &   &     &             &     &    & \to & \phi' \\
		f             &     &   & \to & \tilde f    &     &    &     &
	\end{array}
\end{equation}
where the arrows correspond to the different steps of the algorithm.

A major advantage of Giampieri's prescription is that one can chain all these transformations since it involves only substitutions and no tensor operations.
For this reason it is much easier to implement on a computer algebra system such as Mathematica.
It is then possible to perform a unique change of variables that leads directly from the static metric to the rotating metric in any system defined by the function $(g, h)$.
For example in the case of rotation for a metric with a single function one finds
\begin{subequations}
\begin{align}
	\dd t &= \dd t' + \big(a h \sin^2 \theta\, (1 - \tilde f^{-1}) - g + \tilde f^{-1} \big)\, \dd r'
		+ a \sin^2 \theta\, (\tilde f^{-1} - 1)\, \dd \phi', \\
	\dd r &= (1 - a h \sin^2 \theta)\, \dd r' + a \sin^2 \theta\, \dd \phi', \\
	\dd \phi &= \dd \phi' - h\, \dd r',
\end{align}
\end{subequations}
where the complexification of the metric function $f$ can be made at the end.
It is impressive that the algorithm from section~\ref{sec:algo} can be written in such a compact way.


\subsection{Arbitrariness of the transformation}
\label{sec:jna-prop:arbitrariness}


We provide a short comment on the arbitrariness of the complexification rules \eqref{gen:eq:rules}.
In particular let's consider the functions
\begin{equation}
	f_1(r) = \frac{1}{r}, \qquad
	f_2(r) = \frac{1}{r^2}.
\end{equation} 

The usual rule is to complexify these two functions as
\begin{equation}
	\label{prop:eq:arb-usual-rules}
	\tilde f_1(r) = \frac{\Re r}{\abs{r}^2}, \qquad
	\tilde f_2(r) = \frac{1}{\abs{r}^2}
\end{equation} 
using respectively the rules \eqref{gen:eq:rules:1/r} and \eqref{gen:eq:rules:r2} (in the denominator).

But it is possible to arrive at the same result with a different combinations of rules.
In fact the functions can be rewritten as
\begin{equation}
	f_1(r) = \frac{r}{r^2}, \qquad
	f_2(r) = \frac{1}{r}\, \frac{1}{r}.
\end{equation} 
The following set of rules results again in \eqref{prop:eq:arb-usual-rules}:
\begin{itemize}
	\item $f_1$: \eqref{gen:eq:rules:r} (numerator) and \eqref{gen:eq:rules:r2} (denominator);
	\item $f_2$: \eqref{gen:eq:rules:r} (first fraction) and \eqref{gen:eq:rules:1/r} (second fraction).
\end{itemize}

