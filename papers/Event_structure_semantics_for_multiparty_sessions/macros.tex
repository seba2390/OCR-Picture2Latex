% !TEX root =cdgS.tex

%\theoremstyle{plain}\newtheorem{satz}[thm]{Satz} 
\newtheorem{theorem}{Theorem}[section]
\newtheorem{definition}[theorem]{Definition}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{example}[theorem]{Example}
\newtheorem{corollary}[theorem]{Corollary}
%\newtheorem{remark}[theorem]{Remark}
\newenvironment{proof}[1][Proof]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}
%\newenvironment{proof}{\paragraph{Proof:}}{\hfill$\square$\\}
%\usepackage{kpfonts}
%\newcommand*{\vv}[1]{\vec{\mkern0mu#1}}
\newcommand*{\vv}[1]{\overrightarrow{#1}}

%POPL08 + cappelli
%\newcommand{\inp}[5]{#1?\SigmaB_{#2\in#3}\Seq{#4_#2}{#5_#2
\newcommand{\cau}[2]{#1\circ#2}
\newcommand{\cauA}[2]{#1\circ_{\mathcal A}#2}
\newcommand{\cauP}[3]{#1\circ_{#3}#2}
\newcommand{\inp}[5]{\SigmaB_{#2\in#3}#1?\Seq{#4_#2}{#5_#2}}
\newcommand{\inpp}[5]{\SigmaB_{#2\in#3}#1?\Seq{#4_#2}{#5}}
%\newcommand{\oup}[5]{#1!\bigoplus_{#2\in#3}\Seq{#4_#2}{#5_#2}}}}
\newcommand{\oup}[5]{\bigoplus_{#2\in#3}#1!\Seq{#4_#2}{#5_#2}}
\newcommand{\oupp}[5]{\bigoplus_{#2\in#3}#1!\Seq{#4_#2}{#5}}
\newcommand{\oupTx}[5]{\textstyle{\bigoplus}_{#2\in#3}#1!\Seq{#4_#2}{#5_#2}}
\newcommand{\inpC}[7]{#1?(\Seq{{#2}}{#3}+\SigmaB_{#4\in#5}\Seq{#6_#4}{#7_#4})}
\newcommand{\oupC}[7]{#1!(\Seq{{#2}}{#3}\oplus\bigoplus_{#4\in#5}\Seq{#6_#4}{#7_#4})}
\newcommand{\gtComm}[5]{#1\to#2: \GlSyB_{#3\in#4}{#5_#3}}
\newcommand{\gt}[6]{#1\to#2: \GlSyB_{#3\in#4}\Seq{#5_#3}{#6_#3}}
\newcommand{\gtp}[6]{#1\to#2: \GlSyB_{#3\in#4}\Seq{#5_#3}{#6'_#3}}
\newcommand{\gtC}[8]{#1\to#2: (\Seq{{#3}}{#4} \GlSy \GlSyB_{#5\in#6}\Seq{#7_#5}{#8_#5})}
\newcommand{\gtI}[8]{#1\to#2: (\Seq{#3}{#4} \GlSy \GlSyB_{#5\in#6}\Seq{#7_#5}{#8_#5})}
 \newcommand{\RG}{\ensuremath{{\sf G}}}
 \newcommand{\GlSyB}{\mathlarger{\mathlarger{\mathlarger{\boxplus}}}}
 \newcommand{\PiB}{\mathlarger{\mathlarger\Pi}}
  \newcommand{\SigmaB}{\mathlarger{\mathlarger\Sigma}}
  \newcommand{\cb}[3]{\it{comm}(#1,#2,#3)}
   \newcommand{\rs}[2]{#1\S#2}
   \newcommand{\dual}[1]{\overline{#1}}
   \newcommand{\mg}[1]{\it{merge}{(#1)}}
    \newcommand{\bm}{\vartheta}
     \newcommand{\bms}{\Theta}
   \newcommand{\ES}{\mathcal{P\!E}}
   \newcommand{\ESA}{\mathcal{P\!E}}
  \newcommand{\ESPlus}{\ES^+}
  \newcommand{\AES}{\mathcal{P\!E_{{A}}}}
    \newcommand{\EGG}{\mathcal{G\!E}}
     \newcommand{\EGGA}{\mathcal{G\!E_A}}
    \newcommand{\EG}{\mathcal{G}}
    \newcommand{\inpF}[7]{#1?(\Seq{#2}{#3}+\SigmaB_{#4\in#5}\Seq{#6_#4}{#7_#4})}
\newcommand{\oupF}[7]{#1!(\Seq{#2}{#3}\oplus\bigoplus_{#4\in#5}\Seq{#6_#4}{#7_#4})}
\newcommand{\Ev}{\mathbbmss{E}}
% \cor  in conflitto con macro lmcs e mai usato
 %\newcommand{\cor}[2]{#1\subseteq_\heartsuit#2}
 \newcommand{\proje}[2]{#1 \!  \looparrowright   #2\,}
 \newcommand{\projeA}[2]{#1 \!  \looparrowright_{\mathcal A}   #2\,}
 \newcommand{\projeR}[2]{#1 \!  \looparrowright'   #2\,}
 \newcommand{\projep}[2]{(#1) \!  \looparrowright   #2\,}
 \newcommand{\projeAR}[2]{#1 \!  \looparrowright'_{\mathcal A}   #2\,}
 \newcommand{\projeAp}[2]{(#1) \!  \looparrowright_{\mathcal A}   #2\,}
 \newcommand{\te}{\eta}
  \newcommand{\ee}{\epsilon}
 \newcommand{\mr}[1]{{\mathcal M}(#1)}
 \newcommand{\inpI}[5]{#1?\SigmaB_{#2\in#3}\Seq{#4_#2}{#5}}
\newcommand{\oupI}[5]{#1!\bigoplus_{#2\in#3}\Seq{#4_#2}{#5}}
\newcommand{\inpS}[4]{\SigmaB_{#1\in#2}\Seq{#3_#1}{#4}}
\newcommand{\oupS}[4]{\bigoplus_{#1\in#2}\Seq{#3_#1}{#4}}
\newcommand{\nt}[1]{{\mathcal N}(#1)}
\newcommand{\comp}[2]{#1\circ  #2}
  \renewcommand{\sep}{~|~}
  \newcommand{\eh}[1]{|#1|}
  \newcommand{\dep}[2]{\delta(#1,  #2)}
%\newcommand{\mylabel}[1]{\textcolor{green}{#1}\label{#1}}
 \newcommand{\mylabel}[1]{\label{#1}}
   \newcommand{\dc}[1]{#1\!\Downarrow}
   
% Ilaria: begin alternative definitions Ã„
\newcommand{\inpalt}[5]{\SigmaB_{#2\in#3}\Seq{#1? #4_#2}{#5_#2}}
\newcommand{\oupalt}[5]{\bigoplus_{#2\in#3}\Seq{#1! #4_#2}{#5_#2}}
\newcommand{\inpCalt}[7]{(\Seq{{#1?#2}}{#3}+\SigmaB_{#4\in#5}\Seq{#6_#4}{#7_#4})}
\newcommand{\oupCalt}[7]{(\Seq{{#1!#2}}{#3}\oplus\bigoplus_{#4\in#5}\Seq{#6_#4}{#7_#4})}
\newcommand{\inpCaltindex}[7]{(\Seq{{#1?#2}}{#3}+_j\SigmaB_{#4\in#5\backslash\set{j}}\Seq{#6_#4}{#7_#4})}
\newcommand{\oupCaltindex}[7]{(\Seq{{#1!#2}}{#3}\oplus_j\bigoplus_{#4\in#5\backslash\set{j}}\Seq{#6_#4}{#7_#4})}
\newcommand{\inpCaltsimple}[7]{\Seq{{#1?#2}}{#3}+\SigmaB_{#4\in#5}\Seq{#6_#4}{#7_#4}}
\newcommand{\oupCaltsimple}[7]{\Seq{{#1!#2}}{#3}\oplus\bigoplus_{#4\in#5}\Seq{#6_#4}{#7_#4}}


\newcommand{\actocc}{\ensuremath{\vartheta}}
\newcommand{\comocc}{\ensuremath{\gamma}}
\newcommand{\comoccA}{\ensuremath{\delta}}
\newcommand{\comoccF}{\ensuremath{\varphi}}
\newcommand{\comoccP}{\ensuremath{\vartheta}}

\newcommand{\Commpair}[2]{\ensuremath{(#1,#2)}}

\newcommand{\parNleft}[1]{\ensuremath\parN_0 \! #1}
\newcommand{\parNright}[1]{\ensuremath\parN_1 \! #1}

\newcommand{\event}{\ensuremath{\eta}}
\newcommand{\pastpref}[2]{\ensuremath{\concat{{#1}}{#2}}}

\newcommand{\act}[1]{\ensuremath{\sf act}(#1)}
\newcommand{\spath}[1]{\ensuremath{\sf path}(#1)}
\newcommand{\redpath}[1]{\ensuremath{\sf redpath}(#1)}
\newcommand{\tg}[1]{\ensuremath{\sf tg}(#1)}
% \see  in conflitto con macro lmcs e mai usato
%\newcommand{\see}{\ic}

\newcommand{\source}[1]{\ensuremath{\sf source}(#1)}
\newcommand{\target}[1]{\ensuremath{\sf target}(#1)}

%\newcommand{\concat}[2]{\ensuremath{#1\!\cdot\! #2}}
\newcommand{\concat}[2]{\ensuremath{#1\,{\cdot}\,#2}}
\newcommand{\concatS}[2]{\ensuremath{#1\,{\cdot}\,#2}}
\newcommand{\conc}[2]{\ensuremath{#1\smile\ #2}}
\newcommand{\ds}[3]{\ensuremath{\sf d}{(#1,#2,#3)}}
\newcommand{\lee}[2]{\ensuremath{\sf lee}{(#1,#2)}}
\newcommand{\glee}[2]{\ensuremath{\sf glee}{(#1,#2)}}
\newcommand{\lengthEv}[1]{{\ensuremath{\sf lgt}{(#1)}}}
\newcommand{\X}{{\it X}}

%%%%%%% Ilaria: end alternative definitions


 %projection
 \newcommand{\inpP}[5]{\SigmaB_{#2\in#3}#1?\Seq{#4_#2}{#5}}
\newcommand{\oupP}[5]{\bigoplus_{#2\in#3}#1!\Seq{#4_#2}{#5}}


%references
\newcommand{\refToFigure}[1]{Figure~\ref{#1}}
\newcommand{\refToSection}[1]{Section~\ref{#1}}
\newcommand{\refToExample}[1]{Example~\ref{#1}}
\newcommand{\refToLemma}[1]{Lemma~\ref{#1}}
\newcommand{\refToTheorem}[1]{Theorem~\ref{#1}}
\newcommand{\refToCor}[1]{Lemma~\ref{#1}}
\newcommand{\refToCorollary}[1]{Corollary~\ref{#1}}
\newcommand{\refToDef}[1]{Definition~\ref{#1}}
\newcommand{\refToRem}[1]{Remark~\ref{#1}}
\newcommand{\refToProp}[1]{Proposition~\ref{#1}}

%standard
\newcommand{\set}[1]{\{#1\}}
\newcommand{\kf}[1]{\ensuremath{\mathsf{#1}\xspace}}
\newcommand{\kw}[1]{{\tt #1}} 
\newcommand{\cSinferrule}[3][]{
  \mprset{fraction={===},
  fractionaboveskip=0.2ex,
  fractionbelowskip=1.30ex}
  \inferrule[#1]{#2}{~#3}
}

%processes
\newcommand{\PP}{\ensuremath{P}}
\newcommand{\la}{\lambda}
\newcommand{\cm}[1]{\stackrel{#1}\leftrightarrow}
\newcommand{\M}{\lambda}
%\newcommand{\M}{\lambda}
\newcommand{\Messages}{\ensuremath{{\sf Msg}}}
\newcommand{\CMessages}{\ensuremath{{\sf CMsg}}}
\newcommand{\pp}{{\sf p}}
\newcommand{\q}{{\sf q}}
\newcommand{\pr}{{\sf r}}
\newcommand{\ps}{{\sf s}}
\newcommand{\pt}{{\sf t}}
\newcommand{\Participants}{\ensuremath{{\sf Part}}}
\newcommand{\sendL}[2]{#1!#2}
\newcommand{\rcvL}[2]{#1?#2}
\newcommand{\extChoice}[3]{\Sigma_{#1\in #2}#3}
\newcommand{\intChoice}[3]{\oplus_{#1\in #2}#3}
\newcommand{\extChoicebig}[3]{\SigmaB_{#1\in #2}#3}
\newcommand{\intChoicebig}[3]{\bigoplus_{#1\in #2}#3}
\newcommand{\pc}{~|~}
\newcommand{\Seq}[2]{#1;#2}
\newcommand{\recvar}{\ensuremath{X}}
\newcommand{\recvarY}{\ensuremath{Y}}
\newcommand{\recvarZ}{\ensuremath{Z}}
\newcommand{\inact}{\ensuremath{\mathbf{0}}}
%\newcommand{\sep}{\ensuremath{\,\mathbf{|\!\!|}\,}}
%\newcommand{\mid}{\ensuremath{\,\mathbf{|\!\!|}\,}}
\newcommand{\bd}[1]{\mbox{$\circ\langle\hspace{-2pt}\langle\hspace{-1pt}\bullet$}#1}%{\multimapdotbothA#1} {\boxdotRight#1} %{\rightslice#1}
\newcommand{\ed}[1] {\mbox{$\bullet\hspace{-1pt}\rangle\hspace{-2pt}\rangle\circ$}#1}%{\multimapdotbothB#1}{\DiamonddotRight#1} %{\leftslice#1}
\newcommand{\bdblack}[1]{\ed#1}%{\blacktriangleright#1}   %%% ilaria: chiudi delega!
\newcommand{\edblack}[1]{\ed#1}%{\blacktriangleleft#1}     %%% ilaria: chiudi delega?
\newcommand{\bdi}[1]{\circ\langle\hspace{-2pt}\langle\hspace{-1pt}\bullet#1}
\newcommand{\edi}[1] {\bullet\hspace{-1pt}\rangle\hspace{-2pt}\rangle\circ#1}
\newcommand{\val}{v}
\newcommand{\Q}{\ensuremath{Q}}
\newcommand{\R}{\ensuremath{R}}
\newcommand{\SP}{\ensuremath{S}}
%\newcommand{\del}[1]{\ensuremath{\delta_{#1}}}
\newcommand{\del}[1]{\ensuremath{\delta}}
%networks
\newcommand{\Nt}{\ensuremath{{\sf N}}}
\newcommand{\NtA}{\mathbbmss{N_{\mathcal{A}}}}
\newcommand{\parN}{\mathrel{\|}}
\newcommand{\pP}[2] {#1[\![\,#2\,]\!]}
\newcommand{\pfP}[2] {\overset\varhexstar{#1}[\![\,#2\,]\!]}

%reduction
\newcommand{\myruleOneLine}[2]{#1\ \rln{{#2}}}
\newcommand{\rln}[1]{{\textsc{#1}}}
\newcommand{\stackred}[1]{\xrightarrow{#1}}
\newcommand{\myrule}[3]{\begin{prooftree}
 #1 \justifies   #2   \using{\rln{#3}} \end{prooftree}}
 \newcommand{\EC}{\mathcal{C}}%{\mathcal{E}}
\newcommand{\CommP}[3]{#1\xrightarrow{#2}#3}

 
 %global types
 \newcommand{\G}{\ensuremath{{\sf G}}}
 \newcommand{\K}{\ensuremath{{\sf K}}}
 \newcommand{\GC}{\ensuremath{{\mathcal G}}}
 \newcommand{\ty}{\textrm{\bf t}}
 \newcommand{\End}{\kf{End}}
 \newcommand{\PreGl}[1]{\alpha^{#1}}
 \newcommand{\SenderA}[1]{\ensuremath{\sf sender}(#1)}
\newcommand{\ReceiverA}[1]{\ensuremath{\sf rec}(#1)}
\newcommand{\partcomm}[1]{\ensuremath{{\sf part}(#1)}}
\newcommand{\ptone}[1]{\ensuremath{{\sf pt}(#1)}}
\newcommand{\play}[1]{\ensuremath{{\sf play}(#1)}}
\newcommand{\GlSy}{\boxplus}
 \newcommand{\SquareG}[4]{\Seq{\GlSy_{#1\in#2}\,\PreGl{#3}_{#1}}{#4}}
\newcommand{\SquareGLong}[3]{\GlSy_{#1\in#2}\,#3}
 \newcommand{\participant}[1]{\partcomm{#1}}
 \newcommand{\parG}{\mathrel{\|}}
  \newcommand{\msg}[1]{\ensuremath{{\sf msg}(#1)}}
 \newcommand{\comMV}{ \beta} %{\mathit{s}}

 %session types
 \newcommand{\T}{\ensuremath{\mathsf{T}}}
 \newcommand{\U}{\ensuremath{\mathsf{U}}}
\newcommand{\TS}{\ensuremath{\mathsf{S}}}
 \newcommand{\interTy}[3]{\ensuremath{\bigwedge_{#1 \in #2}#3}}
\newcommand{\unionTy}[3]{\ensuremath{\bigvee_{#1 \in #2}#3}}

%projection
\newcommand{\join}{\bigsqcap}
\newcommand{\joinI}{\Cap}
\newcommand{\proj}[2]{#1 \!  \upharpoonright  \! #2\,}
\newcommand{\projd}[3]{#1 \!  \looparrowright  \!\!^{#3} #2\,}
%\newcommand{\projb}[2]{#1 \!  \looparrowright\!\!\!\!\upharpoonright   #2\,}
\newcommand{\projb}[2]{#1 \!  \Rsh  \! #2\,}

\newcommand{\projdFst}[3]{#1 \!  \upharpoonright_1  \!\! (#2,#3)\,}%{#1 \!  \looparrowright  \!\! (\overline{#2},{#3})\,}
\newcommand{\projdSnd}[3]{#1 \!  \upharpoonright_2  \!\! (#2,#3)\,}%{#1 \!  \looparrowright  \!\! ({#2},\overline{#3})\,}
\newcommand{\projdi}[3]{#1 \!  \upharpoonright_i  \! (#2,#3)\,}
%examples
\newcommand{\blu}[1]{\textcolor{blue}{#1}}
\newcommand{\rosso}[1]{\textcolor{red}{#1}}
\newcommand{\Alice}{{\kw{A}}}
\newcommand{\Seller}{{\kw{S}}}
\newcommand{\Bob}{{\kw{B}}}
\newcommand{\Carol}{{\kw{C}}}
\newcommand{\Bank}{{\kw{B}}}
\newcommand{\msgType}[1]{\langle#1\rangle}
\newcommand{\stringT}{\ensuremath{\kf{Str}}}
\newcommand{\intT}{\ensuremath{\kf{int}}}
\newcommand{\boolT}{\ensuremath{\kf{bool}}}
\newcommand{\rcvrs}[1]{\{#1\}}
\newcommand{\ok}{\,\kw{ok}\,}
\newcommand{\ko}{\,\kw{ko}\,}
\newcommand{\wait}{\,\,\kw{wait}\,}
\newcommand{\AliceN}{{\kf{Alice}}}
\newcommand{\BobN}{{\kf{Bob}}}
\newcommand{\SellerN}{{\kf{Seller}}}
\newcommand{\CarolN}{{\kf{Carol}}}

\newcommand{\Client}{{\kw{C}}}
\newcommand{\BankN}{{\kf{Bank}}}
\newcommand{\ClientN}{{\kf{Client}}}

\newcommand{\titleM}{\,\kw{title}\,}
\newcommand{\quoteM}{\,\kw{quote}\,}
\newcommand{\priceM}{\,\kw{price}\,}
\newcommand{\price}{\,\kw{price}\,}
\newcommand{\card}{\,\kw{card}\,}
\newcommand{\amount}{\,\kw{amount}\,}
\newcommand{\dateM}{\,\kw{date}\,}


%typerules
\newcommand{\derP}[3]{#1 \vdash #2 :#3}
\newcommand{\subt}{\leq}
\newcommand{\subtX}{\leq^{+}}
\newcommand{\derN}[2]{\vdash #1 :#2}
\newcommand{\derNM}[2]{\vdash^{-} #1 :#2}
\newcommand{\derNX}[2]{\vdash^{+} #1 :#2}
\newcommand{\rulename}[1]{{[\textsc{#1}]}}


%substitution
\newcommand{\sub}[2]{\mathclose{\left\{^{#2}\!/\!_{#1}\right\}}}
\newcommand{\Located}{\mathcal{T}}
\newcommand{\lsep}{\mathrel{,}}

%appendix
\newcommand{\derG}[3]{#1 \vdash^g #2 \sim #3}
\newcommand{\derS}[3]{#1 \vdash^s #2 \sim #3}


%Paola
\newcommand{\Der}{\mathcal{D}}
\newcommand{\subDom}{\sqsubseteq}
\newcommand{\weight}{\ensuremath{{\sf depth}}}
\newcommand{\gtCom}[3]{#1\stackrel{#3}{\to}#2}

\newcommand{\WH}[1]{{#1}}

\newcommand{\circleseq}{
\tikz{
\pgfsetbaselinepointlater{\pgfpointanchor{X}{base}}
\pgfcircle{\pgfpointorigin}{0.15cm}
\pgfusepath{stroke}
\node (X) {$\seq$};
}}

\newcommand{\circleseqL}{
\tikz{
\pgfsetbaselinepointlater{\pgfpointanchor{X}{base}}
\pgfcircle{\pgfpointorigin}{0.15cm}
\pgfusepath{stroke}
\node (X) {${}_{\gamma}\!\seq$};
}}
\newcommand{\swap}[3]{#1{\rhd}_{\!#3}#2}

%%%%%%% macros Ilaria for Flow Event Structures

\newcommand{\gr}{\ensuremath{~\#~}}
\newcommand{\grN}{{\footnotesize \ensuremath{\#}}}
\newcommand{\grr}{\ensuremath{\,\#\,}}
\newcommand{\grin}{\ensuremath{\,\#_{in}\,}}
\newcommand{\grrin}{\ensuremath{\,\,\#_{in}\,\,}}
\newcommand{\eqgr}{\ensuremath{\,\sharp\,}}
\newcommand{\sset}{\ensuremath{\subseteq}}
\newcommand{\vsp}{\\[5pt]}
\newcommand{\Cfree}{\textit{Con}}
\newcommand{\impl}{\ensuremath{\Rightarrow}}
\newcommand{\procev}{\eta}
\newcommand{\Procev}{\ES}  
\newcommand{\preEv}{\chi}
\newcommand{\procasev}{\xi}
\newcommand{\netev}{\nu}
\newcommand{\netevA}{\rho}
\newcommand{\globev}{\gamma}
\newcommand{\globevA}{\delta}
\newcommand{\precP}{\ensuremath{\leq}}
\newcommand{\precN}{\ensuremath{\prec}}
\newcommand{\precO}[1]{\ensuremath{<_{#1}}}
 \newcommand{\GE}{\mathcal{N\!E}}
  \newcommand{\GEs}{\mathcal{G\!E}}
 \newcommand{\GEsalt}{\mathcal{G\!E}}
   \newcommand{\GEa}{\mathcal{H\!E_A}}
\newcommand{\DE}{\mathcal{D\!E}}
\newcommand{\DEA}{\mathcal{D\!E_A}}
\newcommand{\DEAI}{\mathcal{D\!E_A^{\rm i}}}
\newcommand{\DEAO}{\mathcal{D\!E_A^{\rm o}}}
\newcommand{\DEAP}{\mathcal{D\!E_A^{\rm pre}}}
 \newcommand{\GEA}{\mathcal{N\!E_A}}
\newcommand{\hist}[1]{\ensuremath{\sf hist}(#1)}
\newcommand{\chist}{\ensuremath{\sf h}}
\newcommand{\dualev}[2]{\ensuremath{#1\Join #2}}
%\newcommand{\dualevS}[2]{\ensuremath{#1\,\widehat\Join\, #2}}
\newcommand{\dualevS}[2]{\ensuremath{#1\;\,\widehat\Join\;\, #2}}
\newcommand{\dualevA}[3]{\ensuremath{#1\Join_{#2}#3}}
\newcommand{\dualasev}[2]{\ensuremath{#1\Join_{\approx} #2}}
\newcommand{\dualprecsim}[2]{\ensuremath{#1~_{\succapprox}\!\Join_{\precapprox} #2}}
\newcommand{\locev}[2]{\ensuremath{#1:: #2}}
\newcommand{\locevA}[3]{\ensuremath{#1:: \pair{#2}{#3}}}
\newcommand{\comseq}{ \sigma } %{\mathit{s}}
\newcommand{\actseq}{\zeta} 
%\newcommand{\Comseq}{\textit{SeqS}}
\newcommand{\Comseq}{\textit{Traces}}
\newcommand{\comseqA}{ \tau } %{\mathit{s}}
\newcommand{\actseqA}{\omega} 
\newcommand{\procActs}{\vv{\pi;}} 
\newcommand{\ComseqA}{\textit{SeqA}}
\newcommand{\ComseqAW}{\textit{SeqAW}}
\newcommand{\PSeqAW}{\textit{PSeqAW}}
\newcommand{\eqclass}[1]{\ensuremath{[#1]_{\sim}}}
\newcommand{\precCN}[1]{\ensuremath{\precsim_{#1}}}
\newcommand{\quotient}{\ensuremath{\Comseq/\!\!\sim}}
\newcommand{\gn}[1]{\ensuremath{{\sf gn}}(#1)}
%\newcommand{\ng}[1]{\ensuremath{{\sf ng}}(#1)}
\newcommand{\ngmap}[1]{\ensuremath{{\sf ng}}(#1)}
\newcommand{\gnseq}[1]{\ensuremath{{\sf gnseq}}(#1)}
\newcommand{\ngseq}[1]{\ensuremath{{\sf ngseq}}(#1)}
\newcommand{\ngm}[2]{\ensuremath{{\sf ngm}}(#1,#2)}
\newcommand{\gni}[2]{\ensuremath{{\sf ng}}(#1,#2)}
\newcommand{\gniP}[1]{\ensuremath{{\sf ng}}(#1)}
\newcommand{\m}[1]{\ensuremath{{\sf m}}(#1)}
\newcommand{\ci}[1]{\ensuremath{{\sf c}}(#1)}
\newcommand{\prEv}[1]{\ensuremath{{\sf pr}}(#1)}
\newcommand{\ESP}[1]{\ensuremath{\mathcal{S^P}(#1)}}
%\newcommand{\ESP}[1]{\ensuremath{\mathcal{S^P}(#1)}}
\newcommand{\ESPA}[1]{\ensuremath{\mathcal{S^P_A}(#1)}}
\newcommand{\AESP}[1]{\ensuremath{\mathcal{S}_{\mathcal{{A}}}^{\mathcal{P}}(#1)}}
\newcommand{\ESN}[1]{\ensuremath{\mathcal{S}^{\mathcal{N}}(#1)}}
\newcommand{\ESNA}[1]{\ensuremath{\mathcal{S}^{\mathcal{N}}_{\mathcal{{A}}}(#1)}}
%%Set of network events
\newcommand{\ESet}{\ensuremath{\mathcal{X}}}
\newcommand{\GSet}{\ensuremath{\mathcal{Y}}}
\newcommand{\ESNstar}[1]{\ensuremath{\mathcal{S}_{*}^{\mathcal{N}}(#1)}}
\newcommand{\ESG}[1]{\ensuremath{\mathcal{S}^{\mathcal{G}}(#1)}}
\newcommand{\ESGA}[1]{\ensuremath{\mathcal{S}^{\mathcal{G}}_{\mathcal{A}}(#1)}}
\newcommand{\emptyseq}{\ensuremath{\epsilon}}
\newcommand{\eqdef}{\ensuremath{{=_{\sf def}}}}
\newcommand{\length}[1]{\ensuremath{\sf length(#1)}}
\newcommand{\mEs}[1]{\ensuremath{\sf mEs(#1)}}
\newcommand{\mxPr}[1]{\ensuremath{\sf mxPr(#1)}}
\newcommand{\inpk}[5]{#1_k?\SigmaB_{#2\in#3}\Seq{#4_#2}{#5_#2}}
\newcommand{\Conf}[1]{\ensuremath{\mathcal{C}(#1)}}
\newcommand{\CD}[1]{\ensuremath{\mathcal{D}(#1)}}
\newcommand{\ic}[2]{\ensuremath{{\sf ic}}(#1,#2)}
\newcommand{\polar}[1]{\ensuremath{{\sf polar}(#1)}}
\newcommand{\mess}[1]{\ensuremath{{\sf msg}(#1)}}
%% file proof
\newcommand{\IC}[1]{\ensuremath{{\sf IC}}(#1)}
\newcommand{\A}{\ensuremath{{\mathcal A}}}
\newcommand{\p}[2]{\ensuremath{{\sf p}}(#1,#2)}
\newcommand{\B}{\ensuremath{{\mathcal B}}}
\newcommand{\comm}[1]{\ensuremath{{\sf cm}}(#1)}
\newcommand{\io}[1]{\ensuremath{{\sf i/o}}(#1)}
\newcommand{\last}[1]{\ensuremath{{\sf last}}(#1)}
\newcommand{\Occ}[1]{\ensuremath{\mathsf{Occ}(#1)}}
\newcommand{\Occpos}[1]{\ensuremath{\mathcal{O}(#1)}}
\newcommand{\provseq}[1]{\ensuremath{{\sf provseq}}(#1)}
\newcommand{\evseq}[1]{\ensuremath{{\sf evseq}}(#1)}
\newcommand{\gns}[1]{\ensuremath{{\sf gns}}(#1)}
\newcommand{\trunc}[2]{\ensuremath{#1\rfloor_{#2}}}
\newcommand{\cptrunc}[2]{\ensuremath{\widehat{#1\rfloor_{#2}}}}
\newcommand{\pathsend}[1]{\ensuremath{{\sf path}_{{\sf send}}(#1)}}
\newcommand{\pathrcv}[1]{\ensuremath{{\sf path}_{{\sf rcv}}(#1)}}
\newcommand{\cps}[2]{\ensuremath{{\sf cp}_{#2}(#1)}}
%%versione N
\newcommand{\nec}[1]{\ensuremath{{\sf nec}(#1)}}
\newcommand{\gec}[1]{\ensuremath{{\sf gec}(#1)}}
\newcommand{\necA}[1]{\ensuremath{{\sf nec}_{\mathcal A}(#1)}}
\newcommand{\gecA}[1]{\ensuremath{{\sf gec}_{\mathcal A}(#1)}}
% \rem: In conflitto macro lmcs ma mai usato
%\newcommand{\rem}[2]{\ensuremath{{\sf post}(#1,#2)}}
\newcommand{\remm}[2]{\ensuremath{{\sf pre}(#1,#2)}}
\newcommand{\postS}[2]{\ensuremath{#2\,\blacklozenge\!\blacklozenge\,#1}}
\newcommand{\preS}[2]{\ensuremath{#2\,\lozenge\!\lozenge\,#1}}
\newcommand{\postP}[2]{\ensuremath{{#2}\,\blacklozenge\,{(#1)}}}
\newcommand{\preP}[2]{\ensuremath{{#2}\,\lozenge\,{(#1)}}}
\newcommand{\post}[2]{\ensuremath{{#2}\,\blacklozenge\,{#1}}}
\newcommand{\pre}[2]{\ensuremath{{#2}\,\lozenge\,{#1}}}
\newcommand{\postPA}[2]{\ensuremath{{#2}\,\blacklozenge_{\mathcal A}\,{(#1)}}}
\newcommand{\prePA}[2]{\ensuremath{{#2}\,\lozenge_{\mathcal A}\,{(#1)}}}
\newcommand{\postA}[2]{\ensuremath{{#2}\,\blacklozenge_{\mathcal A}\,{#1}}}
\newcommand{\preA}[2]{\ensuremath{{#2}\,\lozenge_{\mathcal A}\,{#1}}}
\newcommand{\postG}[2]{\ensuremath{{#2}\bullet{#1}}}
\newcommand{\postGA}[2]{\ensuremath{{#2}\bullet_{\mathcal A}{#1}}}
\newcommand{\preG}[2]{\ensuremath{{#2}\circ{#1}}}
\newcommand{\preGA}[2]{\ensuremath{{#2}\circ_{\mathcal A}{#1}}}
%%Spazi

%%permutazione
\newcommand{\perm}[1]{\ensuremath{\rho(#1)}}
\newcommand{\permprime}[1]{\ensuremath{\rho'(#1)}}
\newcommand{\rp}[1]{\ensuremath{\rho''(#1)}}

%%Permutation Semantics
\newcommand{\lps}{\Lambda}
\newcommand{\pcL}{\parN_{\rm L}}
\newcommand{\pcR}{\parN_{\rm R}}
\newcommand{\pair}[2]{(#1,#2)}
\newcommand{\lab}[1]{\ell(#1)}
\newcommand{\lpc}{\theta}
\newcommand{\slpc}{\Theta}
\newcommand{\NC}[1]{{\mathcal NC}(#1)}
\newcommand{\PS}[1]{{\mathcal PS}(#1)}
\newcommand{\ec}[1]{[\![#1]\!]}
\newcommand{\simOut}{\approx}
\newcommand{\eqclassOut}[1]{\ensuremath{[#1]_{\simOut}}}
\newcommand{\finOut}[2]{\ensuremath{\sf endOut}(#1,#2)}
\newcommand{\pref}[2]{#1\circ#2}

%%Coinduction
\newcommand{\coDefGr}{::=^{coind}}
\newcommand{\defGr}{::=^{ind}}
\newcommand{\coDefFn}{=^{coind}}
\newcommand{\labInp}[1]{#1?}
\newcommand{\labOutp}[1]{#1!}
\newcommand{\labChoice}[2]{\GlSyB#1\to#2}
\newcommand{\GP}{{\G}}

%%Asyncronous types
\newcommand{\CtxG}{{\mathcal{E}}}
\newcommand{\holeG}{{[\,]}}
\newcommand{\syPrefix}[3]{#1\to#2: #3}
\newcommand{\asPrefix}[3]{#1\rightsquigarrow#2: #3}
\newcommand{\gtAs}[4]{\Seq{\asPrefix{#1}{#2}{ #3}}{#4}}
\newcommand{\asCom}{\beta}
\newcommand{\FPaths}[1]{{\sf Tr^+}(#1)}
\newcommand{\IPaths}[1]{{\sf Paths}(#1)}
\newcommand{\ipth}{\xi}
\newcommand{\confAs}[2]{#1\parN#2}
\newcommand{\Msg}{\mathcal{M}}
\newcommand{\addMsg}[2]{#1\cdot #2}
\newcommand{\CtxTy}{\mathcal{C}}
\newcommand{\InCtxTy}[1]{\CtxTy[#1]}
\newcommand{\CtxHole}{[\,]}

%nuovo asincrono
\newcommand{\repm}[3]{{ \sf rem}(#1,#2, #3)}
\newcommand{\Repm}[3]{{\mathcal R}(#1,#2, #3)}
\newcommand{\projM}[1]{#1\Downarrow}
\newcommand{\nr}[1]{{\sf n}(#1)}
\newcommand{\nri}[2]{{\sf n}_{#1}(#2)}
\newcommand{\agtO}[6]{#1!#2:\boxplus_{#3\in #4}#5_#3;#6_#3}
\newcommand{\agtI}[4]{#1?#2:#3;#4}
\newcommand{\agtOS}[4]{#1!#2:#3;#4}
\newcommand{\agtIS}[3]{#1?#2:#3}
\newcommand{\agtSOS}[3]{#1!#2:#3}
\newcommand{\agtOCtx}[7]{#1!#2:\boxplus_{#3\in #4}#5_#3;#7_#3[#6]}
\newcommand{\nom}[2]{{\sf nom}(#1,#2)}
\newcommand{\BB}{\mathcal B}
\newcommand{\openP}[1]{{\mathcal O}_{#1}}

\newcommand{\derSI}[2]{\vdash^{si} #2}
\newcommand{\derPI}[2]{\vdash^{pi} #2}
\newcommand{\der}[2]{ #1\vdash^{?}#2}
%%%%%%% ILARIA %%%%%%%%%%%

\newcommand{\myhrule}{\bigskip\hrule\bigskip}
\newcommand{\projnet}[2]{{\sc proj}_{#1}(#2)}
\newcommand{\projnetfun}[1]{{\sc proj}_{#1}}
\newcommand{\ascom}{io}
\newcommand{\Traces}[1]{\mathcal T(#1)}


%%Macro Comm precedenti
%\newcommand{\CommAs}[3]{#1#3{\vartriangleleft}#2}
%\newcommand{\CommAsI}[3]{#1#3{\vartriangleright}\!#2}
%\newcommand{\Comm}[3]{#1#3{\vartriangleleft\!\vartriangleright}#2}
\newcommand{\mq}[3]{\langle#1,#2,#3\rangle}

%%Macro Comm nuove
\newcommand{\CommAs}[3]{#1#3!#2}
\newcommand{\CommAsI}[3]{#1#3?#2}
\newcommand{\Comm}[3]{#1#3#2}%{#1#3!?#2}
\newcommand{\CommB}[3]{#1#3\!\dagger\!#2}

\newcommand{\depth}[1]{\ensuremath{{\sf cd}}(#1)}
\newcommand{\pol}[1]{\ensuremath{{\sf pol}}(#1)}
\newcommand{\msgcont}[1]{\ensuremath{{\sf msg}}(#1)}

 \newcommand{\whatever}{nice}

 \newcommand{\rank}{\ensuremath{{\it rank}}}
 \newcommand{\hr}{{\it hr}}
\newcommand{\ncut}{{\it nc}}

\newcommand{\os}{\omega}
\newcommand{\sq}{\,\square\,}
\newcommand{\pent}{\,\pentagon\,}

\newcommand{\loc}[1]{\ensuremath{{\sf loc}(#1)}}
\newcommand{\ind}[2]{#1\varcurlyvee#2}
%\newcommand{\ct}[3]{#1\prec^{#2}\!\!#3}
\newcommand{\ct}[3]{#1\propto^{\,#2}\!\!#3}
%\newcommand{\notct}[3]{#1\not\prec^{#2}\!#3}
\newcommand{\notct}[3]{#1\not\propto^{\,#2}\!#3}
% \newcommand{\oks}[2]{{\sf ok}(#1,#2)}
% \newcommand{\okss}[3]{\ensuremath{{\sf ok}(#1,#2,#3)}}
\newcommand{\oks}[2]{{\sf req}(#1,#2)}
\newcommand{\okss}[3]{\ensuremath{{\sf req}(#1,#2,#3)}}
\newcommand{\pairA}[2]{\langle#1,#2\rangle}
\newcommand{\eqA}[2]{[#1,#2]_\sim}
\newcommand{\eqAc}[1]{[#1]_\cong}
\newcommand{\nf}{{\sf nf}}
\newcommand{\point}{{\sf ev}_{\mathcal A}}
\newcommand{\osq}[1]{\ensuremath{{\sf osq}(#1)}}
\newcommand{\bq}[2]{#1\,@\,#2}
\newcommand{\pro}[2]{#1\,@\,#2}
\newcommand{\projo}[2]{#1\downarrow_o#2}
\newcommand{\proji}[2]{#1\downarrow_i#2}
\newcommand{\projoG}[2]{#1\downarrow_o#2}
\newcommand{\projiG}[2]{#1\downarrow_i#2}

\newcommand{\mask}[2]{#1\backslash #2}
\newcommand{\ev}[1]{\ensuremath{{\sf ev}(#1)}}
\newcommand{\evA}[1]{\ensuremath{{\sf ev}_{\mathcal A}(#1)}}
 \newcommand{\projS}[2]{#1 @   #2\,}%{#1 \!  \looparrowright   #2\,}
 
 
 
 
\newcommand{\at}[2]{#1[#2]}

\newcommand{\range}[3]{#1[#2\,...\,#3]}

\newcommand{\rangecc}[3]{#1[#2\,...\,#3]}
\newcommand{\rangeco}[3]{#1[#2\,...\,#3\,[}
\newcommand{\rangeoc}[3]{#1]\,#2\,...\,#3]}
\newcommand{\rangeoo}[3]{#1]\,#2\,...\,#3\,[}

\newcommand{\cardin}[1]{\!\!\pc\! #1\!\pc\!}
\newcommand{\mult}[2]{\ensuremath{{\sf m}(#1, #2)}}
\newcommand{\ppb}[3]{\ensuremath{{\sf p}(#1, #2,#3)}}
\newcommand{\sbn}[3]{\ensuremath{{\sf s}(#1, #2,#3)}}

\newcommand{\occ}[2]{\ensuremath{#1\!\in\!\in\!#2}}
\newcommand{\tr}[2]{\ensuremath{#1\! \searrow \!#2}}
\newcommand{\dagL}[2]{#1\!\dagger\! #2}
\newcommand{\prR}[3]{(#1,#2)\in\downarrow_#3}
\newcommand{\RR}{{\mathcal R}}
\newcommand{\iR}[3]{(#1,#2)\in #3}

\newcommand{\precdot}{\ensuremath{\prec\!\!\!\cdot\,\,}}

\newcommand{\REN}{{\mathcal RT}}
\newcommand{\RT}{{\mathcal RT}}

\newcommand{\causpre}[3]{\ensuremath{{\sf pre}}(#1,#2,#3)}
\newcommand{\PEN}{{\mathcal RS}}
\newcommand{\RS}{{\mathcal RS}}

\newcommand{\causpost}[3]{\ensuremath{{\sf post}}(#1,#2,#3)}

\newcommand{\Causpre}[2]{\ensuremath{{\sf PRE}}(#1,#2)}

\newcommand{\EvSet}{\ensuremath{Ev}}

\newcommand{\qedhere}{}

\newenvironment{lemmaa}[2]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries Lemma #1}] {#2} \it}{\end{trivlist}}
