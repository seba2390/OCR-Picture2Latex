% !TEX root = XStreamFull.tex
%We present an algorithm for maintaining connected components of a graph arriving as an infinite stream of edges. % JWB: this sentence seems too narrow; we present much more than just an algorithm.
Motivated by the properties of unending real-world cybersecurity streams, we present a new graph streaming model: \XStreamns. In this model, we maintain a streaming graph and its connected components at single-edge
granularity: every edge insertion could be followed by a query related to
connectivity.

In cybersecurity graph applications, the input stream typically consists of
edge insertions; individual deletions are not explicit.
Analysts will maintain as much history as possible and will trigger
customized bulk deletions when necessary for reasons related to storage
and/or systems management.
Despite a significant variety of dynamic graph processing systems and
some canonical literature on theoretical sliding-window graph streaming,
\XStream is the first
model explicitly designed to accommodate this usage model. Users can
provide boolean predicates to define bulk deletions, and \XStream will
operate through arbitrary numbers of applications of these events,
never filling up.  Queries are not allowed during
these bulk deletions, but edge arrivals are expected to occur continuously and
must always be handled.

\XStream is implemented via a ring of finite-memory processors. We give detailed algorithms for the system to maintain connected components on the input stream, answer queries about connectivity, and to perform bulk deletion. The system
requires bandwidth for internal messages that is some constant factor
greater than the stream arrival rate. 
%Since an infinite stream may eventually exceed the storage capacity of the system, we also present algorithms and analysis for an aging procedure, through which some set of edges can be removed from the system and the connectivity structures repaired. 
%Queries are not processed during aging, but no incoming edges are ever dropped.
 We prove a relationship among
four quantities: the proportion of query
downtime allowed, the proportion of edges that survive an 
aging event, the proportion of duplicated edges,
and the bandwidth expansion factor.

In addition to presenting the theory behind \XStreamns, we present
computational results for a single-threaded prototype implementation.
Stream ingestion rates are bounded by computer architecture.
We determine this bound for \XStream inter-process message-passing rates in
Intel TBB applications on Intel Sky Lake processors: between one
and five million graph edges per second.  Our compute-bound, single-threaded
prototype runs our full protocols through multiple aging events
at between one half and one a million edges per second, and we give
ideas for speeding this up by orders of magnitude.
%X-Stream is the first system that can process at
%a rate of roughly one million edges per second on current hardware while
%supporting exact connectivity queries at the single-edge level of granularity.


%To allow the finite ring of processors to approximate an infinite ring, the system may need to empty a processor of edges by moving them to the other members of the ring. 
