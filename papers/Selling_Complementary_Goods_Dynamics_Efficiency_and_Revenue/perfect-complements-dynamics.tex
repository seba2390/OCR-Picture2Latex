\documentclass[11pt,a4paper]{article}


\usepackage{amssymb}
\usepackage{amsfonts}
%\usepackage{natbib}
\usepackage{amsmath}

%\usepackage[onehalfspacing]{setspace}
\usepackage{multirow}
\usepackage[left=1.00in, right=1.00in, top=1.00in, bottom=1.00in]{geometry}


%\usepackage{fullpage}

\usepackage{color-edits}

\addauthor{mb}{red}
\addauthor{lb}{blue}
\addauthor{nn}{green}

\newcommand{\qed}{\rule{1.5mm}{2mm}\vspace{0.1in}}
\newenvironment{proof}{\par\noindent{\bf Proof:}}{\qed}

\newcommand{\D}{\mathcal{D}}


\newcommand{\ignore}[1]{}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{observation}[theorem]{Observation}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}


% Document starts
\begin{document}

\title{Selling Complementary Goods:\\ Dynamics, Efficiency and Revenue}
\author{Moshe Babaioff\footnote{Microsoft Research }  
$\;$ and
Liad Blumrosen\footnote{School of Business Administration, The Hebrew University } 
$\;$ and
%\affil{Hebrew University}
Noam Nisan\footnote{School of Engineering and Computer Science, The Hebrew University and Microsoft Research}
%\affil{Hebrew University and Microsoft Research}
}

\date{}
\maketitle

\begin{abstract}
We consider a price competition between two sellers of perfect-complement goods.
Each seller posts a price for the good it sells, but the demand is determined according to the sum of prices. This is a classic model by Cournot (1838), who showed that in this setting a monopoly that sells both goods is better for the society than two competing sellers.
%\mbcomment{Some people that only knows Cournot's work on competition by quntities might thing we are crazy. Maybe say something like ''This is a classic, yet less known, model by Cournot (1838),... ''}

We show that non-trivial pure Nash equilibria always exist in this game.
We also % prove bounds on the ``Price of Stability'' that
quantify Cournot's observation
%\mbedit{that splitting a monopoly to two complementary sellers is worse to sociaty and to the sellers, studying equilibirum welfare and revenue comapred} %
with respect
to  both the optimal welfare and the monopoly revenue.
We then prove a series of mostly negative results regarding the convergence of best response dynamics to equilibria in such games.
\end{abstract}

\maketitle


\section{Introduction}
\input{sec-intro}


\section{Model and Preliminaries}
%\subsection{Model}
\label{sec:model}

We consider two sellers, each selling a single, homogeneous, divisible good.
The sellers have zero manufacturing cost for the good they sell, and an unlimited supply is available from each good.
All the buyers in the economy are interested in bundles of these two goods, and the goods are perfect complements for the buyers.
%\mbcomment{changes below!}
That is, each buyer only demands a bundle consists of two goods,
%one from each seller,
in equal quantities\footnote{This actually assumes that the ratio of demand of the two goods is fixed, as we can normalized the units to assume that it is $1$ for both.},
and there is no demand for each good separately.
% Formally, the utility of a buyer with value $v_i$ per pair when getting $x$ units of the first good, and
The demand for the bundle of the two goods is given by
a demand function $\mathcal{D}(\cdot)$, where $\mathcal{D}(p)\in \mathbb{R}_+$ is the quantity
of each of the two goods which is demanded when the price for one unit of the bundle of the two goods is $p\in \mathbb{R}_+$.
%\textbf{Liad: we can define the demand more formally, as $u(x,y)=min(x,y)v_i$ or similarly, but this might be already clear from the intro}.
%\mbcomment{I think this is not acurate as we assume that each buyer wants only one pair. I have tried to be more explicit above and suggest skipping this addition. }

The sellers simultaneously offer prices for the goods they sell. Each seller offers a single price, and cannot discriminate between buyers.
If the two prices offered by the sellers are $p$ and $q$ then  $p+q$ is the {\it total price} and the demand in this market is $\mathcal{D}(p+q)$.
The revenue of the seller that posts a price $p$ is thus $p\cdot \mathcal{D}(p+q)$, the revenue of the second seller is $q\cdot \mathcal{D}(p+q)$ and the total revenue
of the two selling firms is denoted by $R(p+q)= (p+q)\cdot \mathcal{D}(p+q)$.
The maximal revenue that a monopoly that owns the two sellers can achieve
is $\sup_x x\cdot \mathcal{D}(x)$ and we use $p^*$ to denote a monopolist price.\footnote{
Our paper considers demand functions for which the monopoly revenue is attained and a monopolist price exists.	
When there is more than one price that maximizes the monopoly profit, our claims regarding $p^*$ will hold for each one of these prices. When necessary, we will treat the different prices separately.
}

\vspace{2mm}

\noindent \textbf{Discrete Demand Levels:}
In this paper we consider discrete demand curves, where potential buyers only have $n\geq 2$ different values denoted by $\vec{v}$, such that $v_1 > v_2 > \cdots > v_n>0$.
The demand at each price $v_i$ is denoted by $d_i=\mathcal{D}(v_i)$, and assuming a downward sloping demand curve we get that $\vec{d}$ is increasing, that is,
$0<d_1<d_2<\cdots<d_n$.
For convenience, we define $v_0=\infty$ and $d_0=0$.
The parameter $n$ is central in our analysis and
it denotes the number of \emph{demand levels} in the economy.
Another parameter that we frequently use is the
\emph{total demand} $D$, which is the ratio between the highest and lowest demand at non-zero prices, that is $D=d_n/d_1$.
In other words, $D$ is
the maximal demand $d_n$ measured in units of the minimal non-zero demand $d_1$ (Note that $D>1$).
% Note that $D>1$. %  and that if for every $i$ the demand $d_i$ is an integer then  $n\leq D$.
The \emph{social welfare} in the economy is the total value generated for the consumers. The social welfare, given a total price $x$, is
 $SW(x)= \sum_{i | x<v_{i}} v_i (d_{i}-d_{i-1})$, and the optimal welfare is $SW(0)=\sum_{i=1}^{n} v_i (d_{i}-d_{i-1})$.
%liad: I removed the notation OPT.

\vspace{2mm}

\noindent \textbf{Strategies and Equilibria:}
The sellers engage in a price competition.
We say that $p$ is a \emph{best response} to a price $q$ of the other seller if $p\in  argmax_{p'} \  p'\cdot \mathcal{D}(p'+q)$, and let the set of all best responses to $q$ be $BR(q)$.
We consider the pure Nash equilibria (NE) of this full-information pricing game.
A pure Nash equilibrium is a pair of prices such that each price is a best response to the other price, that is, $(p,q)$  such that  $p\in BR(q)$ and $q\in BR(p)$.

It is easy to see that NE always exist in this game, but unfortunately some of them are trivial and no item is sold, and thus their welfare is zero;
For example, $(\infty,\infty)$ is always an equilibrium with zero welfare and revenue.
We will therefore focus on a subset of NE that are {\em non-trivial}, i.e., where some quantity is sold.
%A sufficient condition that ensures existence of such equilibria is for the pricing to be \emph{''non-malicious"},  where a seller with zero revenue prices only at 0.
It is not immediate to see that non-trivial % non-malicious
equilibria exist, and we will begin by proving (in Section \ref{sec:existence}) that such equilibria indeed always exist.
On the other hand, we will show that
multiplicity of equilibria is a problem even for this restricted set of equilibria, as there might be an extreme variance in their revenue and efficiency.
%We denote the set of all non-trivial pure Nash equilibria by $NE$.

%The demand consist of price-taker potential buyers that accept any price below their value.
%
%We consider two sellers, each selling an homogeneous good, has zero manufacturing cost and unlimited supply.\footnote{The model actually captures the general case in which each seller has an arbitrary non-negative cost to produce each item - in this case the value we use is just the additional value that society gains from each trade: the value of the buyer for the pair minus the total cost of the to sellers for that pair. Yet, notice that if the cost per pair is not constant, the number of demand levels might change.}
%The two goods are perfect complements for all buyers.
%In an instance of the discrete demand case, there are $n\geq 2$ different values $v_1 > v_2 > \cdots > v_n>0$, and the demand for pairs of good at the price $v_i$ is
%$d_i$ such that $0<d_1<d_2<\cdots<d_n$.
%We denote $d_i=\mathcal{D}(v_i)$ where $\mathcal{D}(\cdot)$ is the demand function at a given price for the pair of goods.
%For convenience define $v_0=\infty$ and $d_0=0$.
%
%We use $\vec{v},\vec{d}$ to denote an instance with demands given by vectors $\vec{v}$ and $\vec{d}$ of length $n$, and say that the instance has $n$ {\it demand levels}.
%When the instance is clear from the context we will not makes the dependence on the instance explicit.
%The number of demand levels will be a useful parameter is stating our results, but it turns out that there is one additional parameter, which we call {\em total demand} and denote by $D$, that turns out to be important.
%The  total demand $D$ is defined to be $D=d_n/d_1>1$ and is
%the ratio between the highest and lowest demand at non-zero prices (the maximal demand $d_n$ measured in units of the minimal non-zero demand $d_1$).
%Note that if for every $i$ the demand $d_i$ is an integer then  $n\leq D$.
%% We also define $W=\frac{d_n}{min_{i=1}^n d_i-d_{i-1}}$ to be the ratio between the maximal demand, and the minimal change in demand, and note that $W\geq D$ and additionally, if $d_1=1$ and every $d_i$ is an integer, then $W=D$.
%
%Sellers play by posting non-discriminatory prices.
%We use $(p,q)$ to denote the pair of prices posted by the two sellers and call $p+q$ the {\it total price}.
%The demand for that pair of prices is $\mathcal{D}(p+q) = \{d_i\ s.t.\  v_{i}\geq p+q> v_{i+1}\}$.
%Give a pair of prices $(p,q)$ the revenue of a first seller is $p\cdot \mathcal{D}(p+q)$ and the revenue of a second seller is $q\cdot \mathcal{D}(p+q)$.
%The revenue given some total price $z=p+q$ is $R(z)= z\cdot \mathcal{D}(z)$.
%
%We say that $p$ is a best responses to $q$ and denote $p\in BR(q)$ if $p\in  argmax_{p'} \  p'\cdot \mathcal{D}(p'+q)$ and it holds that $p=0$ if $max_{p'} \  p'\cdot \mathcal{D}(p'+q)=0$ (non malicious), and we make the similar definitions for $q$.
%{\bf MOSHE: note that there might be multiple best responses  for the same price. We should check that our proofs do not implicitly assume there is only one best response. }
%The (total) revenue for  $(p,q)$ is $R(p,q)= R(p+q)= (p+q)  \cdot \mathcal{D}(p+q)$. The revenue of the monopolist is $R_{mon}=\max_x x\cdot \mathcal{D}(x)$ and we use $p^*$ to denote a monopolist price. The welfare with total price $x$ is $SW(x)= \sum_{i | x<v_{i}} v_i (d_{i}-d_{i-1})$, and the optimal welfare is $OPT=SW(0)$.
%
%We consider pure Nash equilibria in the game in which the sellers simultaneously post prices as well as the results of various versions
% of best responses dynamics of the sellers.
%We note that as $(\infty,\infty)$ is always and equilibrium of zero welfare and revenue,
%so we focus only on ''non-malicious'' behavior in which a seller with utility 0 prices at 0.
%Let $NE$ be the set of Nash equilibrium pair of prices, such that the price of every seller is 0 if his utility is 0 (non-malicious).
%That is $NE = \{ (p,q) | p\in BR(q), q\in BR(p) \}$.
%We care both about the social welfare and the revenue in different equilibria that might be reached by the sellers.
%Additionally, we are interested in the gap in equilibria welfare and revenue with respect to the optimal welfare and the revenue of the monopolist.

\ignore{
{\bf Moshe: this should move from here: } For a given value and demand vectors $\vec{v},\vec{d}$,
the welfare Price of Anarchy is $POA_{SW} (\vec{v},\vec{d}) = \sup_{(p,q)\in NE} \frac{OPT}{SW(p+q)}$, and the welfare Price of
Stability is $POS_{SW} (\vec{v},\vec{d}) = \inf_{(p,q)\in NE} \frac{OPT}{SW(p+q)}$.
The revenue Price of Anarchy is $POA_{REV}(\vec{v},\vec{d})  = \sup_{(p,q)\in NE} \frac{R_{mon}}{R(p+q)}$ and
the revenue Price of Stability is $POA_{REV}(\vec{v},\vec{d})  = \inf_{(p,q)\in NE} \frac{R_{mon}}{R(p+q)}$.
When presenting a bound on the POA or POS without explicit mentioning on the instance, we mean that the bound holds for any instance.
For example, a bound of the form $POS_{SW} = \Theta(D)$ means that for every $\vec{v},\vec{d}$ with total demand $D$ it holds that
$POS_{SW}(\vec{v},\vec{d}) = O(D)$, and that for every total demand $D$, for some instance $\vec{v},\vec{d}$ with total demand $D$, it holds that $POS_{SW}(\vec{v},\vec{d}) = \Omega(D)$.
}

% {\bf MOSHE: there is another ratio that might be of interest and I do not recall studied in the past; ratio of welfare or revenue of the best and worst NE. Was this studied before?!?}

%
%We remark that it is not clear how many non-malicious Nash equilibria there are.
%On one hand, it is not obvious that such equilibria exist at all, and on the other hand, there may be many such equilibria, some of them very inefficient. We later show that non-malicious NE indeed exist, and can be found in time linear in $n$.


%\section{Price of Anarchy}

\subsection{Basic Equilibrium Properties}

We now describe some basic structural properties of equilibria in the pricing game between sellers of complement goods. We use these properties throughout the paper.

We start with a simple observation claiming that all best response dynamics lead to a total price which is exactly one of the demand values.
This holds as otherwise any seller can slightly increase his price, selling the same quantity and increasing his revenue.

\begin{observation}
	\label{obs:BR-price-is-value}
	Let $x\leq v_1 $ be some price offered by one seller, and $BR(x)$ be a best response of the other seller to the price $x$. Then, it holds that $x+BR(x)=v_i$ for some $i\in \{1,...,n\}$.
	In particular, for every pure non-trivial NE $(p,q)$, it holds that $p+q=v_i$ for some $i$.
\end{observation}


Next, we prove a useful lemma claiming that the set of equilibria with a particular total price is convex.
Intuitively, the idea in the proof is that a seller with a higher offer cares more about changes in the demand than a seller with a lower offer. Therefore, if the seller with the higher offer decided not to deviate to an increased price, clearly the other seller would not deviate as well. The proof of the lemma appears in appendix \ref{app:eq-are-convex}.
% \begin{observation}
%	If $(p,q)$ is a pure NE, then for any $x\in [\min \{p,q\}, \max \{p,q\}]$ it holds that $(x, p+q-x)$ is also a pure NE.
%	In particular, $((p+q)/2, (p+q)/2)$ is also a pure NE.
% \end{observation}
	
\begin{lemma}
%	\label{lem:equal-split}
	\label{obs:total-price-convex}
%	If $(p,q)$ is a pure NE, then for any
%	$x\in [\min \{p,q\}, \max \{p,q\}]$ it holds that $(x, p+q-x)$ is also a pure NE.
%liad feb17 reworded a bit
If $(p,q)$ is a pure NE then $(x, p+q-x)$ is also a pure NE for every
$x\in [\min \{p,q\}, \max \{p,q\}]$.
	In particular, $((p+q)/2, (p+q)/2)$ is also a pure NE.
\end{lemma}
%\begin{proof}
%	We assume WLOG that $p<q$. Assume by contradiction that $(x, p+q-x)$ is not a pure NE. Then, for some $\Delta>-x$, it holds that $\mathcal{D}(p+q+\Delta)\cdot (\Delta+x)> \mathcal{D}(p+q) \cdot x$, or equivalently,
%	\begin{align*}
%	\mathcal{D}(p+q+\Delta)\cdot \Delta> (\mathcal{D}(p+q)- \mathcal{D}(p+q+\Delta))\cdot x.
%	\end{align*}
%	
%	We will show that if this beneficial deviation had been to a higher (lower) price, then the same deviation would have been beneficial to the player that offered the lower (higher) price in the equilibrium $(p,q)$.
%	
%	If $\Delta>0$ then increasing the price by $\Delta$ is also a beneficial deviation for $p$ when the profile is $(p,q)$ and $p<q$.
%	This holds since $\Delta>0$ and for the downward-sloping demand it holds that $\mathcal{D}(p+q)\geq \mathcal{D}(p+q+\Delta)$ and thus
%	\begin{align*}	
%	& \mathcal{D}(p+q+\Delta)\cdot \Delta\\
%	& > (\mathcal{D}(p+q)- \mathcal{D}(p+q+\Delta))\cdot x \\
%	& \geq  (\mathcal{D}(p+q)- \mathcal{D}(p+q+\Delta))\cdot p
%	\end{align*}
%	It follows that $\mathcal{D}(p+q+\Delta)\cdot (p+\Delta)> \mathcal{D}(p+q)\cdot p$ which implies that $p+\Delta$ is a beneficial deviation as claimed.
%	
%	If $\Delta<0$ then adding $\Delta$ to the price is also a beneficial deviation for $q$ when the profile is $(p,q)$. It holds that $\mathcal{D}(p+q)\leq \mathcal{D}(p+q+\Delta)$ ($\Delta<0$) and thus
%	\begin{align*}
%	& \mathcal{D}(p+q+\Delta)\cdot \Delta \\
%	&> (\mathcal{D}(p+q)- \mathcal{D}(p+q+\Delta))\cdot x\\
%	& \geq (\mathcal{D}(p+q)- \mathcal{D}(p+q+\Delta))\cdot q
%	\end{align*}
%	
%	We showed that $\mathcal{D}(p+q+\Delta)\cdot (q+\Delta)> \mathcal{D}(p+q)\cdot q$ which implies that $q+\Delta$ is a beneficial deviation as claimed.
%\end{proof}
	


We next observe that there is no conflict between welfare and revenue in equilibrium:
an equilibrium with the highest welfare also has the highest equilibrium revenue. This holds
since
%due to the fact that %liad shortened July 2016
equilibria with lower total price obtain higher revenue and welfare.
We can thus say that any equilibrium with minimal total price is the ``best" as it is as good as possible on both dimensions: welfare and revenue. Similarly,  any equilibrium with maximal total price is the ``worst".
\begin{proposition}
\label{obs:best-NE-well-defined}
	Both welfare and revenue of equilibria are monotonically non-increasing in the total price.
	Therefore, an equilibrium with the minimal total price has both the highest welfare and the highest revenue, among all equilibria.
	Similarly, an equilibrium with the maximal total price has both the lowest welfare as well as the lowest revenue, among all equilibria.
\end{proposition}
\begin{proof}
	Consider two equilibria, one with total price $v$ and the other with total price $w>v$. The claim that the welfare is non-increasing in the total price follows immediately from the definition.
	%We next show that the revenue $R(p)$ is monotonically non-increasing in the total price $p$, for any total price $p$ for which there is an equilibrium with that total price.	%liad Jan29: commented this as it is unclear
%To prove this claim
We will show that for $w>v$ it holds that $R(v)\geq R(w)$.
	
%	{\bf MOSHE: should we move observation \ref{obs:total-price-convex}  to appear earlier ? }
	
	Lemma \ref{obs:total-price-convex} shows that if there is an equilibrium with total price $p$ then $(p/2,p/2)$ is also an equilibrium. As $(v/2,v/2)$ is an equilibrium, it holds that deviating to $w-v/2$ is not beneficial for a seller, and thus
	$R(v)/2\geq (w-v/2)\mathcal{D}(w)\geq (w/2) \mathcal{D}(w)= R(w)/2$ and thus $R(v)\geq R(w)$ as claimed.
\end{proof}

Finally, we give a variant of a classic result by Cournot \cite{Cournot1838}, which shows, somewhat counterintuitively, that
a single monopolist that sells two complementary goods is better for the society than two competing sellers for each selling one of the good. %liad jan29: rephrased a bit
\begin{proposition}
	The total price in any equilibrium is at least as high as the minimal monopolist price $p^*$.
	Thus, the welfare and revenue achieved by the monopolist price $p^*$
	are at least as high as the welfare and revenue (resp.) of the best equilibria.
\end{proposition}
\begin{proof}
	Assume that there is an equilibrium with total price $p<p^*$. As $p^*$ is the minimal monopolist price it holds that $R(p)<R(p^*)$. Additionally, as there is an equilibrium with total price $p$ then by Lemma \ref{obs:total-price-convex} the pair $(p/2,p/2)$ is  an equilibrium, where each seller has revenue $R(p)/2$.
	As $p<p^*$ a seller might deviate to $p^*-p/2>p^*/2>0$, and since such deviation is not beneficial, it holds that
	$R(p)/2 \geq (p^*-p/2) \mathcal{D}(p^*)> (p^*/2) \mathcal{D}(p^*) = R(p^*)/2$ and thus $R(p)>R(p^*)$, a contradiction.

By Proposition \ref{obs:best-NE-well-defined}, it follows that the welfare and revenue achieved by the minimal monopolist price $p^*$ are no less than those in the best equilibrium.
\end{proof}


	
\section{Existence of Non-Trivial Equilibria}	
\label{sec:existence}
\input{sec-symmetrized.tex}

\section{Best Response Dynamics}
\label{sec:best-response}

In the previous section we saw that non-trivial NE always exist in our price competition model, and that the best equilibrium can be easily computed. We now turn to discuss whether we can expect agents in these markets to reach such equilibria via natural adaptive heuristics.
We consider the process of repeated best responses. Such a process starts from some profile of prices $(p,q)$, then the first seller chooses a price which is a best response to $q$, the second seller best responds to the price chosen by the first seller, and they continue in alternating order. The process stops if no seller can improve his utility by changing his price. As we aim for non-trivial equilibria, a seller that cannot gain a positive profit chooses the best response of zero.
A sequential best response process has simple and intuitive rules.
The main difference between different possible dynamics of this form is in their starting prices.
We will study the importance of the choice of starting prices.

Our results for best-response dynamics are negative: we show that starting from cartel prices might result in  bad equilibria. We then consider starting from random prices and show that this might not help.  Finally, we show that convergence time of the dynamics may be very long, even with only two demand levels.

% We first show that the dynamics might take long time to converge, time that is not bounded a function $n$ and $D$. Specifically, we show that even for only two demand levels, and even for $D$ close to $1$, the dynamics might take arbitrarily long time.  We show that the dynamics can take time that is linear in $W=\frac{d_n}{min_{i=1}^n d_i-d_{i-1}}$, the ratio between the maximal demand and the minimal change in demand. Note that $W\geq D$ and additionally, if $d_1=1$ and every $d_i$ is an integer, then $W=D$.

% {\bf Moshe: talk about the results we present:  unlikely convergence to good NE, and slow convergence. Liad: I added a sentence, pls check.}
% Moreover, we also present

\subsection{Quality of the Dynamics' Outcomes}
%\label{sec:best-response}

Probably the most natural starting prices to consider in best responses dynamics are $(0,0)$. We start with a simple example that shows that such dynamics might result in an equilibrium with very low welfare, even when another equilibrium with high welfare exists.
The gap between the quality of these equilibria is in the order of $D$ (in Appendix \ref{app:gaps-between-eq-tight} we show that this is the largest possible gap between equilibria).

\begin{example}
\label{obs:equal-split-2}
Consider a market with 2 demand levels, $v_1=2$, $v_2=1$, $d_1=1$ and $d_2=D$.
Here, a best response dynamics starting from prices $(0,0)$ moves to $(1,0)$ and then ends in equilibrium prices $(1,1)$. This NE has welfare of $2$,
while $(1/2,1/2)$ is an equilibrium with welfare of $D+1$ and revenue of $D$.

It follows that even with $2$ demand levels, the total revenue in the highest revenue equilibrium can be factor $D/2$ larger than both the welfare and revenue of the equilibrium reached by best-response dynamics starting from prices $(0,0)$.

%	Even with $n=2$ demand levels, the total revenue in the highest revenue equilibrium can be factor $D/2$ larger than both the welfare and revenue of the equilibrium reached by best-response dynamics starting from prices $(0,0)$.
\end{example}
%This follows from the construction in Observation \ref{obs:POA-d} with $v_1=2>v_2=1$ and $d_1=1<d_2=D$. For which best response dynamics starting from prices $(0,0)$ moves to $(1,0)$ and then ends in equilibrium prices $(1,1)$ which has welfare of only $2$,
%while $(1/2,1/2)$ is an equilibrium with welfare of $D+1$ and revenue of $D$.

%So we see that best response dynamics starting from prices $(0,0)$ might end in a low welfare equilibria, even when a much better equilibria exist. %liad jan29 commented
One might hope that starting the dynamics from a different set of prices will guarantee convergence to a good equilibrium.
Clearly, if the dynamics somehow starts from the prices of the best equilibrium it will immediately stop, but our goal is exactly to study whether the agents can adaptively reach such equilibria. %liad jan29 rephrased the sentence
%that is not an interesting starting point.
One can consider two reasonable approaches for studying the starting points of the dynamics: the first approach assumes that the sellers initially agree to act as a cartel and price the bundle at the monopolist price, dividing the monopoly profit among themselves. It is well known that such a cartel is not stable, and sellers may have  incentives to deviate to a different price; We would like to understand where such dynamics will stop.
The second approach considers starting from a random pair of prices, and hoping that there will be a sufficient mass of starting points for which the dynamics converges to a good equilibrium. We move to study the two approaches below.

%the first is starting from some natural prices that are function of the monopolist price - as splitting the monopolist price between the seller. The second approach is starting from a random pair of prices, and hoping that there will be many good starting point so the dynamic will likely ends at a good equilibrium. We move to study the two approaches below.

\subsubsection{Dynamics Starting at a Split of the Monopolist Price }

We now study best-response dynamics that start from a cartelistic solution: the total price at the starting stage is equal to the price a monopoly would have set had it owned the two selling firms.
In Example \ref{obs:equal-split-2}  we saw that splitting the monopolist price between the two sellers results in the best  equilibrium.
One may hope that this will generalize and such starting points ensure converging to good outcomes.
In Appendix \ref{app:cartel-prices-two-levels} we show that this is indeed the case for two demand levels.
%
%
%The first approach is starting the dynamics at some ''natural'' prices and hoping that the dynamics will end at a good equilibrium.
%The hope that the first approach might be able to ensure a good outcome comes from the Example \ref{obs:equal-split-2}:
%in that example, evenly splitting the monopolist price between the two sells results in the most efficient equilibrium.
%Will starting from this pair of prices always ensure that we end up in a good equilibrium?
%This is indeed the case for two demand levels.
%
%Can one prove similar results for more that two demand levels?
%
However, we next show that even with three demand levels, the welfare and revenue of the equilibrium reached by such best-response dynamics can be much lower than the revenue of the best equilibria. This holds not only when the two seller split the monopolist price evenly, but for any cartelistic split of this price. Proof can be found in Appendix \ref{app:cartel-prices}.

\begin{proposition}
	\label{obs:brd-3-lb}
	% For any $n\geq 3$ and
	For any large enough total demand $D$ there is an instance with $3$ demand levels and monopolist price $p^*$ for which best response dynamics
%\footnote{Note that starting from $(q-p^*,q)$ for $q\in [0,p^*]$ ensures convergence to low welfare equilibrium no matter which seller is the first to best response.}	%liad jan29 commented. I think that this is too detailed.
	starting from any pair  $(p^*- q,q)$ for $q\in [0,p^*]$, ends in an equilibrium of welfare and revenue of only $1$, while there exist another equilibrium of welfare and revenue at least $\sqrt{D}/4$.
% \mbcomment{We still need to show that this is tight in some sense.	But, seems like proving an upper bound requires a proof that the dynamics indeed converge to an equilibrium, which we do not have!	Noam's idea: show that the gap is not too large for every step of the dynamics. Liad: I think it is to confusing to state it to general $n$, maybe it is simpler to state it directly to 3.}
\end{proposition}

We conclude that starting from both sellers (arbitrarily) splitting the monopolist price does not ensure that the dynamics ends in a good equilibrium, even with only  three demand levels.
%We conclude that the first approach, of starting from some particular pair of prices that might be considered ''reasonable'', fails, and move to the second approach. %liad jan29 commented. This is problematic as there might be other prices.

\subsubsection{Dynamics Starting at Random Prices }

We now consider a second approach for studying the role of starting prices in best-response dynamics. We assume that the starting prices are determined at random, and ask what are the chances that a sequence of best responses will reach a good equilibrium.
Unfortunately this approach fails as well. We next show that for any $\epsilon>0$, there is an instance with only two demand levels for which the dynamics starting from a uniform random price vector in $[0,v_1]^2$ has probability of at most $\epsilon$ of ending in an equilibrium with high welfare and revenue (although such equilibrium exists).\footnote{
In Appendix \ref{app:dynamic-random-prices} we show that this result is essentially tight.
}
%, although there is another equilibrium of high revenue and welfare (of at least $\epsilon D$). %liad jan29 repeating the high welfare thing.

%The second approach is starting from uniform random prices
%%in $[0,v_1]^2$ %liad jan29 commented
%with the hope that a significant measure of starting price vectors
%%initial pairs
%will ensure convergence to good welfare equilibrium.
%% Assume without loss of generality that $v_1=1$.
%Unfortunately this approach fails as well. We next show that for any $\epsilon>0$, there is an instance with only two demand levels for which the dynamics starting from a uniform random pair in $[0,v_1]^2$ has probability of at most $\epsilon$ of ending in high welfare equilibrium, although there is another equilibrium of high revenue and welfare (of at least $\epsilon D$).


\begin{proposition}[High probability of convergence to bad equilibria, $n=2$]
	\label{obs:conv-bad-NE-n is 2}

	For any\\   small enough $\epsilon>0$ and total demand $D$ such that $\epsilon D>2$,
	there is an instance with two demand levels ($n=2$) that has an equilibrium of welfare and revenue of at least $\epsilon D$, but best-response dynamics starting with uniform random pair of prices
%\footnote{The claim is proven for the case that the first seller is the first to best response. If we pick the seller to first best response at random, or even adversarially, the probability of ending in a good equilibrium increase by at most factor of 2, so the qualitative result still holds. } %liad jan29 commented we discussed this
in $[0,v_1]^2$ ends in an equilibrium of welfare and revenue of only $1$ with probability at least $1-\epsilon$.
\end{proposition}
\begin{proof}
	Consider the input with $n=2$ demand levels satisfying $v_1=1> v_2=\epsilon$ and $d_1=1<d_2=D$. % Note that $D=1/\epsilon^2$.
	A pair of prices $(p,q)$ with $p+q=v_2$ results in welfare and total revenue of $\epsilon D$,
	and if $\epsilon D>2$, the pair $(v_2/2, v_2/2) $ is indeed an equilibrium.
	On the other hand, for small enough $\epsilon $ the pair of prices $(1/2,1/2)$ is also an equilibrium, and its welfare and revenue are only $1$. Finally, observe that unless the price that the first best response in dynamics refers to is at most $v_2=\epsilon$, the first best response results in an equilibrium with total price of $1$, and welfare and revenue of $1$. % , immediately after the first best response.
	The probability that the process stops after a single step is therefore at least
%$1-v_2= 1-\epsilon$, and the claim follows.
$1-\epsilon$, and the claim follows.
\end{proof}

%Proposition \ref{obs:brd-3-lb} shows that starting the dynamics from a split of the monopolist price might result in a low welfare equilibria, while Proposition \ref{obs:conv-bad-NE-n is 2} shows that starting from a best response to a price above the monopolist price might result in a low welfare equilibrium. %liad jan29 commented: this is out of context, and the second argument need to point to the proof.

Proposition \ref{obs:conv-bad-NE-n is 2} only gives high probability of convergence to a low welfare equilibrium, but this will not occur with certainty.
%that probability is still not $1$.
We next show that one can construct instances in which except of a measure zero %(finite)
set of starting prices, % for the best response dynamics,
every dynamics will end up in an equilibrium with very low welfare, although equilibrium with high welfare exists.
Moreover, we show that the welfare gap between the good and bad equilibria increases exponentially in the number of demand levels $n$.

\begin{theorem}[Almost sure convergence to bad equilibria, large $n$]
	\label{thm:almost-sure-bed}
	For any % total demand $D>1$,
	number of demand levels $n\geq 2$  and $\epsilon>0$ that is small enough,
	there exists an instance % with total demand $D$
	that has an equilibrium with welfare $2\cdot (2-\epsilon)^{n-1}-1 $ % $\frac{(2-\epsilon)^{n}-1}{1-\epsilon}$
	and revenue of $(2-\epsilon)^{n-1}$,
	but best response dynamics starting with pair of prices chosen uniformly at random over
	 $[0,v_1]^2$ almost surely ends in an equilibrium of welfare and revenue of only $1$. % with probability $1$.
\end{theorem}

%liad added July 2016
To prove the theorem, we build an instance where
the pair of prices $(v_i/2, v_i/2)$ forms an equilibrium for any $i$.
In this instance, the total revenue from a total price $v_i$ is $(2-\epsilon)^{i-1}$.
In particular, $(v_n/2, v_n/2)$ is an equilibrium that attains the monopolist revenue and the optimal welfare of $O((2-\epsilon)^n)$.
However, best response dynamics starting by best responding to any price
which is not \emph{exactly} $v_i/2$ (for some $i$)
terminates in an equilibrium with total price of $v_1=1$ and welfare of $1$. Thus, the set of pairs from which the dynamics does not end at welfare of $1$ is finite and has measure $0$, so the dynamics almost surely converges to the worst equilibrium. The full proof is in Appendix \ref{app:dynamic-random-prices-impossibility}.

\ignore{ % OLD: we decided this is not so interesting, and did not complete the proof:
We show that Theorem \ref{thm:almost-sure-bed} is tight by showing that if the probability of convergence to low welfare equilibrium is $1$, then the gaps presented in the theorem are essentially as large as possible.

\begin{observation}
	Fix an instance with $n$ demand levels. % and assume WLOG that $v_1=1$ and $d_1=1$.
	Assume that best response dynamics starting from uniform random pair of prices in $[0,v_1]^2$ ends in an equilibrium with welfare %\footnote{This normalization of the welfare to $1$ is without loss of generality.}
	of $Z$ with probability $1$,
	then the optimal welfare (and thus also the highest welfare and highest revenue in equilibrium) is at most $2^{n}\cdot Z$.
\end{observation}
\begin{proof}
	WLOG assume that $Z=1$.
	Let $v_k$ be the total price for which the dynamics converges with probability $1$, and for which the welfare is $1$. As welfare decreases in price, to upper bound the optimal welfare we focus on the welfare achieved by any total price $v_j<v_k$.
	
	We first note that by Lemma \ref{obs:total-price-convex}, if $(p,q)$ is a pure NE, then for any $x\in [\min \{p,q\}, \max \{p,q\}]$ it holds that $(x, p+q-x)$ is also a pure NE.
	Thus, if an uneven split of the value of a buyer is an equilibrium, then there is a continuum of equilibria.
	We argue that if an uneven split $(p,q)$ of a value smaller than $v_k$ is an equilibrium,
	it implies that the dynamics stops at total price $p+q$ and welfare larger than $1$, with positive probability.
	This is so as the dynamics starting from any pair $(x,y)$ such that $0\leq x\leq v_1$ and $y\in [\min \{p,q\}, \max \{p,q\}]$ ends at $(p+q-y,y)$ after a single best respond. Thus the probability of ending at welfare larger than 1 is at least  $ (\max \{p,q\}- \min \{p,q\})/v_1>0$.
		
	We conclude that if the dynamics ends at welfare of $1$ with probability $1$, the only pairs $(p,q)$ with $p+q< v_k$ that might be in equilibrium are even splits of some value $v_t$ for some $t>k$.
	We claim that this implies that the revenue from total price $v_{k+i-1}\leq v_k$ for $i\in \{1,2,\ldots, n+1-k\}$ is at most $R(v_k)\cdot 2^{i-1} = 2^{i-1} $.
	This is proven by induction on $i$.
	The claim is clearly true for $i=1$. Assume that for $i\geq 2$ it is true for any $j<i$, we prove this for $i$.
	Assume in contradiction that $R(v_{k+i-1})>2^{i-1}$, we aim to show that there is an uneven split of $v_{k+i-1}$ that is also an equilibrium, deriving a contradiction.
	
	If $R(v_{k+i-1})>2^{i-1}$ then for small enough $\epsilon>0$
	the revenue of each seller with an uneven  split $(\frac{v_{k+i-1}}{2} -\epsilon, \frac{v_{k+i-1}}{2} +\epsilon)$ is greater than $2^{i-2}$, which by the induction hypothesis is an upper bound for the combined revenue of both sellers with any total price $v_l$ for $k+i-1>l\geq k$, and thus there is no beneficial deviation to any such total price $v_l$ satisfying $v_{k+i-1}< v_l\leq v_k$.
	As the welfare with price $v_k$ is $1$, the revenue of each seller when the total price is $v_l>v_k$ is at most $1$,
	which is not larger than $2^{i-2}$ for any $i\geq 2$, and thus there is no beneficial deviation to any $l$ such that $1<l<k$.
	Finally, consider deviation to $v_l<v_{k+i-1}$, that is, $l>k+i-1$ ....
	
	1111111111111111111 FINISH!!!
	
	{\bf MOSHE: how do we prove that they do not deviate to prices smaller than $v_{k+i-1}$? Somehow we also did not use the fact that $v_k$ is an equilibrium. strange! }	

	FINISH!!!
	
	We conclude that $R(v_{k+i-1})>2^{i-1}$ implies that there is an uneven split of $v_{k+i-1}$ which forms an equilibrium, a contradiction.
	
	
	As the revenue from total price $v_{k+i-1}<v_k$ is at most $2^{i-1}$, % with $n$ demand levels the revenue from any total price $v_j<v_k$ is at most $R(v_k)\cdot 2^{n-1}$, and
	the welfare $v_n$ is bounded as follows:
	$SW(v_n)= \sum_{i=1}^n v_i (d_{i}-d_{i-1}) = SW(v_k) + \sum_{i=k+1}^n v_i (d_{i}-d_{i-1})
	\leq 1+\sum_{i=k+1}^n R(v_i)\leq 1+ \sum_{i=k+1}^n 2^{i-1}\leq 2^{n}$.
%	\begin{lemma}
%		If for a given instance $(p,q)$ is an equilibrium with $p<q$ then $(p',q')$ is an equilibrium for any $p',q'$ such that
%		$p'+q'=p+q$ and $p\leq \min\{p',q'\}\leq \max\{p',q'\}\leq q$.
%	\end{lemma}
%	It follows that if for some instance it holds that $(p,q)$ is an equilibrium with $p\neq q$, 	then best response dynamics starting from any $(x,p+q-x)\in [p,q]^2$ stops immediately in an equilibrium.
%	% , and thus the set of ...
%	{\bf Moshe: note that this is still  a measure zero set in $[0,v_1]^2$ !!! I am not sure how to prove the claim yet - I think that we need to show that for any such $x$ there must be an interval of values $y$ (slightly below $p+q-x$) such that from $(x,y)$ the dynamics ends at $(x,p+q-x)$  }
\end{proof}

} % comment

	%  {\bf Moshe: need to continue from here!}


% For more than two demand levels, even if convergence happens, it might be to a bad equilibrium, even when good equilibria exist, unless the dynamics starts from a good equilibrium.

\subsection{Time to Convergence}
\ignore{OLD, was replaced by a file:
	
	% We prove the following results:
Up to this point we considered the quality of equilibria reached by best response dynamics. We next consider the time to convergence.
We show that time to convergence can be very long, even with only $2$ demand levels and total demand that is close to $1$.
Specifically, we show that even for only two demand levels, and even for $D$ close to $1$, the dynamics can take time that is linear in $W=\frac{d_n}{min_{i=1}^n d_i-d_{i-1}}$, the ratio between the maximal demand and the minimal change in demand. Note that $W\geq D$ and additionally, if $d_1=1$ and every $d_i$ is an integer, then $W=D$.


\begin{theorem}[Slow convergence]
	% For any instance with $n=2$ demand levels, best response dynamics starting from any prices will stop in an equilibrium after $O(d)$ steps, and
	For any $W>1$, for some instances with $2$ demand levels ($n=2$),
	best response dynamics takes $\Omega(W)$ steps to converge to an equilibrium.
	% {\bf Moshe: I have just realized the number of steps can be inversely proportional to the normalized difference between demands $(d_2-d_1)/d_1$, not the ratio of demands $D= d_2/d_1$. So it seems like there is a third parameter that is important!  }
\end{theorem}

%\ignore{OLD:
The following theorem shows that except of a measure zero (finite) set of starting prices for the best response dynamics, every dynamics will end up in a very low welfare equilibrium, although equilibrium with high welfare exists. The welfare gap between the good and bad equilibria increases exponentially in the number of demand levels $n$.

\begin{theorem}[Almost sure convergence to bad equilibria, large $n$]
	For any % total demand $D>1$,
	demand levels $n\geq 2$  and $\epsilon>0$ that is small enough,
	there exists instance % with total demand $D$
	that has the following properties:
	\begin{itemize}
		\item it has equilibria with welfare at least $\frac{(2-\epsilon)^{n}-1}{1-\epsilon}$ and monopolist revenue of at least $(2-\epsilon)^{n-1}$.
		\item if the best response of the first seller in the dynamics does not result in an equilibrium, then
		the best response dynamics  will end up in an equilibrium with welfare and revenue of $1$.
		\item the set of prices $\{(p,q) | (p,q)\in NE \ \&\ SW(p,q)\neq 1\}$ is finite.
		\item the set of prices $\{(p,q) | (p,q)\in NE \ \&\ SW(p,q)= 1\}$ is infinite and uncountable.
	\end{itemize}
\end{theorem}
\begin{proof}
% Fix $\alpha<2$ that is close to $2$.
Let $\alpha=2-\epsilon$.
For $i\in [n]$ let $v_i=\epsilon^{i-1} $ and $d_i=\alpha^{i-1}/v_i$.
% Let $v_1 = \frac{\alpha}{D^{1/n}}$. For $i\in [n]$ let $v_i=(v_1)^i$ and let $d_i = \frac{\alpha^n}{2v_1^i-v_1^n}$.
We argue that for any $i\in [n]$ prices $(v_i/2, v_i/2)$ form an equilibrium, and that best response dynamics starting by best responding to any price $p\notin \{v_i/2 \ for \ i\in [n]\}$, ends in an equilibrium with $p+q=v_1$, and thus the set of starting prices for the dynamics that result in equilibrium welfare higher than $1$ is finite.
% Finally we observe that

FINISH THE PROOF
\end{proof}

We next show that for any total demand $D$, even with only $2$ demand levels, the gap in welfare between the best and worst equilibria can be as large as $\sqrt{D}$ and moreover, with non-malicious prices being in $[0,1]$, if the starting price for the dynamics is sampled uniformly from these prices, the dynamics will converge to the bad equilibria with probability at least $1-1/\sqrt{D}$.

\begin{theorem}[High probability of convergence to bad equilibria, $n=2$]
	\label{thm:conv-bad-NE-n is 2}
	For any total demand $D>1$ that is large enough, there exists instance with $n=2$ demand levels
	that has the following properties:
	\begin{itemize}
		\item Non-malicious prices are in $[0,1]$.
		\item it has (good) equilibria with welfare and monopolist revenue of at least $\sqrt{D}$.
		\item it has (bad) equilibria with welfare and monopolist revenue of $1$.
		\item if the price from which the best response dynamics starts (the first best response is to that price) is sampled uniformly in $[0,1]$, then  the best response dynamics ends up in an equilibrium with welfare and revenue of $1$ with probability at least $1-1/\sqrt{D}$.
	\end{itemize}
\end{theorem}
\begin{proof}
	 % Let $\epsilon = 1/\sqrt{D}$ and
	 Consider the input with $n=2$ demand levels satisfying $v_1=1> v_2=1/\sqrt{D}$ and $d_1=1<d_2=D$. % Note that $D=1/\epsilon^2$.
	 A pair of prices $(p,q)$ with $p+q=v_2$ results with welfare and monopolist revenue of $\sqrt{D}$, and for large enough $D$, the pair $(v_2/2, v_2/2) $ is indeed an equilibrium. On the other hand, $(1/2,1/2)$ is also an equilibrium, and its welfare and revenue are only $1$. Finally, observe that unless the price that the dynamics starts with is at most $v_2=1/\sqrt{D}$, the first best response result in an equilibrium with total price of $1$, and welfare of $1$, immediately after the first best response.
\end{proof}
% } % OLD


We observe that with $n=2$ demand levels, convergence to equilibrium is guaranteed, and moreover, the lower bound on the number of steps it might take is actually tight, and convergence always happens in $O(W)$ steps.
\begin{observation}
	\label{obs:bsd-2-stops}
	For any instance with $2$ demand levels ($n=2$), best response dynamics starting from any prices will stop in an equilibrium after $O(W)$ steps.
\end{observation}
} % OLD

\input{sec-time-best-response}
% \input{sec-time-best-response-Liad2}


% \input{pos-tmp}
\section{The Quality of the Best Equilibrium}
\label{sec:pos}

In this section, we study the price of stability in our game, that is, the ratio between the quality of the best equilibrium and the optimal outcome (both for revenue and welfare).
The following theorem gives two upper bounds for the price of stability.
One bound shows that for every total demand $D$, the best equilibrium and the optimal outcome are at most factor $O(\sqrt{D})$ away, for both welfare and revenue.
The second bound is exponential in $n$, but it is independent of $D$. This implies, in particular, that the price of stability in markets with a small number of demand levels is small even for a very large $D$.

%
%In this section we study the quality of the best equilibrium, with respect to the optimal social welfare (``Price of Stability'').
%We also consider the revenue of this equilibrium, with respect to the revenue of a monopolist facing the same demand.
%% A bound on the of factor $D$ on the ratio between the equilibrium revenue and the monopolist revenue is easy 1111111111
%We first present upper bounds showing that when either $n$ is very small, or $D$ is small, the optimal welfare as well as the monopolist revenue are bounded by $O(\min \{D,n+\sqrt{D}\})$ times the revenue of the best equilibrium.
%We then show that when $D$ is very large (exponential in $n$), this ratio can grow as $2^n$, but not more.

\begin{theorem}
	\label{thm:pos-UB}
	For any instance, the optimal welfare and the monopolist revenue are at most
	$O(\min \{2^n,\sqrt{D}\})$ times the revenue of the best equilibrium.
% 	Moreover, for any instance in which demands are integer multiples of $d_1$, the bound is at most $O(\sqrt{D})$. % , and this is tight.
	
	%The revenue  of the best equilibrium is at least $\frac{1}{O(\min\{n+\sqrt{D},D \})}$ fraction of the revenue of the optimal social welfare.
	%Moreover, for any instance in which demands are integer multiples of $d_1$, the fraction is at least $\frac{1}{O(\sqrt{D})}$, and this is tight.
	%% The welfare and revenue in the best equilibrium is smaller than the optimal welfare and the monopolist revenue, respectively, by a factor of at most $O(n+\log(D))$.
	% % This bound is asymptotically tight.
	% %For every $W>2$ there are instances in which the optimal welfare and the monopolist revenue are greater then the welfare and revenue (respectively) in every equilibrium by a factor of $\Omega(\sqrt{W})$. This bound is asymptotically tight.
\end{theorem}
As the bound holds for the revenue of the best equilibrium, it clearly also holds for the welfare of that equilibrium.
The proof of the theorem is presented in Appendix \ref{sec:proof-pos-ub}.

The next theorem shows that the above price-of-stability bounds are tight.
It describes instances where the gap between the best equilibrium and the optimal outcome is asymptotically at least $2^n$ and $\sqrt{D}$, for both welfare and revenue.
We prove the theorem in Appendix \ref{sec:proof-pos-lb}.
%(the latter shows tightness for the case where the demand consists of multiples of $d_1$).
%
%When there is not restriction on $D$\lbcomment{we don't talk about restrictions on D, the point is that we give an upper bound which is independent of D and thus give good results even for small n and large D's. However, the theorem is written in the opposite way - it is strange to present a PoS result like this.}, the gap can be exponential in $n$, and this is tight. We prove the next theorem in Section \ref{sec:POS-n}.
\begin{theorem}
\label{thm:POS-LB}
%Fix $\epsilon>0$.
% For any integer $n\geq 2$ there exist an instance $(\vec{v},\vec{d})$ with $n$ demand levels
For any number of demand levels $n$, there exists an instance for which
the optimal welfare and the monopolist revenue are at least factor $\Omega(2^n)$ larger than
the best equilibrium welfare and revenue, respectively.

In addition,
%for any number of demand levels $n$,
there exists an instance with integer demands for which
the optimal welfare and the monopolist revenue are at least factor $\Omega(\sqrt{D})$ larger than
the best equilibrium welfare and revenue, respectively.
\end{theorem}	

\ignore{ % OLD VERSION with exact bounds.
\begin{theorem}
	\label{thm:POS-n}
	Fix $\epsilon>0$.
	For any integer $n\geq 2$ there exist an instance $(\vec{v},\vec{d})$ with $n$ demand levels for which the best equilibrium has welfare and revenue of $1$, while the optimal welfare if at least $2^n - 1- \epsilon$ and the monopolist revenue is at least $2^{n-1}-\epsilon$.
	
	This is tight as for any instance $(\vec{v},\vec{d})$ with $n$ demand levels it holds that  the optimal welfare is at most factor $2^n -1$ larger than the welfare of the highest welfare equilibrium, and the revenue of the monopolist is at most factor $2^{n-1}$ larger than the total revenue of the highest revenue equilibrium.
\end{theorem}	
} % comment

% \mbcomment{Note that the proof actually gives an upper bound of  $\Theta(\sqrt{n+D})$ for the case that we have a lower bound of $\Theta(\sqrt{D}) = \Theta(\sqrt{n}) $, when each of the n levels have marginal demand of 1, and Z is empty.}

%\begin{theorem}
%	For any integer $D>2$ there exist an instance $(\vec{v},\vec{d})$ with total demand $D$ (and $n=D$) for which
%	welfare and revenue in equilibrium is at most $3/\sqrt{2}$ while the optimal welfare is at least $\sqrt{D}$ and
%	the revenue of a monopolist is  at least $D/\sqrt{D-1}= \Theta(\sqrt{D})$.
%
%	This is asymptotically tight as for any $D>1$ and any instance $(\vec{v},\vec{d})$ with total demand $D$ it holds that the optimal welfare is at most factor
%	$O(\sqrt{D})$ larger than the welfare in highest welfare equilibrium, and the revenue of a monopolist is at most factor $O(\sqrt{D})$ larger than the total revenue of the highest revenue equilibrium.
%\end{theorem}
%
%\begin{fact}
%The function $2\sqrt{x}/(1+x)$ is monotonically increasing in the range $0 \le x \le 1$.  This implies that for
%$0 \le x \le a$ we have that $2\sqrt{x}/(a+x) \le 1/\sqrt{a}$.
%\end{fact}

%\begin{fact}\label{fact:mono}
% %The function $2\sqrt{x}/(1+x)$ is monotonically increasing in the range $0 \le x \le 1$.  This implies that for
% %$0 \le x \le a$ we have that
%For every $x,a>0$ we have that $2\sqrt{x}/(a+x) \le 1/\sqrt{a}$.
%\end{fact}
%%\begin{proof}
% %Simple algebra shows that this is equivalent to $(x-a)^2 \geq 0$.
% %\end{proof}


%\begin{fact}\label{fact:mono}
%	For every $x,a>0$ we have that $2\sqrt{x}/(a+x) \le 1/\sqrt{a}$.
%\end{fact}


\subparagraph*{Acknowledgements.}

Noam Nisan was supported by ISF grant 1435/14 administered by the Israeli Academy of Sciences and Israel-USA Bi-national Science Foundation (BSF) grant  2014389.



% Bibliography
%\bibliographystyle{plain}
\bibliographystyle{plain}
\bibliography{bib}



%\bibliography{bib}


% Appendix
\appendix

\section{Equilibria and Convexity}
\label{app:eq-are-convex}

\noindent \textbf{Proof of Lemma \ref{obs:total-price-convex}:}
\begin{proof}
	We assume WLOG that $p<q$. Assume for a contradiction that $(x, p+q-x)$ is not a pure NE. Then, for some $\Delta>-x$, it holds that $\mathcal{D}(p+q+\Delta)\cdot (\Delta+x)> \mathcal{D}(p+q) \cdot x$, or equivalently,
	\begin{align*}
	\mathcal{D}(p+q+\Delta)\cdot \Delta> (\mathcal{D}(p+q)- \mathcal{D}(p+q+\Delta))\cdot x.
	\end{align*}
	
	We will show that if this beneficial deviation had been to a higher (lower) price, then the same deviation would have been beneficial to the player that offered the lower (higher) price in the equilibrium $(p,q)$.
	
	If $\Delta>0$ then increasing the price by $\Delta$ is also a beneficial deviation for $p$ when the profile is $(p,q)$ and $p<q$.
	This holds since $\Delta>0$ and for the downward-sloping demand it holds that $\mathcal{D}(p+q)\geq \mathcal{D}(p+q+\Delta)$ and thus
	\begin{align*}	
	& \mathcal{D}(p+q+\Delta)\cdot \Delta\\
	& > (\mathcal{D}(p+q)- \mathcal{D}(p+q+\Delta))\cdot x \\
	& \geq  (\mathcal{D}(p+q)- \mathcal{D}(p+q+\Delta))\cdot p
	\end{align*}
	It follows that $\mathcal{D}(p+q+\Delta)\cdot (p+\Delta)> \mathcal{D}(p+q)\cdot p$ which implies that $p+\Delta$ is a beneficial deviation as claimed.
	
	If $\Delta<0$ then adding $\Delta$ to the price is also a beneficial deviation for $q$ when the profile is $(p,q)$. It holds that $\mathcal{D}(p+q)\leq \mathcal{D}(p+q+\Delta)$ ($\Delta<0$) and thus
	\begin{align*}
	& \mathcal{D}(p+q+\Delta)\cdot \Delta \\
	&> (\mathcal{D}(p+q)- \mathcal{D}(p+q+\Delta))\cdot x\\
	& \geq (\mathcal{D}(p+q)- \mathcal{D}(p+q+\Delta))\cdot q
	\end{align*}
	
	We showed that $\mathcal{D}(p+q+\Delta)\cdot (q+\Delta)> \mathcal{D}(p+q)\cdot q$ which implies that $q+\Delta$ is a beneficial deviation as claimed.
\end{proof}
	

%this is a real appendix

\section{Quality Gaps between Equilibria}
\label{app:gaps-between-eq-tight}
%We remark that these large gaps are asymptotically tight with respect to the parameter $D$.
\begin{proposition}\label{prop:POA-D}
	For any number of demand levels $n\geq 2$ and any total demand $D$, it holds that the ratio between the optimal welfare (and thus the welfare in the best equilibria) and the welfare in any non-trivial equilibrium is at most $D$.
	Additionally, the ratio between the revenue of a monopolist (and thus the best revenue in equilibria) and the revenue of any non-trivial equilibrium is at most $2D$.    	
% 	It holds that $POA_{SW}\leq D$ and $POA_{REV}\leq 2D$.
\end{proposition}
\begin{proof}
	In any non-trivial NE the welfare is at least $v_1\cdot d_1$,
		while the optimal welfare is at most $d_n \cdot v_1$,
		and thus the ratio of the two is at most %$POA_{SW}\leq$
		$\frac{d_n\cdot v_1}{d_1\cdot v_1}= \frac{d_n}{d_1}=D$. % , where the last inequality follows from $d_1$ being an integer thus at least 1.
	
	We next move to present the revenue bound. Observe that the revenue of the monopolist is at most $d_n\cdot v_1$ as this is a bound on the welfare. Fix any NE $(p,q)$ and assume wlog that $p\geq q$.
	
	If $p \mathcal{D}(p+q)\geq \frac{v_1\cdot d_1}{2}$, then the ratio between the monopolist revenue and the revenue in a non-trivial equilibrium is at most % $POA_{REV}\leq$
	$\frac{d_n\cdot v_1}{d_1\cdot v_1/2}= \frac{2d_n}{d_1}= 2D$.
	Otherwise, $(p,q)$ is an equilibrium in which $q \mathcal{D}(p+q)\leq p \mathcal{D}(p+q)< \frac{v_1\cdot d_1}{2}$ and it must be the case that $q\leq p<v_1/2$ as otherwise the revenue of the first seller is $p \mathcal{D}(p+q)\geq v_1 \mathcal{D}(p+q)/2 \geq v_1 d_1/2$. But when
$q\leq p<v_1/2$ the revenue of the second seller by pricing at $v_1-p$ is $d_1 (v_1-p) > d_1 v_1 - v_1 d_1 /2 = v_1 d_1 /2 $, a contradiction.
\end{proof}

\section{Best Response Dynamics}

\subsection{Starting from Cartel Prices}
\label{app:cartel-prices-two-levels}

\begin{proposition}
	For any instance with two demand levels ($n=2$) and any monopolist price $p^*$, best responses dynamics starting from $(p^*/2,p^*/2)$ always ends in an equilibrium with revenue that is at least half the revenue of the monopolist (and thus the revenue in any other equilibria), and welfare that is at least a third of the optimal welfare.
\end{proposition}
\begin{proof}
	Proposition \ref{obs:bsd-2-stops} shows that with two demand levels, best responses dynamics always converges to an equilibrium.
	We next prove the welfare and revenue bounds.
	
	% If $(p^*/2,p^*/2)$ is an equilibrium, then it has the same revenue as the monopolist revenue.
	
	Assume without loss of generality that with price of $1$ the demand is $1$, and that with price of $p<1$ the demand is $d>1$.
	If $1$ is a monopolist price, then $1\geq d\cdot p$ and $(1/2,1/2)$ is an equilibrium (since the revenue by deviation is
	$(p-1/2)d<(p/2) d\leq 1/2$) having revenue that is the same as the monopolist revenue, and welfare that is at least half the optimal welfare (optimal welfare is at most $1+d\cdot p\leq 2$).
	
	We next consider the case that $p^*=p$.
	As $p^*$ is a monopolist price it holds that $p^*\cdot d\geq 1$.
	If $p^*\cdot d>2$ then $(p^*/2,p^*/2)$ is an equilibrium with maximal revenue. Otherwise
	$2\geq p^*\cdot d\geq 1$, and the revenue in equilibrium reached by the dynamics %{\bf Moshe: point to the theorem that NE will be reached!}
	will be either $1$ or $d\cdot p^*$, and in any case, at least half the maximal equilibrium revenue.
	The welfare claim follows from the fact that for the case $p^*\cdot d>2$ then $(p^*/2,p^*/2)$ is an equilibrium of welfare at least $p^*\cdot d>2$ while the optimal welfare is at most $p^*\cdot d+1< 2d\cdot p^*$. For the case that $2\geq p^*\cdot d\geq 1$, the optimal welfare is at most $d\cdot p^* + 1\leq 3$, while any equilibrium has welfare of at least $1$.
\end{proof}


\subsection{Dynamics Starting at Any Cartelistic Split}
\label{app:cartel-prices}

Proof of Proposition \ref{obs:brd-3-lb}:
\begin{proof}
	% We prove the claim for three demand levels, clearly it extends to any larger number $n>3$.
	Let $v_1=1$, $v_2= 1/4$,$v_3= 1/(3\sqrt{D}) $ and
	let $d_1=1$, $d_2= \sqrt{D}$ and $d_3=D$ (assume that $D$ is large enough).

    First observe that $(v_2/2,v_2/2)$ is an equilibrium with revenue $\sqrt{D}/4$, and at least such welfare.
    Next, observe that the monopolist price is $p^*=v_3$ as the revenue from a total price of $v_3$ is $\sqrt{D}/3$ which is greater than $\sqrt{D}/4$, which is
    the revenue with total price $v_2$. 	

    We now consider any dynamics that starts by a best response to price $q\leq v_3=p^*$. By Observation \ref{obs:BR-price-is-value}, the total price after this best response must be equal to either $v_1$, $v_2$ or $v_3$. We will handle these different cases separately:

    \vspace{2mm}

    \noindent \underline{Case 1:} The best response to $q$ is $v_1-q$.

    In this case we note that $v_1-q \geq 1-v_3=1- 1/(3\sqrt{D})$,  and the dynamics stops since when $D$ is large, this price is greater than $v_2$ and $v_3$ so the other player has no beneficial deviation.
    The welfare and revenue is $1$ as claimed.


    \vspace{2mm}

    \noindent \underline{Case 2:} The best response to $q$ is $v_2-q$.

    In this case the seller with price $q$ that is getting revenue of $q\cdot d_2 \leq v_3 d_2= 1/3$ will deviate to $1-(v_2-q)\geq 3/4$ improving his utility to at least $3/4$. Again, now the dynamics stops at equilibrium with welfare and revenue of $1$, as claimed.


    \vspace{2mm}

    \noindent \underline{Case 3:} The best response to $q$ is $v_3-q$.

    %Finally, consider the case that the best response to $q$ is $v_3-q$.
    We argue that in this case the dynamics does not stop, and it must continue.
    %as in one of the previous cases. $liad jan29 commented
    Indeed, if for large enough $D$ the best response to $q$ is $v_3-q$ then $(v_3-q)d_3\geq (v_2-q)d_2$ or $q\leq \frac{v_3 d_3-v_2 d_2}{d_3-d_2} = \frac{\sqrt{D}}{12(D-\sqrt{D})}<\frac{1}{6\sqrt{D}}$.
    This implies that when best responding to $v_3-q$, a price of $q$ gives utility of at most $D\frac{1}{6\sqrt{D}}=\frac{\sqrt{D}}{6}$, while deviating to $q'= v_2-(v_3-q)>v_2-v_3$ ensures utility of at least $(\frac{1}{4}- \frac{1}{3\sqrt{D}}) \sqrt{D}= \frac{\sqrt{D}}{4}-\frac{1}{3}> \frac{\sqrt{D}}{6}$ (and this is clearly greater than the utility with total price $v_1$ for large $D$).
    As this seller gains at least $\frac{\sqrt{D}}{4}-\frac{1}{3}$,
    the other seller gains at most $\frac{1}{3}$ from his current price.
    However, by offering a price of $1-q'$ she can get utility of at least $\frac{3}{4}$ (since $q'>v_2=\frac{1}{4}$, note also that $q'>v_3$ so deviation to this value is not beneficial). Then the dynamics terminates as in the previous cases with revenue and welfare of 1.
    %liad jan29 elaborated on the last step.
    %Now the dynamics will continue as the other seller will be improving his utility by pricing at $1-q'$ and getting utility at least $3/4$ instead of at most $1/4$.
\end{proof}


\subsection{Dynamics with Random Starting Prices}
\label{app:dynamic-random-prices}

We show that Proposition \ref{obs:conv-bad-NE-n is 2} is essentially tight.

\begin{proposition}
	\label{obs:conv-bad-NE-n is 2-tight}
	For any instance with two demand levels for which the ratio of welfare of the best and worst equilibrium is $\epsilon D$ for some  $1>\epsilon>2/D$, it holds that the probability of the dynamics ending at the best equilibrium when starting from a uniform random pair of prices in $[0,v_1]^2$ is at least $\epsilon-2/D$. 		%  {\bf Moshe: Show that this is tight- find XXX and prove the bound.}
\end{proposition}
\begin{proof}
	Normalize the welfare of the worse equilibrium to $1$ (and thus the value is $1$) and the demand to $1$.
	The best equilibrium is for demand $D$ and value $\epsilon<1$, since the equilibria welfare ratio is $\epsilon D$.
	For any pair of prices $(p,q)$ such that $1/D<q<\epsilon-1/D$,
	the best response to $q$ is $\epsilon-q$ as it gives revenue larger than
	$D\cdot (1/D)=1$, while the maximal revenue for a seller in the other equilibrium is $1$.
	Given price $\epsilon-q<\epsilon - 1/D$, the best response is $q$ as it gives revenue larger than $1$, while deviation will give revenue of at most 1.
	We conclude that with probability at least $\epsilon-2/D$ the dynamics stops after a single best response, at the best equilibrium, as claimed.
\end{proof}

\subsection{Dynamics with Random Starting Prices: Impossibility}
\label{app:dynamic-random-prices-impossibility}

\noindent \textbf{Proof of Theorem \ref{thm:almost-sure-bed} (Almost sure convergence to bad equilibria)}:\\


%\begin{theorem}[Almost sure convergence to bad equilibria, large $n$]
%	\label{thm:almost-sure-bed}
%	For any % total demand $D>1$,
%	number of demand levels $n\geq 2$  and $\epsilon>0$ that is small enough,
%	there exists an instance % with total demand $D$
%	that has an equilibrium with welfare $2\cdot (2-\epsilon)^{n-1}-1 $ % $\frac{(2-\epsilon)^{n}-1}{1-\epsilon}$
%	and revenue of $(2-\epsilon)^{n-1}$,
%	but best response dynamics starting with pair of prices chosen uniformly at random over
%	 $[0,v_1]^2$ almost surely ends in an equilibrium of welfare and revenue of only $1$. % with probability $1$.
%\end{theorem}
\begin{proof}
	% Fix $\alpha<2$ that is close to $2$.
	Let $\alpha=2-\epsilon$.
	For $i\in [n]$ let $v_i=\epsilon^{i-1} $ and $d_i=\alpha^{i-1}/v_i = \left(\frac{\alpha}{\epsilon}\right)^{i-1}$, notice that $R(v_i)=\alpha^{i-1}$. Thus, the monopolist revenue is $R(v_n)=\alpha^{n-1} = (2-\epsilon)^{n-1}$, and the optimal welfare is
	$SW(v_n) = d_1\cdot v_1+ \sum_{i=2}^n v_i (d_{i}-d_{i-1}) = % \leq \sum_{i=1}^n v_i \cdot d_{i} =
	1+ \sum_{i=2}^n \left(\alpha^{i-1}- \epsilon \alpha^{i-2}\right) =
	1+ (\alpha - \epsilon)\cdot \sum_{i=0}^{n-2} \alpha^{i} =
	1+ (\alpha - \epsilon)\frac{\alpha^{n-1} - 1 }{\alpha -1 } = 1+ 2 (1 - \epsilon)\frac{(2-\epsilon)^{n-1}-1}{1-\epsilon} =
	1+ 2\cdot ((2-\epsilon)^{n-1}-1)  =  2\cdot (2-\epsilon)^{n-1}-1   $.
	
	% Let $v_1 = \frac{\alpha}{D^{1/n}}$. For $i\in [n]$ let $v_i=(v_1)^i$ and let $d_i = \frac{\alpha^n}{2v_1^i-v_1^n}$.
	We argue that for any $i\in [n]$ the pair of prices $(v_i/2, v_i/2)$ forms an equilibrium (in particular, $(v_n/2, v_n/2)$ is an equilibrium with revenue equals to the monopolist revenue, and optimal welfare),
	and that best response dynamics starting by best responding to any price $q\notin \{v_i/2 \ for \ i\in [n]\}$, ends in an equilibrium with total price of $v_1=1$, and welfare of $1$. Thus, the set of pairs from which the dynamics does not end at welfare of $1$ is finite, and has measure $0$, so the dynamics almost surely converges to total price of $1$ and welfare of $1$.
	
	We first observe that for any $i\in [n]$ prices $(v_i/2, v_i/2)$ form an equilibrium.
	Note that for $\epsilon$ that is small enough, $v_i/2>v_j$ for any $j>i$, and thus a best response to any price of at least $v_i/2$ must be $v_j-(v_i/2)$ for some $j\leq i$.
	Now, with prices $(v_i/2, v_i/2)$ the utility of each seller is
	$d_i \cdot v_i/2 = \alpha^{i-1}/2$, while any optimal deviation must be to some price $v_j - (v_i/2)$ for $j<i$ and it
	gives utility of $d_j (v_j - (v_i/2)) < d_j \cdot v_j= \alpha^{j-1} \leq  \alpha^{i-1}/2$.
	
	We next show that best response dynamics starting by best responding to any price $q\notin S= \{v_i/2 \ for \ i\in [n]\} $, ends in an equilibrium with total price of $v_1=1$, and welfare of $1$.
% 	{\bf MOSHE: in the proof below we assume that BR is unique. It seems like it is not, and there is some finite set of prices for which it is not. but still, generically it is. }
	Let $p\in BR(q)$ and let $i$ be the index such that  $p+q=v_i$. Since $q\notin S$ it holds that $p\neq q$.
%	We claim that
	We argue that from this point onwards, unless the total price is $v_1$, the dynamics continues and the total price strictly increases at every best responses, thus ending at $v_1$ after at most $n$ steps.
% 	This will follow from the following



	
	We first show that any uneven split is not an equilibrium. The seller with the low price will want to move to a higher total price, and his new price will be larger than the price of the other seller.
	\begin{lemma}
		\label{lem:non-equal-not-ne}
		Any pair $(x,y)$ such that $x+y=v_j<v_1$ and $x\neq y$ is not an equilibrium.
		Moreover, for small enough $\epsilon$, for $x<\frac{v_j}{2}<y$, it holds that for any $z\in BR(y)$
		we have
		$y+z=v_k>v_j$ for some $k<j$, and $z>y$.
	\end{lemma}
	\begin{proof}
		Assume that $x<y$ (thus $y>v_j/2$) we show that $v_{j-1}-y$ is better response than $v_j-y$ for $j>1$.
		Indeed $(v_{j-1}-y)d_{j-1}> (v_{j}-y)d_{j}$ since
		\begin{align*}	
		& (v_{j-1}-y)d_{j-1}> (v_{j}-y)d_{j} \Leftrightarrow  y(d_j-d_{j-1})> \alpha^{j-1} - \alpha^{j-2} \Leftrightarrow\\
		& y\left( \left(\frac{\alpha}{\epsilon}\right)^{j-1} - \left(\frac{\alpha}{\epsilon}\right)^{j-2}  \right) > \alpha^{j-1} - \alpha^{j-2} \Leftrightarrow  y>\left(\frac{\alpha-1}{\alpha-\epsilon}\right) v_j = \frac{v_j}{2}
		\end{align*}
		Finally, note that for small enough $\epsilon$ it holds that $v_j/2>v_{j+1}$ and thus $y>v_{j+1}$, so
		$z$ that is a best response to $y$ must
		satisfy $y+z\geq v_j$, and as we saw that $y+z\neq v_j$ we conclude that $y+z=v_k>v_j$ for some $k<j$.
		For small enough $\epsilon$ it holds that $z = v_k-y\geq (v_j/\epsilon)- y \geq (v_j/\epsilon) - v_j > v_j \geq  y$,
		thus $z>y$ as claimed.
	\end{proof}
	
 	We next show that in any uneven split, the seller with the higher price is best responding.
	\begin{lemma}
		\label{lem:non-equal-high-stays}
		Assume that $\epsilon>0$ is small enough.
		If for some $j<n$ it holds that $v_{j+1}<x<v_j/2$, then there is a unique best response to $x$ and it holds that  $BR(x)=\{v_j-x\}$.
	\end{lemma}
	\begin{proof}
		Since $x>v_{j+1}$ it holds that $BR(x)=\{v_k-x\}$ for some $k\leq j$.
		To prove the claim we show that for $x<v_j/2$, for any $k<j$ it holds that $(v_{j}-x)d_{j}> (v_{k}-x)d_{k}$.
		Let $m=j-k$ and note that $d_j=d_k \cdot \left(\frac{\alpha}{\epsilon}\right)^{m}$. It holds that:
		\begin{align*}	
		& (v_{j}-x)d_{j}> (v_{k}-x)d_{k} \Leftrightarrow  \\
		& \alpha^{j-1} - \alpha^{k-1} >x(d_j-d_k)\Leftrightarrow\\
		& \alpha^{k-1} (\alpha^m -1 )> x\cdot \alpha^{k-1} \left(\frac{\alpha^m-\epsilon^m}{\epsilon^{j-1}}\right)\Leftrightarrow\\
		& x< \epsilon^{j-1} \frac{\alpha^m -1}{\alpha^m -\epsilon^m} % \leq \frac{v_j}{2} % v_j \frac{1 -\frac{1}{\alpha^m}}{1 -\left(\frac{\epsilon}{\alpha}\right)^m}
		\end{align*}
		Observe that for $m=1$ it holds that $\frac{\alpha^m -1}{\alpha^m -\epsilon^m}=\frac{1}{2}$. It is easy to check that
		$\frac{\alpha^m -1}{\alpha^m -\epsilon^m}$ is increasing in $m$. Thus, if $x<\frac{v_j}{2}$ then
		$(v_{j}-x)d_{j}> (v_{k}-x)d_{k}$ for any $j$ such that $j-k\geq 1$ (any $j>k$).
	\end{proof}
	
	We now prove the theorem using these two lemmas.
	Recall that $p\in BR(q)$ and assume that $p+q=v_i<v_1$. As $q\notin S$, it holds that $q\neq v_i/2$. By Lemma \ref{lem:non-equal-not-ne},
	$(p,q)$ is an uneven split and thus not an equilibrium, so $q\notin BR(p)$. When $\epsilon$ is small enough, by Lemma \ref{lem:non-equal-high-stays} it must be the case that $p\geq v_i/2$ or $p\leq v_{i+1}$.
	By Lemma \ref{lem:very uneven split} it cannot be the case that $p\leq v_{i+1}$.
	Thus, it must hold that $p\geq v_i/2$ and then $q<v_i/2$ since $p\neq v_i/2$. We can now use Lemma \ref{lem:non-equal-not-ne} inductively, to conclude that the dynamics can only stop when the total price is $v_1$.
	
	\begin{lemma}
		\label{lem:very uneven split}
		Assume that $\epsilon>0$ is small enough.
		If $p+q=v_i<v_1$ and $p\in BR(q)$ then $p>v_{i+1}$.
	\end{lemma}  	
	\begin{proof}
		Assume in contradiction that $p\leq v_{i+1}$ and thus $q=v_i-p\geq v_i-v_{i+1}$.
		The revenue of the seller with price $p$ is
		$p\cdot d_i\leq v_{i+1}\cdot d_i = \epsilon^ i \cdot \left(\frac{\alpha}{\epsilon}\right)^{i-1} = \epsilon \alpha^{i-1} $.
		%which tends to $0$ when $\epsilon$ goes to $0$.
		On the other hand, if it response to $q$ the seller prices at $v_{i-1}-q$, his revenue is $(v_{i-1}-q) d_{i-1} \geq  \alpha^{i-2} - (v_i-v_{i+1})\cdot d_{i-1} =
		\alpha^{i-2} - (\epsilon^{i-1}-\epsilon^i)\cdot \left(\frac{\alpha}{\epsilon}\right)^{i-2} =
		\alpha^{i-2} \left(1- \epsilon +\epsilon^2 \right) $.
		Observe that we get a contradiction when $\epsilon$ is small enough, as
		$\epsilon \alpha^{i-1} \geq 	\alpha^{i-2} \left(1- \epsilon +\epsilon^2 \right) $ implies that
		$\alpha \geq \frac{1- \epsilon +\epsilon^2}{\epsilon}$, but $\alpha<2$ while the RHS goes to infinity when $\epsilon$ goes to $0$.
	\end{proof}
	
	This concludes the proof of the theorem.
\end{proof}


\subsection{Time to Covergence}
\label{app:BR-stops-at-time-W}

\noindent \textbf{Proof of Proposition \ref{obs:bsd-2-stops}}:
\begin{proof}
	We prove the result for every market with two demand levels.
	Let $v_1=1$ and $d_1=1$ (we normalize the two values to 1 w.l.o.g.), and let $v_2=1-\epsilon$ for $\epsilon>0$ and $d_2=D$.
	For these parameters, $W=\frac{D}{D-1}$.
	
	We will first show that as long as the best response process proceeds,
	there is an increase of exactly $\epsilon$ between any two consecutive prices one seller sets, and a decrease of exactly $\epsilon$ between prices set by the other seller.
	
	Recall that due to Observation \ref{obs:BR-price-is-value}, after a seller is best responding, the price will be either $1$ or $1-\epsilon$. % When a seller best responds,

	
	Consider first a set of prices $(p,\mathbf{q})$ where $q+p=1$ (the price that is marked in bold indicates the price of the player whose turn is to best respond, in this case, the second seller).
	The seller sets his price to a price in $BR(p)$,
	and for the dynamics to continue it must hold that the total price is now equal to $v_2$:
	$BR(p)$ is unique and not equal to $q$ and it satisfies $BR(p)+p=1-\epsilon$. Since $p+q=1$, we get that
	$BR(p)=q-\epsilon$ and the new pair of offers is $(\mathbf{p},q-\epsilon)$.
	
	Consider now some set of prices $(\mathbf{p'},q')$ where $q'+p'=1-\epsilon$.
	The seller sets his price to a price in $BR(q')$,
	and for the dynamics to continue it must hold that $BR(q')$ is unique and not equal to $p'$ and it satisfies
	$BR(q')+q'=1$. Since $q'+p'=1-\epsilon$, we get that the new pair of prices is $(p'+\epsilon,\mathbf{q'})$.
	
	We conclude that every best response dynamics have the following form.
	After the first step, the sum of prices will either $v_1$ or $v_2$.
	As long as the process proceeds, we will have the following sequence of prices when the initial total price is $v_1$ (otherwise, consider the sequence starting from the second price vector):
	$(p_0,\pmb{q_0)}$,
	$(\pmb{p_0},q_0-\epsilon)$,
	$(p_0+\epsilon,\pmb{q_0-\epsilon})$,
	$(\pmb{p_0+\epsilon},q_0-2\epsilon)$,$(p_0+2\epsilon,\pmb{q_0-2\epsilon})$,
	$...$,$(p_0+m\epsilon,\pmb{q_0-m\epsilon})$,
	$(\pmb{p_0+m\epsilon},q_0-(m+1)\epsilon)$, and so on.
	
	As prices are bounded in $[0,1]$, the number of updates by one seller clearly cannot be more than $1/\epsilon$.
	
	We are left to bound the number of iterations as a function of $D$.
	Indeed, consider the price vector $(\pmb{p_0+m\epsilon},q_0-(m+1)\epsilon)$.
	For the dynamics to continue, the currently responding player must prefer
	increasing his price and selling to the lower demand at price $v_1$:
	\begin{align}
	1\cdot(p_0+(m+1)\epsilon) > D\cdot(p_0+m\epsilon)
	\end{align}
	It follows that $m<\frac{1}{D-1}-\frac{p_0}{\epsilon}<\frac{D}{D-1}=W$. Therefore, in every best response dynamics each player will change its price at most $W$ times.
	%We claim that for one seller there is an increase of exactly $\epsilon$ between any two consecutive prices he sets, and for the other, there is a decrease of exactly $\epsilon$ between prices.
	%$As prices are bounded in $[0,1]$, the number of updates by one seller cannot be more than $1/\epsilon$ as claimed.
	%
	%Due to Observation \ref{obs:BR-price-is-value}, after a seller is best responding, the price will be equal to either $1$ or $1-\epsilon$.
	%First consider a seller that by best responding induces a total price of $1$; That is, the seller sets a price of $y$ such that $y=BR(1-y)$ where $1-y$ was the price set by the other seller.
	%	For the dynamics to continue, %such that the seller will get to best responses again,
	%it must hold that $BR(y) = v_2-y$ and $BR(v_2-y)=1-(v_2-y) = y+\epsilon$, thus the price increased by exactly $\epsilon$ as claimed.
	%	
	%	Now consider the other seller. For the dynamics to continue one more step, it must hold that $BR(y+\epsilon) = v_2-(y+\epsilon) = v_2-y-\epsilon$, so his price deceases by $\epsilon$ as claimed.
\end{proof}



\subsection{Proof of Theorem \ref{thm:pos-UB}}
\label{sec:proof-pos-ub}

We start with the upper bounds of the form $O(\sqrt{D})$.
The following lemmas will be useful in proving the upper bounds presented in Theorem \ref{thm:pos-UB}.
\begin{lemma}\label{lem-sqrt-bound}
	Assume that the best reply
	to $v/2$ is $v'-v/2$ for some $v'>v$.
	Then $v\leq v' \sqrt{\frac{D(v')}{D(v)}}$
\end{lemma}
\begin{proof}
 Denote $d = \D(v)$, $d'=\D(v')$ and the revenues by $r=v\cdot d$, $r'=v'\cdot d'$.
 To prove the claim we show the equivalent that $(r'/r)^2 \ge d'/d$.
	
	Denote $\alpha = d'/d$.  Since $v'-v/2$ is a better reply to $v/2$ than
	$v/2$ is we have that $d\cdot v/2 < d' (v'-v/2)$, equivalently
	$v(d+d')/2 < d'\cdot v'$ so $v(1+\alpha)/2 < \alpha v'$ or
	$v'/v > (1+\alpha)/(2\alpha)$.
	
	Now, $(r'/r)^2= (\alpha v'/v)^2 >
	((1+\alpha)/2)^2 \ge \alpha = d'/d$, where the first inequality was
	just derived above, and the last one holds for any real number $\alpha$.
\end{proof}

\ignore{	
We first show that the revenue of the best equilibrium is at most  $\sqrt{D}$ factor away from the monopolist revenue.
\begin{lemma}
	The best equilibrium has revenue of at least $1/\sqrt{D}$ fraction
	of the monopolist revenue.
\end{lemma}
\begin{proof}
	Let us consider the symmetrized best-reply dynamics starting from
	an equal split of the minimal monopoly price $p_0$.
	This gives	us a sequence $p_0 < p_1 < \cdots < p_t$ of total prices, where
	at each stage $p_{i+1}-p_i/2$ is a best response to $p_i/2$, and
	$(p_t/2,p_t/2)$ is the best equilibrium.  Denote the
	demand at combined price $p_i$ by $d_i = \D(p_i)$, and the
	revenue by $r_i = d_i \cdot p_i$.
	
	We can now apply the previous lemma to each stage and get
	$(r_{i+1}/r_i)^2 \ge d_{i+1}/d_i$, and putting all these inequalities
	together get $(r_t/r_0)^2 \ge d_t/d_0$, or $r_t \ge r_0 \sqrt{d_t/d_0}$.  The theorem follows since
	$d_t/d_0 \ge 1/D$, $r_t$ is the revenue in the best equilibrium and $r_0$ is the monopolist revenue.
\end{proof}
} % ignore

We next show that the revenue of the best equilibrium is at most  $O(\log D)$ factor away from its welfare.
\begin{lemma} \label{revwel}
	Let $(v^*/2,v^*/2)$ be an equilibrium then the welfare at this equilibrium is at most $O(\log D)$ times the
	revenue at this equilibrium.
\end{lemma}
\begin{proof}
	Let $d^*=\D(v^*)$ be the demand at this equilibrium, then
	$v^*/2$ is at least as good a reply to $v^*/2$ as is $v-v^*/2$ (for any $v$).  For $v > v^*$, the revenue
	from the latter choice is at least $\D(v) \cdot v/2$ and thus for every $v \ge v^*$ we have that
	$v \cdot \D(v) \le v^* \cdot d^*$.
	In particular, for $v_i \ge v^*$, since $d_i \ge d^* / D$, we also have that $v_i \le D v^*$.
	
	We now split the welfare that is obtained in this equilibrium
	into parts according to the value: $S_j = \{ i | 2^j v^* \le v_i < 2^{j+1} v^* \}$,
	where $j = 0 ... \log D$.  The welfare that we get from all buyers whose value is in $S_j$
	can be bounded from above by $2^{j+1} v^* \cdot \D(2^j \cdot v^*) \le 2 v^* \cdot d^*$
	by applying the inequality $v \cdot \D(v) \le v^* \cdot d^*$ for $v=2^j \cdot v^*$.
	This completes the proof of the lemma.
\end{proof}



The upper bounds in the theorem follows from the next propositions.

\ignore{
\begin{proposition}
% 	Assume that demands are all rational numbers.
	The best equilibrium has revenue of at least $\Omega(1/\sqrt{D})$
	fraction of the optimal social welfare.
\end{proposition}
\begin{proof}
	For ease of notation we wish to convert the setting so that the demand is given as $k$ unit-demands
	at prices $v_1 > v_2 > \cdots v_k$, so that for every $i$,
	$\D(v_i)=i$.
	Assume that the demands are rational numbers.\footnote{
	If the demands are irrational then we $\epsilon$-approximate them by rational numbers without changing the internal
	order between any two $(v_i - v_j/2) \cdot \D(v_i - v_j/2)$ thus maintaining the symmetric equilibria exactly and the approximation factors to
	within an error that can go to 0 in the limit.}
	To convert to the setting of $k$ unit-demands, we first multiply the demands
	by the common denominator and then replace the multiple units of demand at each price by multiple $\epsilon$-perturbed
	larger values with strict inequalities between these values, maintaining exactly the demand at each original price.
	Notice that this transformation maintains (exactly) the equilibria of the original game.
	The parameter $D$ of the original setting
	is now read as $D=k/h$, where $h$ is the index in the new game that corresponds to the lowest possible non-zero demand
	in the old game.
	Let us further denote the index of the best equilibrium by $t$
	so that $(v_t/2,v_t/2)$ is an equilibrium with demand $t$ (and revenue
	$r_t=t\cdot v_t$).  Clearly $t \ge h$, so $k/t \le D$.
	
	Let us consider the symmetrized best-reply dynamics starting from
	an equal split of some value $p_0 = v_i \le v_t$, and denote by $p_0 < p_1 < ... p_m = v_t$ the sequence of total
	prices reached by this dynamic.
	%We argue that it must have a sequence of increasing total prices,
	%that is if the price after $i$ steps is $p_i$ then $p_i<p_{i+1} \leq p_t$.	
  Indeed, by Proposition \ref{prop:sym-dynamics} and its proof, the symmetric best response dynamic
	starting from $(p_0/2,p_0/2)=(v_i/2,v_i/2)$ must be monotonic (with respect to the total price) and as $p_i<v_t$ and since $(v_t/2,v_t/2)$ is the
	lowest price equilibrium, the dynamic must have increasing total price, thus $p_{i+1}> p_i$.
	It must also reach $(v_t/2,v_t/2)$, and thus any deviation from $(v_i/2,v_i/2)$ must be to price with total price
	$p_j \leq v_t$.
		
	This gives	us a sequence $p_0 < p_1 < \cdots < p_t$ of total prices, where
	at each stage $p_{i+1}-p_i/2$ is a best response to $p_i/2$, and
	$(p_t/2,p_t/2)$ is the best equilibrium.  Denote the
	demand at combined price $p_i$ by $d_i = \D(p_i)$, and the
	revenue by $r_i = d_i \cdot p_i$.
	We can now apply Lemma \ref{lem-sqrt-bound} to each stage and get
$(r_{i+1}/r_i)^2 \ge d_{i+1}/d_i$, and putting all these inequalities
together get $(r_t/r_0)^2 \ge d_t/d_0$ so
	$v_i = p_0 \le \sqrt{t/i} \cdot v_t$.
	
	We will calculate the total welfare in two parts: from
	players whose value is greater than $v_t$ and from those whose
	value is less or equal to $v_t$.  The latter is
	$\sum_{i=t}^k v_i \le \sqrt{t} \cdot v_t \cdot \sum_{i=t}^k (1/\sqrt{i}) \le
	\sqrt{t} \cdot v_t \cdot O(\sqrt{k}) \le t \cdot v_t \cdot O(\sqrt{k/t}) = O(\sqrt{D} \cdot r_t)$.
	Lemma \ref{revwel} states that the former,
	$\sum_{i=1}^t v_i$ is bounded from above by $O(\log D \cdot r_t)$.
	Adding the two parts up concludes
	the proof.
\end{proof}

}% ignore

We start with a preliminary proposition that shows that the revenue of
the best equilibrium is $\sqrt{D}$-competitive with the monopolist {\em revenue}.
Below we will strengthen this proposition showing that it is even competitive with respect
to the optimal social welfare.

\begin{proposition}
The best equilibrium has revenue of at least $1/\sqrt{D}$ fraction
of the monopolist revenue.
\end{proposition}

\begin{proof}
Let us consider the symmetrized best-reply dynamics starting from
an equal split of the monopoly price.  By Proposition \ref{prop:sym-dynamics} and its proof, this gives
us a sequence $p_0 < p_1 < \cdots < p_t$ of price levels where
at each stage $p_{i+1}-p_i/2$ is a best response to $p_i/2$, and
$(p_t/2,p_t/2)$ is the best equilibrium.  Denote the
demand at combined price $p_i$ by $d_i = \D(p_i)$, and the
revenue by $r_i = d_i p_i$.

We can now apply the previous lemma to each stage and get
$(r_{i+1}/r_i)^2 \ge d_{i+1}/d_i$, and putting all these inequalities
together get $(r_t/r_0)^2 \ge d_t/d_0$.  The theorem follows since
$d_t/d_0 \ge 1/D$ and $r_0$ is the monopolist revenue.
\end{proof}

We now provide the stronger proof.

\begin{proposition}
% 	Assume that demands are all rational numbers.
	The best equilibrium has revenue of at least $\Omega(1/\sqrt{D})$
	fraction of the optimal social welfare.
\end{proposition}


\begin{proof}
For ease of notation we wish to convert the setting so that the demand is given as $k$ unit-demands
at prices $v_1 > v_2 > \cdots v_k$, so that for every $i$,
$\D(v_i)=i$.  The way that we do this is by first multiplying the demands (that we assume are rational numbers\footnote{
	If the demands are irrational then we $\epsilon$-approximate them by rational numbers without changing the internal
	order between any two $(v_i - v_j/2) \cdot \D(v_i - v_j/2)$ thus maintaining the symmetric equilibria exactly and the approximation factors to
	within an error that can go to 0 in the limit.})
by the common denominator and then replacing the multiple units of demand at each price by multiple $\epsilon$-perturbed
values with strict inequalities between these values, maintaining exactly the demand at each original price.
Notice that this transformation maintains (exactly) the equilibria of the original game.
The parameter $D$ of the original setting
is now read as $D=k/h$, where $h$ is the index in the new game that corresponds to the lowest possible non-zero demand
in the old game.
Let us further denote the index of the best equilibrium by $t$
so that $(v_t/2,v_t/2)$ is an equilibrium with demand $t$ (and revenue
$r_t=tv_t$).  Clearly $t \ge h$, so $k/t \le D$.

If we apply the previous symmetrized best-response
process, as in the proof of the previous proposition, but now starting from
any price $p_0 = v_i$ with $i \ge t$.  Again, by Proposition \ref{prop:sym-dynamics} and its proof
we always reach the same (best) equilibrium
point $(v_t/2, v_t/2)$ so using the same argument
we have $(t v_t / i v_i)^2 \ge t/i$ and thus $v_i \le \sqrt{t/i} \cdot v_t$.

We will calculate the total welfare in two parts: from
players whose value is greater than $v_t$ and from those whose
value is less or equal to $v_t$.  The latter is
$\sum_{i=t}^k v_i \le \sqrt{t} \cdot v_t \cdot \sum_{i=t}^k (1/\sqrt{i}) \le
\sqrt{t} \cdot v_t \cdot O(\sqrt{k}) \le t \cdot v_t \cdot O(\sqrt{k/t}) = O(\sqrt{D} \cdot r_t)$.
Lemma \ref{revwel} states that the former,
$\sum_{i=1}^t v_i$ is bounded from above by $O(\log D \cdot r_t)$.
Adding the two parts up concludes
the proof.
\end{proof}


\begin{proposition}
	For any instance $(\vec{v},\vec{d})$ with $n$ demand levels it holds that  the optimal welfare is at most factor $2^n -1$ larger than the welfare of the highest welfare equilibrium, and the revenue of the monopolist is at most factor $2^{n-1}$ larger than the total revenue of the highest revenue equilibrium.
\end{proposition}
\begin{proof}
	Consider the symmetrized best response dynamics starting from $(0,0)$. After the first best responses the total price equals the price of the monopolist $p^*$. From this point the dynamics continues, and we have shown that is stops at the best equilibrium (one with the highest welfare and revenue among all equilibria), increasing the total price at each step of the dynamics, till the dynamics stops.
	% Assume that the optimal welfare is $W$, it is achieved by the lowest total price $v_n$.
	We claim that the $i$ steps (increases to the total price) the revenue is at least $R(p^*)/2^i$. This is so as at each step each of the sellers gets half the revenue of the given price, and for the dynamics not to stop, the revenue he gets after increasing his price must be at least as before, thus the new total is at least half the previous total revenue. We conclude by induction that after the maximal number of prices increases from the monopolist price (at most $n-1$ increases), the total revenue is at least $R(p^*)/2^{n-1}$.
	
	% Next consider the symmetrized best response dynamics starting from $(v_n/2,v_n/2)$. Note that the highest welfare is $SW(v_n)$.   Similar argument to the one presented above shows that the revenue after $i$ price increases is at least $R(v_n)/2^i$, and the revenue (and thus also the welfare) when the dynamics stops is at least $R(v_n)/2^{n-1}$.
	
	We saw that the total revenue (and thus welfare) in equilibrium is at least  $R(p^*)/2^{n-1}$. %\geq  R(v_n)/2^{n-1}$.
	The ratio between the best equilibrium welfare and the optimal welfare is therefore at least
	$$\frac{R(p^*)}{SW(v_n)\cdot 2^{n-1}}\geq \frac{R(p^*)}{\left(\sum_{i=1}^n (v_i \cdot d_{i})\right)\cdot 2^{n-1}}=
	\frac{1}{\left(\sum_{i=1}^n \frac{v_i \cdot d_{i}}{R(p^*)}\right)\cdot 2^{n-1}}\geq $$
	$$\frac{1}{\left(\sum_{i=0}^{n-1} \frac{1}{2^i}\right)\cdot 2^{n-1}}\geq
	\frac{1}{\left(2-\frac{1}{2^{n-1}}\right)\cdot 2^{n-1}}=
	\frac{1}{2^{n}-1}$$
	as claimed.
\end{proof}

\subsection{Proof of Theorem \ref{thm:POS-LB}}
\label{sec:proof-pos-lb}

We first present the lower bound that grows asymptotically as $\sqrt{D}$.


\begin{lemma}
	\label{lem:POS-LB-D}
	For any integer $D>2$ there exist an instance $(\vec{v},\vec{d})$ with total demand $D$ (and $n=D$)
	and demands that are integer multiple of $d_1=1$ for which
	welfare and revenue in equilibrium is at most $3/\sqrt{2}$ while the optimal welfare is at least $\sqrt{D}$ and
	the revenue of a monopolist is  at least $D/\sqrt{D-1}= \Theta(\sqrt{D})$.
	% $POS_{REV}(\vec{v},\vec{d})\geq \frac{\sqrt{2}}{3}\frac{D}{\sqrt{D-1}}= \Omega(\sqrt{D})$.
	%%  $POS_{SW}(\vec{v},\vec{d})\geq \Omega(\sqrt{D})$ and 	$POS_{REV}(\vec{v},\vec{d})\geq\Omega(\sqrt{D})$.
\end{lemma}	
\begin{proof}
	Let $v_1= 1.001$ and let $v_i = 1/\sqrt{i-1}$ for $i\in \{2,4,\ldots,n  \}$. Let $d_i=i$ and note that $D=n$.
	We show that in any equilibrium the welfare (and thus the revenue) is at most $3/\sqrt{2}$,
	while the revenue of a monopolist in at least $D/\sqrt{D-1}$ (by pricing at $1/\sqrt{D-1}$), and the social welfare is
	$\sum_i v_i = 1.001+\sum_{i=2}^n 1/\sqrt{i-1} \geq \sqrt{D}$.
	
	We next show that in any equilibrium the welfare (and thus the revenue) is at most $3/\sqrt{2}$.
	Assume that we have an equilibrium $(p,q)$ such that $p+q=v_i$ and $i\geq 3$.
	By Lemma \ref{obs:total-price-convex} $(v_i/2, v_i/2)$ must also be an equilibrium.
	Since deviating to $v_{i-2}-v_i/2$ is not profitable for a player, we have that
	$iv_i/2 \ge (i-2)(v_{i-2}-v_i/2)$, i.e. $(i-1)v_i \ge (i-2)v_{i-2}$ so,
	unless $i \le 3$ (where $v_{i-2}=v_1=1.001$
	is not given by $1/\sqrt{i-1}$), we have $(i-1)/\sqrt{i-1} \ge (i-2)/\sqrt{i-3}$, which is false since
	$(i-1)(i-3) < (i-2)^2$. It follows that the only equilibria have $i \le 3$ for which the revenue and
	welfare are at most  $3/\sqrt{2}$.
\end{proof}

We next present the lower bound that  grows exponentially in $n$.

\begin{lemma}
	\label{lem:POS-LB-n}
	Fix $\epsilon>0$.
	For any integer $n\geq 2$ there exist an instance $(\vec{v},\vec{d})$ with $n$ demand levels for which the best equilibrium has welfare and revenue of $1$, while the optimal welfare is at least $2^n - 1- \epsilon$ and the monopolist revenue is at least $2^{n-1}-\epsilon$.
\end{lemma}
\begin{proof}
	Let $\delta>0$ be small enough.
	Let $\alpha=2-\delta$.
	For $i\in [n]$ let $v_i=\delta^{i-1} $ and $d_i=\left(\alpha^{i-1} - \delta^{n-i+1}\right)/v_i$.
	Note that $R(v_i) = v_i\cdot d_i = \alpha^{i-1} - \delta^{n-i+1}$ and for small enough $\delta$ the monopolist price is $v_n$
	and the monopolist revenue is $R(v_n) = v_n\cdot d_n = \alpha^{n-1} -\delta =  (2-\delta)^{n-1} - \delta $
	which tends to $2^{n-1}$ as $\delta$ goes to $0$.
	The welfare at the monopolist price $v_n$ is
	$SW(v_n) = d_1\cdot v_1+ \sum_{i=2}^n v_i (d_{i}-d_{i-1}) = % \leq \sum_{i=1}^n v_i \cdot d_{i} =
	1+ \sum_{i=2}^n \left(\alpha^{i-1}- \delta \alpha^{i-2} - \delta^{n-i+1} + \delta^{n-i+3} \right)=   2\cdot (2-\delta)^{n-1}-1 +f(\delta)$,
	when $f(\delta)$ is a function that tends to $0$ as $\delta$ tends to $0$, and this welfare tends to
	$2^n - 1$ when $\delta$ goes to $0$.  	
	
	
	% Let $v_1 = \frac{\alpha}{D^{1/n}}$. For $i\in [n]$ let $v_i=(v_1)^i$ and let $d_i = \frac{\alpha^n}{2v_1^i-v_1^n}$.
	We argue that for any equilibrium $(p,q)$ it holds that $p+q=v_1 =1$, and that there is at least one such equilibrium (this is trivial at $(1/2,1/2)$ is clearly an equilibrium when $\delta<1/2$).
	% Additionally, when $\delta$ goes to zero the welfare and monopolist revenue tend to  $2^n-1$ and  $2^{n-1}$, respectively. This is so as for small enough $\delta$ the monopolist will price at $v_n$ and get revenue of 	$(2-\delta)^{n-1}- \delta^{2n+i-1}$ which tends to $2^{n-1}$ when $\delta$ goes to $0$.
	
	To prove that there is no equilibrium $(p,q)$ such that  $p+q=v_i<v_1$ it is enough to prove that $(v_i/2,v_i/2)$ is not an equilibrium for any $i>1$ (by Lemma \ref{obs:total-price-convex}). Indeed, we show that $v_i/2$ is not a best response to $v_i/2$ by showing that $v_{i-1}-v_i/2$ gives higher revenue:
	\begin{align*}	
	& d_i\cdot v_i/2<d_{i-1}(v_{i-1}-v_i/2) = d_{i-1}\cdot v_{i-1}(1-\delta/2)  = d_{i-1}\cdot v_{i-1}\cdot (2-\delta)/2  \\
	& \Leftrightarrow \alpha^{i-1} - \delta^{n-i+1} < \left(\alpha^{i-2} - \delta^{n-i+2}\right) \cdot \alpha \Leftrightarrow  1>\alpha\cdot \delta = (2-\delta)\cdot \delta
	\end{align*}
	which holds when $\delta$ is small enough.	 	
\end{proof}


\end{document}
