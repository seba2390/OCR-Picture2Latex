%% 2019-03-25, second+epsilon alpha version 
%% CR style file, all series
%% Metadata
%  Journal title
\protected@edef\currentjournaltitle{Comptes Rendus. \CDRcrasseries}
%  journal publisher
\protected@edef\currentjournalpublisher{Acad\'emie des sciences, Paris}
%
%% The website
\def\CDRdomain{academie-sciences.fr/}
\xdef\journalURL{https://comptes-rendus.\CDRdomain\cdr@journaldirectory/}%
\def\CDRserviceName{centre Mersenne}
%
\let\cdr@presentedby\@empty
\def\PresentedBy#1{\gdef\cdr@presentedby{#1}}
\def\@set@presentedby{\cdr@presentedby@name\cdr@presentedby\@addpunct.}
\if@francais
\def\cdr@presentedby@name{Pr\'esent\'e par }
\else
\def\cdr@presentedby@name{Presented by }
\fi
%
\def\TopicFR#1{\gdef\cdr@topicFR{#1}}
\def\TopicEN#1{\gdef\cdr@topicEN{#1}}
\def\TopicEF#1#2{\gdef\cdr@topicEN{#1}\gdef\cdr@topicFR{#2}}
\def\RubricFR#1{\gdef\cdr@rubricFR{#1}}
\def\RubricEN#1{\gdef\cdr@rubricEN{#1}}
\def\RubricEF#1#2{\gdef\cdr@rubricEN{#1}\gdef\cdr@rubricFR{#2}}
%
%%geometry
\paperwidth=192truemm
\paperheight=262truemm
\ifx\undefined\pdfpagewidth\else
\pdfpagewidth\paperwidth
\pdfpageheight\paperheight
\fi
\setlength{\topmargin}{-12truemm}%
\setlength{\topskip}{13pt}
\setlength{\baselineskip}{12.2pt}
\setlength{\textheight}{\topskip}
\addtolength{\textheight}{48\baselineskip}%
%\textheight=210truemm
\headheight=10pt
\headsep 10mm
\marginparsep=10pt
\marginparpush=5pt
\marginparwidth=20mm
\footskip 14mm 

\pretolerance=600
\tolerance=2400 % INITEX sets this to 10000
\hbadness=2500
\vbadness=1000
\linepenalty=10
\hyphenpenalty=40
\exhyphenpenalty=50
\binoppenalty=700
\relpenalty=500
\clubpenalty=3000
\widowpenalty=4000 
\displaywidowpenalty=6000
\brokenpenalty=3000
\predisplaypenalty=10000
\doublehyphendemerits=600
\finalhyphendemerits=4000
\adjdemerits=10000
\emergencystretch=1.5em
\uchyph=1
\hfuzz.5pt
\lineskip=0pt 
%\calclayout


%% 
\normalparindent=12pt
\parindent=\normalparindent
\frenchspacing
%% ajust 10 pt interligne Fourier
\def\@mainsize{10}\def\@ptsize{0}%
  \def\@typesizes{%
    \or{5}{6}\or{6}{7}\or{7}{8}\or{8}{10.1}\or{9}{11.2}%
    \or{10}{12.2}% normalsize
    \or{\@xipt}{13}\or{\@xiipt}{14}\or{\@xivpt}{17}%
    \or{\@xviipt}{20}\or{\@xxpt}{24}}%
  \normalsize \linespacing=\baselineskip
%
%
\let\@listI\@listi
\@listi
%
%% Fonts
\ifcdr@m@nuscript
\IfFileExists{fourier.sty}{%
\PackageWarning{Mersenne/comptes Rendus}{Fourier font used}  
\usepackage{fourier}}
{\PackageWarning{Mersenne/comptes Rendus}{Fourier font not installed,
    the article will have to be retypeset!}}  
\else
\usepackage[expert]{fourier}
\pdfmapfile{=fourier.map}
\pdfmapfile{=fourier-utopia-expert.map}
\fi
\def\@captionheadfont{\bfseries}%
\def\cdr@up{}%
%% Float captions
\captionindent=\normalparindent
\long\def\@makecaption#1#2{%
  \setbox\@tempboxa\vbox{\color@setgroup
    \advance\hsize-2\captionindent\noindent
    \@captionfont\@captionheadfont#1%
    \def\cdr@tmp@{\ignorespaces \ifHy@nesting \hyper@@anchor {\@currentHref }{}\else
      \Hy@raisedlink {\hyper@@anchor {\@currentHref }{\relax }}\fi}%
    \def\cdr@tmp@@{#2}%
%    \@xp\ifx\csname hyper@@anchor\endcsname\relax
    \ifx\cdr@tmp@@\cdr@tmp@\cdr@tmp@\else
    \def\cdr@tmp@{\ignorespaces}%
    \ifx\cdr@tmp@@\cdr@tmp@\else% \@xp\@ifnotempty\@xp{\@cdr#2\@nil}{
    \captionseparator\@captionfont\cdr@up\enspace#2
    \fi\fi
    \unskip\kern-2\captionindent\par
    \global\setbox\@ne\lastbox\color@endgroup}%
  \ifhbox\@ne % the normal case
    \setbox\@ne\hbox{\unhbox\@ne\unskip\unskip\unpenalty\unkern}%
  \fi
  % \ifdim\wd\@tempboxa=\z@ % this means caption will fit on one line
  %   \setbox\@ne\hbox to\columnwidth{\hss\kern-2\captionindent\box\@ne\hss}%
  % \else % tempboxa contained more than one line
    \setbox\@ne\vbox{\unvbox\@tempboxa\parskip\z@skip
        \noindent\unhbox\@ne\advance\hsize-2\captionindent\par}%
%  \fi
  \ifnum\@tempcnta<64 % if the float IS a figure...
    \addvspace\abovecaptionskip
    \hbox to\hsize{\kern\captionindent\box\@ne\hss}%
  \else % if the float IS NOT a figure...
    \hbox to\hsize{\kern\captionindent\box\@ne\hss}%
    \nobreak
    \vskip\belowcaptionskip
  \fi
\relax
}
%
%% Page layout
\pagenumbering{arabic}%
%% 1st page
\def\ps@firstpage{\count@=\currentyear
  \ps@plain
  \def\@oddfoot{{\scriptsize    
      ISSN (electronic) : \@Eissn\hfill\texttt{\url{\journalURL}}
}}
  \let\@evenfoot\@oddfoot
  \def\@oddhead{\@serieslogo\hss}%
  \let\@evenhead\@oddhead % in case an article starts on a left-hand page
}
%
%% Identificiation article 1st page
\def\pageinfosep{-} \def\printDOI{\ifx\CDRdoi\@empty
  \textcolor{red}{DOI unassigned
    yet}\else\url{https://doi.org/\CDRdoi}\fi}
\def\@logofont{\footnotesize} \def\article@logo{%
  \set@logo{\hsize\textwidth%
    {\Large\textit{Comptes Rendus\\
        \CDRcrasseries}\\[2pt]} \ifx\@empty\currentvolume
    \textbf{Draft}
    \else \textbf{\currentyear}, \currentvolume, \no \currentissue, p.\,\pageinfo\\
    \texttt{\printDOI} \fi
    \hfill\raisebox{-3mm}[0pt][0pt]{\includegraphics[height=16mm]{Logo_Academie_grisfonce.pdf}}\\[18bp]
    \centerline{\rule{.8\textwidth}{1.5bp}}
%    \vspace*{10pt}
  }%
}
%
%%  Copyright
\def\@setcopyright{}%
%% Standard pages
\def\ps@headings{\ps@empty
  \def\@evenhead{%
    \setTrue{runhead}%
    \rlap{\thepage}{}%\scshape
    \footnotesize\def\lastname####1{%\textsc
      {####1}}%
    \hfil
    \def\thanks{\protect\thanks@warning}%
    \leftmark{}{}\hfil}%
  \def\@oddhead{%
    \setTrue{runhead}%
    \let\\\relax
    \hfil
    \def\thanks{\protect\thanks@warning}%
    % {\footnotesize\itshape\rightmark{}{}}\hfil
    % \llap{\thepage}{}%
    {\footnotesize\leftmark{}{}}\hfil
    \llap{\thepage}{}%
  }%
  \let\@mkboth\cdr@markboth
  \def\@oddfoot{%
    \scriptsize\textit{\shortpublname}, \textbf{\currentyear}, \currentvolume,
        \no\currentissue, \pageinfo\hfil
    }%
  \let\@evenfoot\@oddfoot
}
%
\def\currentyear{0000}

%% Alternative code for title/editors of special volumes
%% To be evaluated later
% \ifcdr@volume
%  \def\maketitle{%\@makePDFinfo
%   \def\cdrsom@out@filename{\cdr@idvol.cdrsom}%
%   \@makeSOM
%  } 
%  \def\enddoc@text{}
% \else
%   \let\cdr@specialvolshortresps\@empty
%   \let\cdr@specialvolresps\@empty
%   \let\cdr@specialvoltitle@french\@empty
%   \let\cdr@specialvoltitle@english\@empty
%   \let\cdr@specialvolabstract@french\@empty
%   \let\cdr@specialvolabstract@english\@empty
% \AtBeginDocument{%
% \begingroup\makeatletter
% \newcommand\SomLine[9]{%
%   \gdef\cdr@specialvolshortresps{#1}%
%   \gdef\cdr@specialvolresps{#2}%
%   \gdef\cdr@specialvoltitle@french{#5}%
%   \gdef\cdr@specialvoltitle@english{#4}%
%   \gdef\cdr@specialvolabstract@french{#7}%
%   \gdef\cdr@specialvolabstract@english{#6}%
%   }%
% \InputIfFileExists{../\CDRidvol.cdrsom}{%
% \message{** Fichier  \CDRidvol.cdrsom charg\'e pour
%   cet article **^^J}}{%
% \message{** Pas de fichier \CDRidvol.cdrsom  pour ce volume !**^^J}}%
% \makeatother\endgroup}
% \fi

\pagestyle{headings}%
%
\setlength{\@titletopskip}{26\p@}
\setlength{\@titlebotskip}{0\p@}
%% title presentation 
\def\@settitle{%
  \begin{flushleft}
 \vspace*{10pt}

 \strut\ifx\TITREspecial\@empty\else%\ifcdr@specialtitre
 {%\textbf
      {\itshape
        \Large\TITREspecial}}\fi

    \vspace*{4pt}
 
    \strut
    \@setTopicORRubric

   \vspace*{10pt}

   \def\baselinestretch{1.2}\large%\vfil
   {\Huge%\itshape
     \@title\par}

    {\huge\itshape

      \ifx\@alttitle\@empty\else   

      \vspace*{14pt}

      \@alttitle\par\fi}
 
    \vspace*{16pt}

  \end{flushleft}%
}
%
\def\@setTopicORRubric{%
\if@francais
   \ifx\cdr@topicFR\@empty
% rubric and topic mutually exclusive
     \ifx\cdr@rubricFR\@empty\else
       {%\textbf
       {%\itshape
         \large\cdr@rubricFR\ifx\cdr@rubricEN\@empty\else\,/\,%
         \itshape\cdr@rubricEN\fi}}%
     \fi
   \else
    {%\textbf
      {%\itshape
        \large\cdr@topicFR\ifx\cdr@topicEN\@empty\else\,/\,%
         \itshape\cdr@topicEN\fi}}%
   \fi
  \else
   \ifx\cdr@topicEN\@empty
% rubric and topic mutually exclusive
     \ifx\cdr@rubricEN\@empty\else
       {%\textbf
       {%\itshape
         \large\cdr@rubricEN\ifx\cdr@rubricFR\@empty\else\,/\,%
         \itshape\cdr@rubricFR\fi}}%
     \fi
   \else
    {%\textbf
      {%\itshape
        \large\cdr@topicEN\ifx\cdr@topicFR\@empty\else\,/\,%
         \itshape\cdr@topicFR\fi}}%
   \fi
  \fi
}

\let\@ESM\@empty
\newcommand\ESM[1]{\def\@ESM{#1}}

\def\cdr@preabstracthook{\par\bigskip}%
%   {\abstractfont\leftskip\abstractmargin\rightskip\leftskip{\parindent\z@%
%   \ifx\@empty\@dateaccepted \textcolor{red}{This article is a draft (not yet accepted!)}%
%   \else \@setdate\fi}\par\bigskip
% }}
\def\cdr@interabstracthook{\par}%\smallskip}
\def\cdr@postabstracthook{\par
  \ifx\@empty\@keywords\else\@@par\leftskip\abstractmargin\rightskip\leftskip{\parindent\z@\@setkeywords}\smallskip\fi
  \ifx\@empty\@altkeywords\else \@@par\leftskip\abstractmargin\rightskip\leftskip{\parindent\z@\@setaltkeywords}\smallskip\fi
  \ifx\@empty\@subjclass\else \@@par\leftskip\abstractmargin\rightskip\leftskip{\parindent\z@\@setsubjclass}\smallskip\fi
  \ifx\@empty\thankses\else
  \@@par\leftskip\abstractmargin\rightskip\leftskip{\parindent\z@\@setthanks}\smallskip\fi%
  \ifx\@empty\@ESM\else
  \@@par\leftskip\abstractmargin\rightskip\leftskip{\parindent\z@\@setESM}\smallskip\fi%
  \par\medskip
  {\abstractfont\leftskip\abstractmargin\rightskip\leftskip{\parindent\z@%
   \ifx\@empty\@dateaccepted \textcolor{red}{This article is a draft (not yet accepted!)}%
   \else \@setdate\fi}\par\bigskip}%
  \ifnum\CorrA=\z@\else{\def\@thefnmark{\rule{0pt}{10pt}$*\,$}%
    \@footnotetext{\def\CDRss{\ifnum\CorrA>\@ne\relax s\fi}\if@francais
      Auteur\CDRss\ correspondant\CDRss\else Corresponding author\CDRss\fi.}}\fi
 \vskip24pt plus 8pt}
%
\def\abstractheadfont{\bfseries}
\def\@setabstracthead{{\abstractheadfont\abstractname\unskip.\kern.25em\ignorespaces}}
\def\@setaltabstracthead{{\abstractheadfont\altabstractname\unskip.\kern.25em\ignorespaces}%
}
%
%% authors
\def\@firstauthor#1\and#2\stop{#1}
\def\shortrunauthors{\gdef\@maketitle@shortauthors@hook{\def\topauthors{\@xp\@firstauthor\authors\stop\ \etal}}}
 \if@francais
  \def\manuscriptname{Manuscrit}%
  \def\receivedname{re\c cu}%
  \def\revisedname{r\'evis\'e}%
  \def\acceptedname{accept\'e}%
  \def\@@and{et}%
 \else
  \def\manuscriptname{Manuscript}%
  \def\receivedname{received}%
  \def\revisedname{revised}%
  \def\acceptedname{accepted}%
  \def\@@and{and}%
 \fi
%
\AtBeginDocument{\ifx\@daterevised\@dateaccepted\global\cdr@revisedacceptedtrue\fi
\ifx\@datereceived\@dateaccepted\global\cdr@receivedacceptedtrue\fi}
%
%%%%% presentation auteurs 
%\def\@@and{\&}
 \def\author@andify{%
   \nxandlist {\unskip ,\penalty-2 \space\cdr@count@hasaddr=\z@\ignorespaces}%
     {\unskip {} \cdr@count@hasaddr=\z@\@@and~}%
     {\unskip {} \penalty-2  \cdr@count@hasaddr=\z@\@@and~}%
 }
% \def\@maketitle@shortauthors@hook{\msia@shortauthor@andify\shortauthors\let\topauthors\shortauthors}
\newcount\cdr@thankcount
\cdr@thankcount\z@
\ifcdr@ltxgrid\else
\def\@alph#1{\ifcase#1\or a\or b\or c\or d\else\@ialph{#1}\fi}
\def\@ialph#1{\ifcase#1\or \or \or \or \or e\or f\or g\or h\or i\or j\or
 k\or l\or m\or n\or o\or p\or q\or r\or s\or t\or u\or v\or w\or x\or
 y\or z\or aa\or bb\or cc\or dd\or ee\or ff\or gg\or hh\or ii\or jj\or
 kk\or ll\or mm\or nn\or oo\or pp\or qq\or rr\or ss\or tt\or uu\or
 vv\or ww\or xx\or yy\or zz\else\@ctrerr\fi}
\fi
\def\cdr@CorrespondingAuthorIs{0}
\def\CDRorcid#1{\relax}
\let\IsCorresp\relax
\newcount\CorrA\CorrA=\z@
\def\display@orcid#1{%
  \href{https://orcid.org/#1}{%
    \raisebox{.7ex}[0pt][0pt]{%
%      \includegraphics[height=1.1ex]{orcid.png}{}%
      \includegraphics[height=1.1ex]{orcid-bw.png}}%
%{\usefont{TU}{academicons}{m}{n}\symbol{"E9D9}}}%
    }
}
\newcount\cdr@count@hasaddr\cdr@count@hasaddr=\z@%
\def\@setauthors{%
  \begingroup
  \def\CDRorcid##1{\kern1pt\display@orcid{##1}}%
  \def\IsCorresp{\textsuperscript{$*$,}\global\advance\CorrA\@ne\relax}%
  \def\thanks{\protect\thanks@warning}%
  \author@andify\authors
  \def\\{\space}%
  \def\Same{\same}%
  \def\New{\new}%
  \def\hasaddress##1##2{%
    \ifnum\cdr@count@hasaddr=\z@\kern.1em\fi
    \@ifempty{##1}{% cas pas sameaddress
%% increment de compteur
\global\advance\cdr@thankcount\@ne%
\textsuperscript{\ifnum\cdr@count@hasaddr>\z@, \fi
  \textit{\@alph\cdr@thankcount}}%
}{% cas sameaddress
\def\What{##1}\ifx\What\Same
%% pas d'increment de compteur
\textsuperscript{\ifnum\cdr@count@hasaddr>\z@, \fi
  \textit{\@alph\cdr@thankcount}}%
\else\ifx\What\New
%% increment de compteur
\global\advance\cdr@thankcount\@ne%
\textsuperscript{\ifnum\cdr@count@hasaddr>\z@, \fi
  \textit{\@alph\cdr@thankcount}}%
\else
%% manual numbering mode, produced by addressSameAs
\count@=##1\relax
\textsuperscript{\ifnum\cdr@count@hasaddr>\z@, \fi
  \textit{\@alph\count@}}%
\fi\fi}\advance\cdr@count@hasaddr\@ne}%
\begin{minipage}[t]{.9\linewidth}\raggedright
  \large\ifx\textsb\undefined\textbf{\authors}\else\textsb{\authors}\fi\hfill\break%
  \ifx\@empty\contribs \else \\\penalty-3 \space \@setcontribs
  \@closetoccontribs \fi
  \par
\end{minipage}\endgroup
}%
\def\@setafterauthor{%
  \vglue3mm%
%  \hspace*{0pt}%
\noindent\hspace*{\abstractmarginL}\begin{minipage}[t]{10cm}
%   \leftskip\normalparindent
  \raggedright
  \normalfont\Small
  \@afterauthor\par
 \end{minipage}
  \vskip2pt plus 3pt minus 1pt
}
\def\@afterauthor{\ifx\@empty\addresses \else\@setaddresses\par
\ifcdr@emails\ifcdr@existcurraddr\@setcurraddr\par\fi
\@setemails\par\fi
  \bigskip%
  \fi}
\newif\ifcdr@existcurraddr\cdr@existcurraddrfalse
\def\@setaddresses{%\par
  \begingroup
  \cdr@thankcount\z@
   \ifcdr@hyperref  \url@samestyle
   \else\def\url##1{##1}%
   \def\href##1##2{##2}\fi
   \def\affiliationonly##1{##1}%
   \def\snailmailonly##1{\relax}%
   \def\lastname##1{\relax}%
   \def\firstname##1{\relax}%
   \def\hasthanks##1{##1\@addpunct.\@par}
   \def\hasaddress##1{\relax}%
   \def\author##1{%\ifnum\cdr@notes@adress=\z@\else\@@par\indent\fi\global\advance\cdr@notes@adress1
     % \textsuperscript{\@alph\cdr@notes@adress}\kern.2em
     \def\\{ \ignorespaces}\ignorespaces}%
   \def\address##1##2{\begingroup
   \@ifempty{##1}{% cas pas addressSameAs
     \ifnum\cdr@thankcount>\z@\par\vskip4pt\fi\global\advance\cdr@thankcount\@ne
     \textsuperscript{\textit{\@alph\cdr@thankcount}}\kern.2em{\ignorespaces##2\unskip}}{}\endgroup}%
   \def\curraddr##1##2{%% Showing emails authorwise? Let's assume this follows the same logic as emails grouping.
     \ifcdr@emails\global\cdr@existcurraddrtrue\else
     \begingroup
     \@ifnotempty{##2}{\@@par\curraddrname{}\textit{\thsp:} %
       {\ignorespaces##2\unskip}\endgroup}\fi}%
   \def\email##1##2{%% Showing emails authorwise?
     \ifcdr@emails\else
     \begingroup
     \@ifnotempty{##2}{\@@par\emailaddrname{}%
       \@ifnotempty{##1}{ (##1)}\textit{\thsp:} %
       \href{mailto:##2}{##2}}\endgroup\fi
   }%
   \def\urladdr##1##2{\begingroup
%     \def~{\char`\~}%
     \@ifnotempty{##2}{\@@par\urladdrname{}\textit{\thsp:} %
       \url{##2}}\endgroup}%
   \addresses\@addpunct.%
   \endgroup
 }
\def\@setemails{%\par
  \begingroup
   \cdr@thankcount\z@
   \ifcdr@hyperref  \url@samestyle
   \else\def\url##1{##1}%
   \def\href##1##2{##2}\fi
   \def\affiliationonly##1{\relax}%
   \def\snailmailonly##1{\relax}%
   \def\lastname##1{\relax}%
   \def\firstname##1{\relax}%
   \def\hasthanks##1{\relax}
   \def\hasaddress##1{\relax}%
   \def\author##1{}%\ifnum\cdr@thankcount=\z@\else, \fi}
   \def\address##1##2{\relax}%
   \def\curraddr##1##2{\relax}%
   \def\email##1##2{%% Showing emails authorwise?
     \ifcdr@emails
     \begingroup
     \@ifnotempty{##2}{\ifnum\cdr@thankcount=\z@\else, \fi\href{mailto:##2}{##2}\@ifnotempty{##1}{ \mbox{(##1)}}}\endgroup\fi
     \global\advance\cdr@thankcount\@ne}%
   \def\urladdr##1##2{\relax}%
   \sbox\@tempboxa{\addresses\xdef\CDRess{\ifnum\cdr@thankcount>\@ne\relax s\fi}}%
   \ifdim\wd\@tempboxa>1em\relax
   \vskip2pt\@@par\textit{\emailsaddrname{}\CDRess\thsp:} 
   \cdr@thankcount\z@
   \addresses\@addpunct.%
   \fi
   \endgroup
 }
\def\@setcurraddr{%\par
  \begingroup
   \cdr@thankcount\z@
   \ifcdr@hyperref  \url@samestyle
   \else\def\url##1{##1}%
   \def\href##1##2{##2}\fi
   \def\affiliationonly##1{\relax}%
   \def\snailmailonly##1{\relax}%
   \def\lastname##1{\relax}%
   \def\firstname##1{\relax}%
   \def\hasthanks##1{\relax}
   \def\hasaddress##1{\relax}%
   \def\author##1{}%\ifnum\cdr@thankcount=\z@\else, \fi}
   \def\address##1##2{\relax}%
   \def\curraddr##1##2{%% Showing current addresses?
     \ifcdr@emails
     \begingroup
     \@ifnotempty{##2}{\ifnum\cdr@thankcount=\z@\else, \fi##2\@ifnotempty{##1}{ \mbox{(##1)}}}\endgroup\fi
     \global\advance\cdr@thankcount\@ne}%
   \def\email##1##2{\relax}%
   \def\urladdr##1##2{\relax}%
   \sbox\@tempboxa{\addresses\xdef\CDREss{\ifnum\cdr@thankcount>\@ne\relax es\fi}}%
   \ifdim\wd\@tempboxa>1em\relax
   \vskip2pt\@@par\textit{\curraddrname{}\CDREss\thsp:} 
   \cdr@thankcount\z@
   \addresses\@addpunct.%
   \fi
   \endgroup
 }
%%%% Fin pres aut

%% Footnotes 1st page
\def\@adminfootnotes{}%
%   \let\@makefnmark\relax  \let\@thefnmark\relax
%   \begingroup\normalparindent0pt\footnotesep10pt\relax
%\endgroup}
\def\@setsubjclass{%
  \abstractfont%\hskip-\normalparindent
  {\abstractheadfont\subjclassname.}\kern.25em\ignorespaces
  \@subjclass\@addpunct{{\upshape.}}\par}
\RequirePackage[english,iso]{isodate}
\origdate
\RequirePackage[shortlabels]{enumitem}  
\setlist{font=\upshape}
\newif\ifcdr@revisedaccepted\cdr@revisedacceptedfalse
\newif\ifcdr@receivedaccepted\cdr@receivedacceptedfalse
\def\datererevised#1{\def\@datererevised{#1}}%
\let\@datererevised\@empty
\def\daterevisedaccepted#1{\def\@daterevised{#1}\def\@dateaccepted{#1}\cdr@revisedacceptedtrue}
%
 \def\@setdate{%
  \if@francais
    \itshape\selectlanguage{french}%
    \noindent Manuscrit \ifx\@empty\cdr@presentedby\else pr\'esent\'e
    par \cdr@presentedby, \fi re\c cu  
      \ifcdr@receivedaccepted et accept\'e le \printdate\@datereceived
      \else
        le \printdate\@datereceived,
        \ifcdr@revisedaccepted	
           r\'evis\'e et  accept\'e le \printdate\@dateaccepted
        \else
          \ifx\@empty\@daterevised
          \else
            r\'evis\'e le \printdate\@daterevised
              \ifx\@empty\@datererevised
              \else\ et le \printdate\@datererevised
              \fi, 
          \fi
          accept\'e le \printdate\@dateaccepted
        \fi
      \fi.
  \else
    \itshape\selectlanguage{english}%
    \noindent Manuscript \ifx\@empty\cdr@presentedby\else presented
    by \cdr@presentedby, \fi received
    \ifcdr@receivedaccepted and accepted \printdate\@datereceived
    \else
     \printdate\@datereceived,
     \ifcdr@revisedaccepted
      revised and  accepted  \printdate\@dateaccepted
     \else
      \ifx\@empty\@daterevised
      \else
        revised  \printdate\@daterevised
        \ifx\@empty\@datererevised
        \else\ and
         \printdate\@datererevised
        \fi,
      \fi
       accepted  \printdate\@dateaccepted
     \fi
     \fi.
   \fi}

%
\def\dedicatoryfont{\normalfont\footnotesize\itshape}
\def\@setdedicatory{%
    \begingroup
      \def\signature##1{\nobreak\hskip 2em plus 1fil
        \penalty-5\hbox{}\nobreak\hfil\parfillskip=0pt
        \mbox{\upshape ##1}\par}
      \raggedleft
      \dedicatoryfont
      \@dedicatory\par
    \endgroup}
\def\@setkeywords{%
  \abstractfont%\hskip-\normalparindent
  {\abstractheadfont\keywordsname.}\kern.25em\ignorespaces
  \@keywords\@addpunct{{\upshape.}}\par}
\def\@setaltkeywords{%
  \abstractfont%\hskip-\normalparindent
  {\abstractheadfont\altkeywordsname.}\kern.25em\ignorespaces
  \@altkeywords\@addpunct{{\upshape.}}\par}
\newcount\cdr@numberofthanks\cdr@numberofthanks=\z@
\def\@setthanks{\abstractfont\def\thanks##1{\ifnum\cdr@numberofthanks=\z@\relax\else\@par
   \fi##1\@addpunct{{\upshape.}}\advance\cdr@numberofthanks1\relax}{\abstractheadfont\thanksname.}\kern.25em\ignorespaces\thankses\par}
\def\@setESM{%
  \abstractfont%\hskip-\normalparindent
  {\abstractheadfont\ESMname.}\kern.25em\ignorespaces
  \@ESM\@addpunct{{\upshape.}}\par}
\def\@settranslators{\par
  \begingroup
  \translatedby\ \andify\@translators
  {\sl \ignorespaces\@translators} \@@par
  \endgroup}
\if@francais
\def\cdr@correspondingname{Correspondance}
\def\keywordsname{Mots-cl{\'e}s}
\def\altkeywordsname{Keywords}
\def\subjclassname{Classification math{\'e}matique par sujets (2010)}
\def\thanksname{Financement}
\def\emailsaddrname{Courriel}
\def\ESMname{Mat{\'e}riel {\'e}lectronique suppl{\'e}mentaire}
\else
\def\cdr@correspondingname{Correspondance}
\def\keywordsname{Keywords}
\def\altkeywordsname{Mots-cl{\'e}s}
\def\subjclassname{Mathematical subject classification (2010)}
\def\thanksname{Funding}
\def\emailsaddrname{E-mail}
\def\ESMname{Electronic supplementary material}
\fi
\@xp\let\csname subjclassname@2010\endcsname \subjclassname
%
\def\longthankssection{\subsubsection*{Acknowledgements}}
\long\def\longthanks#1{\longthankssection

  #1}%
%
%
\def\enddoc@text{}
%
%% Page de garde
\def\@makePagedeGarde{%
\ifcdr@pagedegarde
{\makeatletter\input{CR-pagedegarde}}%
\newpage\ifcdr@HTML\pagecolor{white}\else\gdef\GPT@pageliteral{}\fi\fi}
%
\ifcdr@sommaire
\let\cdr@postabstracthook\@empty
\def\ps@firstpage{\count@=\currentyear
  \ps@plain
  \let\@oddfoot\@empty
  \let\@evenfoot\@oddfoot
  \def\@oddhead{\@serieslogo\hss}%
  \let\@evenhead\@oddhead % in case an article starts on a left-hand page
}
%
\let\ps@headings\ps@empty
\let\ps@plain\ps@empty
\def\article@logo{%
  \set@logo{\hsize\textwidth%
 {\Large\textit{Comptes Rendus\\
        \CDRcrasseries}\\[2pt]} \ifx\@empty\currentvolume
    \textbf{Draft}
    \else \textbf{\currentyear}, \currentvolume, \no
    \currentissue\fi\\
\mbox{}   \hfill\raisebox{-3mm}[0pt][0pt]{\includegraphics[height=16mm]{Logo_Academie_grisfonce.pdf}}\\[18bp]
    \centerline{\rule{.8\textwidth}{1.5bp}}
  }%
}
%
\def\smfbyname{\vspace*{-17mm}}
\def\lastname#1{#1}
\def\junior#1{\unskip, #1}%
\renewcommand{\@pnumwidth}{4.5em}
\def\@adminfootnotes{}
\def\enddoc@text{}
%% 
\newcommand\SomLine[9]{%
\def\lng{#3}\def\LNG{french}%
  \par \addpenalty\@secpenalty\addvspace{\medskipamount}%
    \begingroup\hyphenpenalty50\def\\{\allowbreak}%
	\parindent0pt
%    \parindent-\normalparindent \leftskip\normalparindent\relax 
    \rightskip\@pnumwidth% plus6em
    {\scshape\ignorespaces#1\unskip}\pointrait\ {}
	 \parfillskip-\@pnumwidth
%    \hskip1em
\ifx\lng\LNG#5\else#4\fi\unskip\leavevmode
                              %
    \nobreak\hskip2pt\nobreak \leaders\hbox{$\m@th \mkern 1.5mu\hbox{.}\mkern
      1.5mu$}\hfill \nobreak
     \hb@xt@\@pnumwidth{\@tocpagenum{\ignorespaces#8\unskip-\ignorespaces#9\unskip}}%
     \par
    \endgroup
%    \begingroup\parindent\normalparindent\relax\leftskip2.4em\footnotesize\ignorespaces#7\unskip\par
%    \endgroup
}
\fi
\ifcdr@volume
%\RequirePackage{url}
\def\@makefront{%
  \IncludeSom{\cdr@journalacro -Sommaire}%
  \cleardoublepage
}
\def\@makebody{%
  \ifcdr@newsom
  \immediate\write18{rm -f \cdr@journalacro -Sommaire-data.tex}%
  \fi
\ifcdr@specialtitre
  \newwrite\cdr@globalcfgfile
  \immediate\openout\cdr@globalcfgfile=\CDRidvol -global.cfg
  \immediate\write\cdr@globalcfgfile{\the\cdr@specialtitret}%
  \immediate\closeout\cdr@globalcfgfile
\fi
  \pagenumbering{arabic}%
  \setcounter{page}{\@FirstPage}%
  \tkkp={\setpage}%
}

\def\enddoc@text{}

\fi

%AJOUTS CS
%\RequirePackage{amssymb,upref}

\NumberTheoremsIn{}
\setcounter{tocdepth}{3}

%% Thms
\ifcdr@cdrthmdefs\OneNumberAllTheorems\fi
\def\th@plain{%
  \thm@bodyfont{\normalfont\itshape}%
  \thm@headfont{\normalfont\bfseries}%
  \thm@notefont{\normalfont\bfseries}%
  \thm@headpunct{.\kern.2em\ignorespaces}%
  \let\thm@indent\noindent 
  \def\thm@space@setup{%
    \thm@preskip=\smallskipamount
    \thm@postskip=\thm@preskip}%
  \itshape
}
\def\th@remark{%
  \thm@bodyfont{\normalfont}%
  \thm@headfont{\normalfont\bfseries}%
  \thm@notefont{\normalfont\bfseries}%
  \thm@headpunct{.\kern.2em}%
  \let\thm@indent\noindent 
  \def\thm@space@setup{%
    \thm@preskip=\smallskipamount
    \thm@postskip=\thm@preskip}%
}
\let\th@definition\th@plain
%\def\cdr@proofindent{\z@}%{1.5\parindent}
\renewenvironment{proof}[1][\proofname]{\par
  \pushQED{\qed}%
  \normalfont \topsep6\p@\@plus6\p@\relax
  \trivlist
  \item[\hskip\cdr@proofindent
        {\providecommand\printref{\relax}%
\bfseries
    #1\@addpunct{\cdr@proofpunct}}]\ignorespaces
}{%
  \popQED\endtrivlist\@endpefalse
}
%% Sectionning 
\def\@startsection#1#2#3#4#5#6{%
 \if@noskipsec \leavevmode \fi
 \par \@tempskipa #4\relax
 \@afterindenttrue
 \ifdim \@tempskipa <\z@ \@tempskipa -\@tempskipa \@afterindentfalse\fi
 \if@nobreak \everypar{}\else
     \addpenalty\@secpenalty\addvspace\@tempskipa\fi
 \@ifstar{\@dblarg{\@sect{#1}{\@m}{#3}{#4}{#5}{#6}}}%
         {\@dblarg{\@sect{#1}{#2}{#3}{#4}{#5}{#6}}}%
}
\def\@seccntformat#1{%
  \protect\textup{\protect\@secnumfont
    \csname the#1\endcsname
    \protect\@secnumpunct
  }%
}
\def\@sectionfamily{\normalfont}
\def\@sectionfont{\@sectionfamily\large\bfseries}
\let\contentsnamefont\@sectionfont
\def\@secnumfont{\selectfont}
%\def\@upn{\normalfont\selectfont}
\def\@subsectionfont{\@sectionfamily\large\itshape}
\def\@subsubsectionfont{\@sectionfamily\itshape}
\def\@paragraphfont{\normalfont\bfseries}


\def\section{\@startsection{section}{1}%
  \z@{-1.5\linespacing\@plus-.5\linespacing\@minus-.5\linespacing}{.8\linespacing\@plus.2\linespacing\@minus.3\linespacing}%
  {\@sectionfont}}
\def\subsection{\@startsection{subsection}{2}%
  \z@{-1.5\linespacing\@plus-.5\linespacing\@minus-.5\linespacing}{.8\linespacing\@plus.2\linespacing\@minus.3\linespacing}%
  {\normalfont\@subsectionfont}}
\def\subsubsection{\@startsection{subsubsection}{3}%
  \z@{.5\linespacing\@plus.5\linespacing}{.5\linespacing}%
  {\normalfont\@subsubsectionfont}}
\def\paragraph{\@startsection{paragraph}{4}%
  \z@{.5\linespacing\@plus.5\linespacing}{-\fontdimen2\font}%
  {\normalfont\@paragraphfont}}
%
\newcount\tochyphenpenalty
\tochyphenpenalty\@M
\def\@tocline#1#2#3#4#5#6#7{\relax
  \ifnum #1>\c@tocdepth % then omit
  \else
    \par \addpenalty\@secpenalty\addvspace{#2}%
    \begingroup \hyphenpenalty\tochyphenpenalty
    \@ifempty{#4}{%
      \@tempdima\csname r@tocindent\number#1\endcsname\relax
    }{%
      \@tempdima#4\relax
    }%
    \parindent\z@ \leftskip#3\relax
      \advance\leftskip\@tempdima\relax
    \advance\rightskip\@pnumwidth % plus1em
    \parfillskip-\@pnumwidth
    {#5{\leavevmode\hskip-\@tempdima #6}}%
    \nobreak
    \xleaders\hbox to1ex{\normalfont\hss.\hss}\hfil\nobreak
    \hbox to\@pnumwidth{\@tocpagenum{#7}}\par
    \nobreak
    \endgroup
  \fi}
%
\renewcommand{\tocpart}[3]{%
  \indentlabel{\@ifnotempty{#2}{\ignorespaces#1 #2.\kern1ex}}#3}
\let\tocsection\tocpart
\let\tocsubsection\tocsection
\let\tocsubsubsection\tocsection
\let\tocparagraph\tocsection
\def\l@part{\@tocline{-1}{12pt plus2pt}{0pt}{}{\bfseries\smf@boldmath}}
\def\l@section{\@tocline{1}{0pt}{0pc}{}{}}
\def\l@subsection{\@tocline{2}{0pt}{1pc}{}{}}
\def\l@subsubsection{\@tocline{3}{0pt}{2pc}{}{}}
\def\l@paragraph{\@tocline{5}{0pt}{3pc}{}{}}
\def\l@figure{\@tocline{0}{3pt plus2pt}{0pt}{}{}}
\let\l@table\l@figure
%
\def\@smfprotect{\let\smfcr\\\def\\{\protect\smfcr}}
\DeclareRobustCommand{\MakeUppercase}[1]{{%
    \@smfprotect\upchars@
    \protected@edef\reserved@a{#1}\uppercasenonmath\reserved@a\reserved@a}}
\protected@edef\MakeUppercase#1{\MakeUppercase{#1}}
%
% \def\@makefnmark{%
%   \leavevmode
%   \raise.9ex\hbox{\fontsize\sf@size\z@\normalfont(\@thefnmark)}%
% }%CS
%
%% Additional macros %%
\AtBeginDocument{%
\url@samestyle}
\emergencystretch2em
\arraycolsep 1.5pt
%%
\def\etal{{\normalfont\itshape et al.}}

\def\sautpage{\vadjust{\pagebreak}}
\newcommand\PB{\pagebreak}
\newcommand\SP{\sautpage}
\newcommand\SPB{\sautpage\break}
\newcommand\PBI{\pagebreak\noindent}


\endinput


%% predefined macros
\let\le\leqslant
\let\ge\geqslant 
\let\leq\leqslant   
\let\geq\geqslant
\let\emptyset\varnothing
\def\sfrac#1#2{{#1}/{#2}}
\def\loccit{loc.\kern3pt cit.\kern.3em}
\def\cf{cf.\kern.3em}
\def\eg{e.g.\kern.3em}
\def\ie{i.e.\kern.3em}
\def\resp{\text{resp.}\kern.3em}
\def\etc{etc.\kern.3em}
\let\ecc\etc
\let\oldsetminus\setminus
\let\setminus\smallsetminus
\newcommand{\arXiv}[1]{\href{http://arxiv.org/abs/#1}{\texttt{arXiv\string:\allowbreak#1}}}
\newcommand{\eprintHal}[1]{\href{https://hal.archives-ouvertes.fr/hal-#1}{\texttt{hal-#1}}}

\AtEndOfClass{%
\let\oldbigoplus\bigoplus
\let\oldbigcup\bigcup
\let\oldbigcap\bigcap
\let\oldbigotimes\bigotimes
\let\oldbigwedge\bigwedge
\let\oldcoprod\coprod
\def\sautpage{\vadjust{\pagebreak}}
\newcommand\PB{\pagebreak}
\newcommand\SP{\sautpage}
\newcommand\SPB{\sautpage\break}
\newcommand\PBI{\pagebreak\noindent}
}
\AtBeginDocument{%
\url@samestyle
\def\bigoplus{\mathop{\textstyle\oldbigoplus}\displaylimits}%
\def\bigcup{\mathop{\textstyle\oldbigcup}\displaylimits}%
\def\bigcap{\mathop{\textstyle\oldbigcap}\displaylimits}%
\def\bigotimes{\mathop{\textstyle\oldbigotimes}\displaylimits}%
\def\bigwedge{\mathop{\textstyle\oldbigwedge}\displaylimits}%
\def\coprod{\mathop{\textstyle\oldcoprod}\displaylimits}%
}
