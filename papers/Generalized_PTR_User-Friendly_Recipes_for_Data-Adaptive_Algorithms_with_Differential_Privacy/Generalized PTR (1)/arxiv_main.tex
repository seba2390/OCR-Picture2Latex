

\documentclass[11pt]{article}

\usepackage[letterpaper,margin=1in]{geometry}
\usepackage[parfill]{parskip}

\usepackage{authblk}

\usepackage[toc,page,header]{appendix}


\usepackage[utf8]{inputenc} % allow utf-8 input
\usepackage[T1]{fontenc}    % use 8-bit T1 fonts
\usepackage[colorlinks,citecolor=blue,urlcolor=blue,linkcolor=blue,linktocpage=true]{hyperref}       % hyperlinks
\usepackage{url}            % simple URL typesetting
\usepackage{booktabs}       % professional-quality tables
\usepackage{amsfonts}       % blackboard math symbols
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
\usepackage{microtype}      % microtypography
\usepackage{xcolor}         % colors
\label{key}
\usepackage{thmtools}

\usepackage{comment}
\usepackage{amsmath}

\usepackage{epsfig}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{subfigure}
\usepackage{multirow}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{array}
\usepackage{bbm}
\usepackage{color}
\usepackage{enumerate}
\usepackage{enumitem}
\setlist{leftmargin=10mm}
\usepackage{mathtools}
\usepackage{amsmath,amssymb,amsthm,bm}
\usepackage{amsfonts,graphicx}
\usepackage{mathrsfs}
\usepackage{algorithmic,algorithm}

\usepackage[authoryear]{natbib}
    % colors

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Notations
\newcommand{\blue}[1]{\textcolor{blue}{#1}}
\def\rdp{\mathrm{RDP}}

\def\er{\mathrm{Err}}
\def\dis{\mathrm{Dis}}
\def\pr{\mathrm{Pr}}
\def\E{\mathbb{E}}
\def\P{\mathbb{P}}
\def\argmax{Argmax}
\def\Cov{\mathrm{Cov}}
\def\Var{\mathrm{Var}}
\def\half{\frac{1}{2}}
\def\th{\mathrm{th}}
\def\tr{\mathrm{tr}}
\def\df{\mathrm{df}}
\def\dim{\mathrm{dim}}
\def\col{\mathrm{col}}
\def\row{\mathrm{row}}
\def\nul{\mathrm{null}}
\def\rank{\mathrm{rank}}
\def\nuli{\mathrm{nullity}}
\def\sign{\mathrm{sign}}
\def\supp{\mathrm{supp}}
\def\diag{\mathrm{diag}}
\def\Count{\mathrm{count}}
\def\Gauss{\mathrm{Gauss}}
\def\subsample{\mathsf{PoissonSample}}
\def\sparse{\mathsf{SparseVector}}
\def\Lap{\mathsf{Lap}}
\def\Gau{\mathsf{Gau}}
\def\rr{\mathsf{Random Response}}
\def\lap{\mathsf{Laplace Mechanism}}
\def\expon{\mathsf{Exponential Mechanism}}
\def\aff{\mathrm{aff}}
\def\hy{\hat{y}}
\def\ty{\tilde{y}}
\def\hbeta{\hat{\beta}}
\def\tbeta{\tilde{\beta}}
\def\htheta{\hat{\theta}}
\def\halpha{\hat{\alpha}}
\def\hf{\hat{f}}
\def\lone{1}
\def\ltwo{2}
\def\linf{\infty}
\def\lzero{0}
\def\T{^T}
\def \E{\mathbb{E}}
\def\hp{\hat{h}^{priv}}
\def\R{\mathbb{R}}
\def\cA{\mathcal{A}}
\def\cB{\mathcal{B}}
\def\cD{\mathcal{D}}
\def\cE{\mathcal{E}}
\def\cF{\mathcal{F}}
\def\cG{\mathcal{G}}
\def\cH{\mathcal{H}}
\def\cI{\mathcal{I}}
\def\cJ{\mathcal{J}}
\def\cO{\mathcal{O}}
\def\cL{\mathcal{L}}
\def\cM{\mathcal{M}}
\def\cN{\mathcal{N}}
\def\cP{P}
\def\cp{p} % denote the probability density
\def\cQ{\mathcal{Q}}
\def\cR{\mathcal{R}}
\def\cS{\mathcal{S}}
\def\cT{\mathcal{T}}
\def\cW{\mathcal{W}}
\def\cX{\mathcal{X}}
\def\cY{\mathcal{Y}}
\def\cZ{\mathcal{Z}}
\def\ls{\triangle_{LS}}
\def\TV{\mathrm{TV}}
\def\Int{\int_{-\infty}^{+\infty}}
\def \Intt{\int_{-\infty}^{T}}
\def \Inttc{\int_{-\infty}^{T+\triangle}}
\def \dt{\triangle t}
\newcommand{\diff}{\,\mathrm{d}}
\newcommand{\e}{\mathrm{e}}
\newcommand{\eps}{\varepsilon}
\newcommand{\argmin}{\text{argmin}}
\newcommand{\ttheta}{\tilde{\theta}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% THEOREMS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{assumption}[theorem]{Assumption}
%\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{claim}[theorem]{Claim}
\theoremstyle{plain}
\newtheorem{example}[theorem]{Example}





\title{Generalized PTR: User-Friendly Recipes for Data-Adaptive Algorithms with Differential Privacy}

\author{Rachel Redberg, Yuqing Zhu, Yu-Xiang Wang \\
University of California, Santa Barbara\\
\texttt{\{rredberg, yuqingzhu, yuxiangw\}@ucsb.edu} \\
}



\begin{document}

\maketitle



\begin{abstract}
    The ``Propose-Test-Release'' (PTR) framework \citep{dwork2009differential} is a classic recipe for designing differentially private (DP) algorithms that are data-adaptive, i.e. those that  add less noise when the input dataset is ``nice''. We extend PTR to a more general setting by privately testing \emph{data-dependent privacy losses} rather than \emph{local sensitivity}, hence making it applicable beyond the standard noise-adding mechanisms, e.g. to queries with unbounded or undefined sensitivity. We demonstrate the versatility of generalized PTR using private linear regression as a case study. Additionally, we apply our algorithm to solve an open problem from “Private Aggregation of Teacher Ensembles (PATE)” \citep{papernot2017, papernot2018scalable} --- privately releasing the entire model with a delicate data-dependent analysis.
\end{abstract}

\input{introduction}
\label{section:introduction}

\input{relatedwork}
\label{section:related_work}

\input{preliminary}
\label{section:preliminary}

\input{genPTR}
\label{section:genPTR}


%\vspace{-1em}
 \input{applications}

 \label{section:applications}

\input{conclusion}

\label{section:conclusion}

\subsection*{Acknowledgments}

The work was partially supported by NSF Award \# 2048091 and the Google Research Scholar Award. Yuqing was supported by the Google PhD Fellowship.


\newpage
\onecolumn

\appendix

\input{appendix}
 \input{pate_appendix}
\bibliographystyle{plainnat}
\bibliography{gen_ptr}


\end{document}
