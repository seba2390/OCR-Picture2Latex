
\lstdefinelanguage{fstar}{%
  morekeywords=[1]{type,and,val,fun,let,in,ref,try,if,then,else,match,with,open,as,module,rec,end,assume,private,when,forall,ghost,assert,function,logic,array,pattern,effect,requires,ensures,decreases,modifies, abstract},
  morekeywords=[2]{WP, Post, Pre, PURE, DIV, STATE, EXN, ALL, TotST, M, GHOST, BAD, GTot, Lemma},
  morekeywords=[3]{},
  morekeywords=[4]{},
  morestring=[b]",
  sensitive=true,%
  numbersep=4pt,
%  numbers=left,
  columns=[l]fullflexible,
  texcl=true,
  mathescape=true,
%  xleftmargin=10pt,
  identifierstyle={\sffamily},
  keywordstyle=[1]{\sffamily\maybecolor{dkblue}},
  keywordstyle=[2]{\sffamily\maybecolor{dkblue}},
  keywordstyle=[3]{\maybecolor{dkred}},
  keywordstyle=[4]{\rmfamily\itshape},
% Here is the range marker stuff
  rangeprefix=(*---\ ,
  includerangemarker=false,
  stringstyle=\ttfamily,
  showspaces=false,
  morecomment=[n]{(*}{*)},
  commentstyle={\itshape\maybecolor{dkred}},
  literate={->}{$\rightarrow\,$}{1}
           {<-}{$\leftarrow\,$}{1}
           {<>}{$\neq\,$}{1}
	   {delta}{$\delta$}{1}
	   {exists}{$\exists$}{1}
	   {forall}{$\forall$}{1}
      	   {True}{$\top$}{1}
      	   {False}{$\perp$}{1}           
           {fun}{$\lambda$}{1}
           {\\in}{$\in\,$}{1}
           {~}{$\neg$}{1}           
           {'a}{$\alpha$}{1}
           {'b}{$\beta$}{1}
           {'c}{$\gamma$}{1}
           {tau}{$\tau\,$}{1}
           {STATE0}{$\mathsf{ST}^\prime\,$}{1}
	   {/\\}{$\wedge\;$}{1}
	   {\\/}{$\vee\;$}{1}
           {>=}{$\geq\ $}{2}
           {<=}{$\leq\ $}{2}
	   {<==>}{$\Longleftrightarrow \ $}{3}
	   {==>}{$\Longrightarrow \ $}{3}
           {_}{\textunderscore}{1}
           {--}{-}{1}   % Added due to         - not displaying properly.  Weird. ... but may make arrows look bad  {...}{$\ldots$}{3}
     %{<<}{$\prec\ $}{1}
           ,
  breaklines=false}
