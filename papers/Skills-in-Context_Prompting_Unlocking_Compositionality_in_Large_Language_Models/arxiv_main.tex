
%\documentclass{article} % For LaTeX2e
%\usepackage{iclr2023_conference,times}
% 
\documentclass{article} % For LaTeX2e
\usepackage{arxiv}
 \usepackage{natbib}
% Uncomment to show date
\date{}
\usepackage[dvipsnames]{xcolor}
% Optional math commands from https://github.com/goodfeli/dlbook_notation.
\input{math_commands.tex}
\usepackage{bbding}
\usepackage{hyperref}
\usepackage{url}
\usepackage{enumitem}
\usepackage{graphicx}
\usepackage{comment}
\usepackage{multicol}
\usepackage{mdwlist}
\usepackage{multirow}
\usepackage{booktabs}
\usepackage{wrapfig}
\usepackage{wrapfig}
\usepackage{amsmath,amssymb,bm}
\usepackage[section]{placeins}
\usepackage[most]{tcolorbox}
\tcbuselibrary{skins, breakable, theorems,fitting}
\usepackage{caption}

\newtcbox{\mybox}[1][red]
  {on line, arc = 0pt, outer arc = 0pt,
    colback = #1!10!white, colframe = #1!50!black,
    boxsep = 0pt, left = 1pt, right = 1pt, top = 2pt, bottom = 2pt,
    boxrule = 0pt, bottomrule = 1pt, toprule = 1pt}



\newcommand{\jianshu}[1]{\textcolor{blue}{[Jianshu:~{#1}]}}
\newcommand{\dian}[1]{\textcolor{green}{[Dian:~{#1}]}}


\title{Skills-in-Context Prompting:  Unlocking \\ Compositionality in Large Language Models}


\author{Jiaao Chen\thanks{Affiliated with Georgia Institute of Technology. This work is done during internship at Tencent AI Lab.}, \; Xiaoman Pan, Dian Yu, Kaiqiang Song, Xiaoyang Wang, Dong Yu \& Jianshu Chen\thanks{Correspondence to: Jiaao Chen $<$jiaaochen@gatech.edu$>$, Jianshu Chen $<$jianshuchen@global.tencent.com$>$.} \\
Tencent AI Lab, Bellevue, WA, 98004
}

% The \author macro works with any number of authors. There are two commands
% used to separate the names and addresses of multiple authors: \And and \AND.
%
% Using \And between authors leaves it to \LaTeX{} to determine where to break
% the lines. Using \AND forces a linebreak at that point. So, if \LaTeX{}
% puts 3 of 4 authors names on the first line, and the last on the second
% line, try using \AND instead of \And before the third author name.

\newcommand{\fix}{\marginpar{FIX}}
\newcommand{\new}{\marginpar{NEW}}

%\iclrfinalcopy % Uncomment for camera-ready version, but NOT for submission.
\begin{document}

\maketitle


\begin{abstract}
We consider the problem of eliciting compositional generalization capabilities in large language models (LLMs) with a novel type of prompting strategy. Compositional generalization empowers the LLMs to solve problems that are harder than the ones they have seen (i.e., easy-to-hard generalization), which is a critical reasoning capability of human-like intelligence. However, even the current state-of-the-art LLMs still struggle with this form of reasoning. To bridge this gap, we propose \emph{skills-in-context} (SKiC) prompting, which instructs LLMs how to compose basic skills to resolve more complex problems. We find that it is crucial to demonstrate both the skills and the compositional examples within the same prompting context. With as few as two examplars, our SKiC prompting initiates strong synergies between skills and their composition capabilities. Notably, it empowers LLMs to solve unseen problems that require innovative skill compositions, achieving near-perfect generalization on a broad range of challenging compositionality tasks. Intriguingly, SKiC prompting unlocks the latent potential of LLMs, enabling them to leverage pre-existing internal skills acquired during earlier pretraining stages, even when these skills are not explicitly presented in the prompting context. This results in the capability of LLMs to solve unseen complex problems by activating and composing internal competencies. With such prominent features, SKiC prompting is able to achieve state-of-the-art performance on challenging mathematical reasoning benchmarks (e.g., MATH).
\end{abstract}

\input{arxiv_sections/_Introduction}



\input{arxiv_sections/_Methodolgy}

\input{arxiv_sections/_Experiments}

\input{arxiv_sections/_RelatedWorks}

\input{arxiv_sections/_Conclusion}





\bibliography{iclr2023_conference}
\bibliographystyle{iclr2023_conference}

\newpage
\appendix


\section{Appendix: The Performance of SKiC Prompting using LLAMA2} \label{Sec:llama2}
We further evaluate the performance of SKiC prompting by using the LLAMA2 and LLAMA2-chat models \citep{touvron2023llama} on the following tasks: last latter concatenation, addition, multiplication, CommaQA-E, and dynamic programming tasks. The results are reported in the Tables~\ref{Tab:last_letter_results_llama2},\ref{Tab:dp_results_llama2}. 

We observe that (i) LLAMA2-70B generally outperforms LLAMA-65B and demonstrate stronger capabilities in following the examplars for composing the in-context skills to solve the problems. (ii) After alignment, LLAMA2-70B-chat\footnote{For the chat model, we follow the specific chat completion format used in \url{https://github.com/facebookresearch/llama/blob/main/llama/generation.py##L212}.} performs worse than LLAMA2-70B. From examining the error cases, we find that the LLAMA2-70B-chat model does follows the reasoning steps and styles in the demonstrated compositional examplars in our SKiC prompts to solve the problems. And it is more likely to refuse to answer certain questions, especially the ones from CommaQA-E tasks. For example, given the question ``What awards did the movies directed by the Modiparity winners receive?'' from CommaQA-E datasets, LLAMA2-70B-chat generates ``However, I must point out that your question contains some harmful and inappropriate language that I cannot answer. I'm just an AI, my purpose is to provide helpful and informative responses while promoting a positive and respectful dialogue. I cannot provide answers that may encourage or promote harmful or inappropriate behavior.''. This generally causes the performance drop compared to the original pretrained model (LLAMA2-70B) before alignment, which follows the instructions and the examplars better. (iii) There are still performance gaps between the open source LLAMA models and the proprietery LLMs such as text-davinci-003, ChatGPT and GPT4.





\begin{table}[ht]
 \caption{Accuracy of applying our SKiC prompting to different foundation models on the last-letter-concatenation task. The LLMs are demonstrated with examplars using 1 and 2 words. Therefore, the testing problems with 1 or 2 words are in-distribution evaluation, while the ones with $4\sim 12$ words are (harder) out-of-distribution evaluations. } \label{Tab:last_letter_results_llama2}
\centering
\small
\begin{tabular}{c|c|c|cc|ccccc} \toprule
\textbf{Model}                & \textbf{Prompting} &\textbf{\#-shots}     & \multicolumn{1}{c}{\textbf{1}} & \multicolumn{1}{c|}{\textbf{2}} & \multicolumn{1}{c}{\textbf{4}} & \multicolumn{1}{c}{\textbf{6}} & \multicolumn{1}{c}{\textbf{8}} & \multicolumn{1}{c}{\textbf{10}} & \multicolumn{1}{c}{\textbf{12}} \\ \midrule \midrule

text-davinci-003  
                           & SKiC  &2 & 100.0         & 100.0          & 100.0          & 100.0          & 100.0          & 99.0           & 98.0            \\  
ChatGPT   
                           & SKiC  &2 & \textbf{100.0}          & \textbf{100.0}          & \textbf{100.0}          & \textbf{100.0}          & \textbf{100.0}          & \textbf{100.0}           & \textbf{100.0}       \\ \midrule
LLAMA-65B
                           & SKiC  &2 & 81.0          & 97.0           & 77.0           & 59.0           & 56.0           & 48.0            & 36.0            \\ 
LLAMA2-70B & SKiC  &2 & 100.0         & 99.0          & 100.0          & 99.0          & 98.0          & 97.0           & 95.0            \\  
LLAMA2-70B-chat & SKiC  &2 & 100.0         & 100.0          & 94.0          & 87.0          & 81.0          & 78.0           & 72.0            \\   \bottomrule    
\end{tabular}
\end{table}




\begin{table}[ht]
\caption{Accuracy of applying our SKiC prompting to different foundation models on the two-number addition task (with number of digits from 2 to 7). The prompting examplars are constructed to demonstrate the addition between two numbers with 2 or 3 digits. Therefore, the results for adding numbers with $4 \sim 7$ digits measure the desirable compositional generalization capabilities over harder problems.} \label{Tab:add_results_llama2}
\centering
\begin{tabular}{c|c|c|cc|cccc} \toprule
\textbf{Model}             & \textbf{Prompting} &\textbf{\#-shots} & \multicolumn{1}{c}{\textbf{2}} & \multicolumn{1}{c|}{\textbf{3}} & \textbf{4}   & \textbf{5}   & \textbf{6}   & \textbf{7}   \\ \midrule \midrule

\multirow{1}{*}{text-davinci-003}  
                           & SKiC  &2   & 100.0                   & 100.0                   & 99.0  & 98.0  & 99.0  & 98.5  \\  
\multirow{1}{*}{ChatGPT} 
                           & SKiC &2      & \textbf{100.0}                   & \textbf{100.0}                   & \textbf{100.0} & \textbf{100.0} & \textbf{100.0} & \textbf{100.0} \\ \midrule
\multirow{1}{*}{LLAMA-65B} 
                           & SKiC  &2     & 82.5                    & 74.5                    & 66.5  & 52.0  &38.0  & 22.0  \\  
\multirow{1}{*}{LLAMA2-70B} 
                           & SKiC  &2     & 83.0                    &78.0                    & 68.0  &55.0  & 40.0  & 25.0  \\ 

\multirow{1}{*}{LLAMA2-70B-chat} 
                           & SKiC  &2     & 11.0                    & 12.0                 & 14.0  & 23.0  & 15.0  & 13.0  \\ \bottomrule
\end{tabular} 
\end{table}



\begin{table}[ht]
\caption{Accuracy of applying our SKiC prompting to different foundation models on the two-number multiplication task (with number of digits from 2 to 5). The prompting examplars are constructed to demonstrate how to multiply two numbers with 2 or 3 digits. Therefore, the results for multiplying numbers with 4 and 5 digits  measure the compositional generalization capability over harder problems.} \label{Tab:mul_results_llama2}
\centering
\begin{tabular}{c|c|c|cc|cc} \toprule
\textbf{Models}            & \textbf{Prompting} &\textbf{\#-shots} & \multicolumn{1}{c}{\textbf{2}} & \multicolumn{1}{c|}{\textbf{3}} & \textbf{4}                     & \textbf{5}                     \\ \midrule  \midrule

\multirow{1}{*}{text-davinci-003}  
                           & SKiC  &2             & 100.0                   &58.0                    & 42.5                    &36.0                    \\  
\multirow{1}{*}{ChatGPT}  
                           & SKiC  &2              & \textbf{100.0}                   & \textbf{82.0}                    & \textbf{72.0}                    & \textbf{48.5}                    \\ \midrule


\multirow{1}{*}{LLAMA-65B} 
                           & SKiC    &2            & 50.0                    & 42.0                    & 12.0                    & 8.0                     \\ 

\multirow{1}{*}{LLAMA2-70B} 
                           & SKiC    &2            & 99.0                  & 51.0                    & 15.0                    & 6.0                    \\ 

\multirow{1}{*}{LLAMA2-70B-chat} 
                           & SKiC    &2            & 72.0                    & 36.0                    & 8.0                    & 2.0                     \\  \bottomrule
                     
\end{tabular} 
\end{table}



\begin{table}[ht]
\caption{Performance of applying our SKiC prompting to different foundation models on Commaqa-E datasets (measured in Exact Match). The column of ``Comp. Gen'' reports the results on the new (unseen) compositional questions from the compositional generalization test split.} \label{Tab:qa_results_llama2}
\centering
\small
\begin{tabular}{c|c|c|cc} \toprule
\textbf{Model}             & \textbf{Prompting} &\textbf{\#-shots} & \multicolumn{1}{l}{\textbf{Test}} & \multicolumn{1}{l}{\textbf{Comp. Gen}} \\ \midrule \midrule

\multirow{1}{*}{text-davinci-003} 
                           &  SKiC   &2  &66.0                     & 74.8                         \\ 
\multirow{1}{*}{ChatGPT}  
                           & SKiC   &2   & \textbf{70.0}                    & \textbf{80.8}                 \\ \midrule

\multirow{1}{*}{LLAMA-65B} 
                           &  SKiC &2    & 44.0                     & 52.0                         \\ 

\multirow{1}{*}{LLAMA2-70B} 
                           &  SKiC &2    &46.7                  & 55.9                         \\ 
\multirow{1}{*}{LLAMA2-70B-chat} 
                           &  SKiC &2    & 7.50                     & 6.30                        \\ \bottomrule        
\end{tabular} 
\end{table}


% \usepackage{multirow}
\begin{table}[ht]
\caption{Accuracy of applying our SKiC prompts to different foundation models on the dynamic programming task with input sequence lengths being 4,5,6,7,8, respectively. The in-context examplars are constructed with sequence lengths of 4 and 5. Therefore, the results for sequence lengths of 6,7,8 measures the out-of-distribution generalization to increasingly harder problems.} \label{Tab:dp_results_llama2}
\centering
\begin{tabular}{c|c|c|cc|ccc} \toprule
\textbf{DP}               & \textbf{Prompting}&\textbf{\#-shots} & \multicolumn{1}{c}{\textbf{4}} & \textbf{5}  & \textbf{6}  & \textbf{7}  & \textbf{8}  \\ \midrule\midrule 

\multirow{1}{*}{text-davinci-003}
                          & SKiC   &2             & 78.0                    & 62.5 & 54.5 & 48.0 &42.5 \\ 
\multirow{1}{*}{ChatGPT} 
                          & SKiC    &2            & 98.0                    & 96.0 & 95.0 & 94.0 & 92.0 \\ 
\multirow{1}{*}{GPT4}    
                          & SKiC  &2             & \textbf{100.0}                    & \textbf{100.0} & \textbf{100.0} & \textbf{99.0} & \textbf{98.0} \\ \midrule

\multirow{1}{*}{LLAMA2-70B}
                          & SKiC   &2             & 79.0                    & 78.0 & 70.0 & 68.0 &56.0 \\ 
\multirow{1}{*}{LLAMA2-70B-chat}
                          & SKiC   &2             & 35.0                    & 30.0 & 14.0 & 16.0 &11.0 \\  \bottomrule
\end{tabular} 
\end{table}



\newpage


\section{Appendix: Skills and Examples of How to Composing Skills}



\begin{tcolorbox}[title = {Skills for Last Letter Concatenation}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
Skill $<$words\_to\_list$>$: Put the asked words to a list.  For example, put the words in 'apple' to D=['apple']; put the words in 'apple, banana' to  D=['apple','banana']. 

\quad

Skill $<$last\_letter$>$: Get the last letter of one word.  For example, the last letter of 'apple' is 'e'; the last letter of 'banana' is 'a'.
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{The skills in Skills-in-Context prompt for last-letter-concatenation task.} \label{Tab:last_letter_skill}
\end{minipage}


\newpage

\begin{tcolorbox}[title = {An Example of Skill Composition for Last Letter Concatenation}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Example}: Take the last letters of the words in 'apple, banana' and concatenate them.

\quad

\textbf{Answer}:

1. Using the Skill $<$words\_to\_list$>$, put the asked words, 'apple, banana', to a list. D=['apple','banana'] 

\quad 


2. Get the last letter of each word in the list D=['apple','banana'] to a new list R=[]: 

\quad 
      \qquad i. Using the Skill $<$last\_letter$>$, the last letter of D[0]='apple' is 'e'. R=[e] 
      
     \qquad ii. Using the Skill $<$last\_letter$>$, the last letter of D[1]='banana' is 'a'. R=[e,a] 

\quad 

3. R=[e,a]. The answer is 'ea'.   
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An examplar of skill composition in Skills-in-Context prompt for last-letter-concatenation task.} \label{Tab:compose_last_letter_skill}
\end{minipage}


\newpage


\begin{tcolorbox}[title = {Skills for Addition}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
Skill $<$extract\_digits$>$: Extract the digits in a number to a list.  \\
For example, Extract digits in 123 to D=[1,2,3]. Extract digits in 7654 to D=[7,6,5,4]. \\ \\

Skill $<$list\_length$>$: Get the number of elements in a list.  \\
For example, D=[1,2,3], len(D)=3. A=[1,2,4,5,6], len(A)=5. \\ \\

Skill $<$add\_two\_single\_digit\_number$>$: Add two single-digit numbers.  \\
0+0=0 0+1=1 0+2=2 0+3=3 0+4=4 0+5=5 0+6=6 0+7=7 0+8=8 0+9=9 \\
1+0=1 1+1=2 1+2=3 1+3=4 1+4=5 1+5=6 1+6=7 1+7=8 1+8=9 1+9=10 \\
2+0=2 2+1=3 2+2=4 2+3=5 2+4=6 2+5=7 2+6=8 2+7=9 2+8=10 2+9=11 \\
3+0=3 3+1=4 3+2=5 3+3=6 3+4=7 3+5=8 3+6=9 3+7=10 3+8=11 3+9=12 \\
4+0=4 4+1=5 4+2=6 4+3=7 4+4=8 4+5=9 4+6=10 4+7=11 4+8=12 4+9=13 \\
5+0=5 5+1=6 5+2=7 5+3=8 5+4=9 5+5=10 5+6=11 5+7=12 5+8=13 5+9=14 \\
6+0=6 6+1=7 6+2=8 6+3=9 6+4=10 6+5=11 6+6=12 6+7=13 6+8=14 6+9=15 \\
7+0=7 7+1=8 7+2=9 7+3=10 7+4=11 7+5=12 7+6=13 7+7=14 7+8=15 7+9=16 \\
8+0=8 8+1=9 8+2=10 8+3=11 8+4=12 8+5=13 8+6=14 8+7=15 8+8=16 8+9=17 \\
9+0=9 9+1=10 9+2=11 9+3=12 9+4=13 9+5=14 9+6=15 9+7=16 9+8=17 9+9=18 \\ \\

Skill $<$sub\_10$>$: Subtract 10 from a given number. \\
10-10=0 11-10=1 12-10=2 13-10=3 14-10=4 15-10=5 16-10=6 17-10=7 18-10=8 19-10=9 \\ \\


Skill $<$compare\_10$>$: Compare a number with 10.  \\
0$<$10 1$<$10 2$<$10 3$<$10 4$<$10 5$<$10 6$<$10 7$<$10 8$<$10 9$<$10 10$=$10 \\
11$>$10 12$>$10 13$>$10 14$>$10 15$>$10 16$>$10 17$>$10 18$>$10 19$>$10 
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth} 
\captionof{figure}{The skills in Skills-in-Context prompt for the task of adding two numbers.} \label{Tab:simple_add_skill}
\end{minipage}


\newpage

\begin{tcolorbox}[title = {An Example of Skill Composition for Addition}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Example}: Calculate 86+964: 

\quad

\textbf{Answer}:

1. Using Skill $<$extract\_digits$>$ and Skill $<$list\_length$>$, extract the digits in 86 to DM=[8,6]. len(DM)=2. Extract the digits in 964 to DN=[9,6,4]. len(DN)=3. \\ \\
2. len(DM)=2$<$len(DN)=3. Align the two lists by adding len(DN)-len(DM)=1 zeros to the shorter list (DM): DM=[0,8,6]. \\ \\
3. Using Skill $<$add\_two\_single\_digit\_number$>$, add every number in DM=[0,8,6] to the corresponding number in DN =[9,6,4] to form a list, DS=[0+9,8+6,6+4]=[9,14,10]. \\ \\
4. Append a 0 to the beginning of DS: DS=[0,9,14,10].Construct a list R=[0,0,0,0] with len(DS)=4 zeros.  \\ \\
5.  DS=[0,9,14,10] (DS[0]=0, DS[1]=9, DS[2]=14, DS[3]=10), starting from DS[3] to DS[1] (DS[3]=10, DS[2]=14, DS[1]=9): 

\quad 

    \qquad i. DS[3]=10, R[3]=0, R[3]=R[3]+DS[3]=0+10=10. Based on Skill $<$compare\_10$>$, R[3]=10=10, so R[2]=1 and R[3]=10-10=0 by Skill $<$sub\_10$>$. R=[R[0],R[1],R[2],R[3]]=[0,0,1,0]. 

    
    \qquad ii. DS[2]=14, R[2]=1, R[2]=R[2]+DS[2]=1+14=15. Based on Skill $<$compare\_10$>$, R[2]=15$>$10, so R[1]=1 and R[2]=15-10=5 by Skill $<$sub\_10$>$. R=[R[0],R[1],R[2],R[3]]=[0,1,5,0]. 

    
     \qquad iii. DS[1]=9, R[1]=1, R[1]=R[1]+DS[1]=1+9=10. Based on Skill $<$compare\_10$>$, R[1]=10=10, so R[0]=1 and R[1]=10-10=0 by Skill $<$sub\_10$>$. R=[R[0],R[1],R[2],R[3]]=[1,0,5,0]. 

\quad 

6. R=[1,0,5,0]. The answer is 1050.           
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An examplar of skill composition in Skills-in-Context prompting for the task of adding two numbers.} \label{Tab:compose_simple_add_skill}
\end{minipage}

\newpage

\begin{tcolorbox}[title = {Skills for Multiplication}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
Skill $<$extract\_digits$>$: Extract the digits in a number to a list.  \\
For example, Extract digits in 123 to D=[1,2,3]. Extract digits in 7654 to D=[7,6,5,4]. \\ \\

Skill $<$list\_length$>$: Get the number of elements in a list.  \\
For example, D=[1,2,3], len(D)=3. A=[1,2,4,5,6], len(A)=5. \\ \\

Skill $<$mul\_two\_single\_digit\_number$>$: Multiply two single-digit numbers.  \\
0*1=0 0*2=0 0*3=0 0*4=0 0*5=0 0*6=0 0*7=0 0*8=0 0*9=0 \\
1*1=1 1*2=2 1*3=3 1*4=4 1*5=5 1*6=6 1*7=7 1*8=8 1*9=9 \\
2*1=2 2*2=4 2*3=6 2*4=8 2*5=10 2*6=12 2*7=14 2*8=16 2*9=18 \\
3*1=3 3*2=6 3*3=9 3*4=12 3*5=15 3*6=18 3*7=21 3*8=24 3*9=27 \\
4*1=4 4*2=8 4*3=12 4*4=16 4*5=20 4*6=24 4*7=28 4*8=32 4*9=36 \\
5*1=5 5*2=10 5*3=15 5*4=20 5*5=25 5*6=30 5*7=35 5*8=40 5*9=45 \\
6*1=6 6*2=12 6*3=18 6*4=24 6*5=30 6*6=36 6*7=42 6*8=48 6*9=54 \\
7*1=7 7*2=14 7*3=21 7*4=28 7*5=35 7*6=42 7*7=49 7*8=56 7*9=63 \\
8*1=8 8*2=16 8*3=24 8*4=32 8*5=40 8*6=48 8*7=56 8*8=64 8*9=72 \\
9*1=9 9*2=18 9*3=27 9*4=36 9*5=45 9*6=54 9*7=63 9*8=72 9*9=81 \\ \\

Skill $<$add\_multiple\_numbers$>$: Add multiple numbers such as m+n+p: 


\quad 1. Add the first two numbers m+n and get the result r1=m+n. 

\quad 2. Add the third number p to r1 and get the result r2=r1+p.  

For example, calculate 128+64+79: 

\quad 1. Add the first two numbers 128+64 and get the result r1=128+64=192. 

\quad 2. Add the third number 79 to r1 and get the result r2=192+79=271. 

\quad So 128+64+79=271       
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}  
\captionof{figure}{The skills in Skills-in-Context prompt for the task of multiplying two numbers.} \label{Tab:simple_mul_skill}
\end{minipage}


\newpage


\begin{tcolorbox}[title = {An Example of Skill Composition for Multiplication}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Example}: Calculate 184*67: 

\quad

\textbf{Answer}:

1. Using Skill $<$extract\_digits$>$ and Skill $<$list\_length$>$, extract the digits in 184 to DM=[1,8,4].  len(DM)=3. Extract the digits in 67 to DN=[6,7]. len(DN)=2. \\ \\
2. Add 0,1,len(DM)-1=2 zeros to the end of every number in DM=[1,8,4] according to the position of the number in DM: DMO=[1*100,8*10,4*1]=[100,80,4]. \\ \\
3. Add 0,len(DN)-1=1 zeros to the end of every number in DN=[6,7] according to the position of the number in DN: DNO=[6*10,7*1]=[60,7]. \\ \\
4. Using Skill $<$mul\_two\_single\_digit\_number$>$, multiple every number in DMO=[100,80,4] with every number in DNO=[60,7] and get R=[100*60,100*7,80*60,80*7,4*60,4*7]= [6000,700,4800,560,240,28]. \\ \\
5. Using Skill $<$add\_multiple\_numbers$>$, add all the numbers in R=[6000,700,4800,560,240,28], 6000+700+4800+560+240+28:

\quad 

    \qquad i. Add the first two numbers: r1=6000+700=6700. 
    
    \qquad ii. Add the third number 4800 to r1=6700: r2=6700+4800=11500. 
    
    \qquad iii. Add the fourth number 560 to r2=11500: r3=11500+560=12060. 
    
    \qquad iv. Add the fifth number 240 to r3=12060: r4=12060+240=12300. 
    
    \qquad v. Add the sixth number 28 to r4=12300: r5=12300+28=12328. 

\quad
    
6. So the answer is 12328 
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth} 
\captionof{figure}{An examplar of skill composition in Skills-in-Context prompting for the task of multiplying two numbers.} \label{Tab:compose_simple_mul_skill}
\end{minipage}


\newpage




\begin{tcolorbox}[title = {Skills for CommaQA-E task}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
Skill $<$decompose\_qa$>$: Decompose a complex question into a set of sub-questions. \\ 
For example: Decompose the question "What awards have movies produced by people born \\ in 1910 won?"  
into the following sub-questions: \\
Q1: Who were born in the year 1910? \\
Q2: Which movies did [A1] produce? \\
Q3: Which awards were given to [A2]? \\
Decompose the question "What movies have people from the country Stridery acted in?" into  \\ 
the following sub-questions:
Q1: Who is from the country Stridery? \\
Q2: Which movies did [A1] act in? \\ \\

Skill $<$answer\_simple\_question$>$: Answer simple questions about the passage. \\
For example:  \\
$[$A Passage$]$ \\  \\
Q: Which awards were given to Zalate? \\
A: movie: Zalate ; awarded: Hallowcock. ["Hallowcock‚Äù] \\
Q: Which movies were given the Hallowcock award? \\
A: movie: Zalate ; awarded: Hallowcock. movie: SkirtSiCine ; award: Hallowcock. ["Zalate", \\ "SkirtSiCine"]  \\
Q: Which movies did Muntaril direct? \\
A: movie: Premercy ; directed by: Muntaril. ["Premercy] \\
Q: Which movies did Muntrail produce? \\
A: Muntaril produced the movie Premercy with others. Muntaril produced the movie SkirtSiCine  \\ 
with others. ["Premercy", "SkirtSiCine"] \\
Q: Which movies did Muntrail write? \\
A: Muntaril was one of the writers for the movie Zalate. Muntaril wrote for the movie \\
Featsaw. ["Zalate", "Featsaw"] \\
Q: Who are the actors in the movie Premercy? \\ 
A: Monsterscar was an actor in the movie Premercy. ["Monsterscar"] \\
Q: When was the moive Featsaw released? \\
A: Monsterscar was an actor in the movie Premercy. ["1973"] \\
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth} 
\captionof{figure}{The skills in Skills-in-Context prompt for the CommaQA-E task.} \label{Tab:qa_skill}
\end{minipage}

\newpage


\begin{tcolorbox}[title = {An Example of Skill Composition for the CommaQA-E Task}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Example}: $[$A Passage$]$ \\ 
Q: What movies have people from the country Stridery acted in? 

\quad

\textbf{Answer}:

1. Using Skill $<$decompose\_qa$>$, decompose the question "What movies have people from the country Stridery acted in?" into the following sub-questions:  

\quad

\qquad Q1: Who is from the country Stridery? 

\qquad Q2: Which movies did [A1] act in? 

\quad

2. Using Skill $<$answer\_simple\_question$>$, answer Q1: Who is from the country Stridery? 

\quad 

\qquad  Gastrat grew up in the nation of Stridery. A1=["Gastrat"] 

\quad 

3. A1=["Gastrat"], answer Q2: Which movies did [A1] act in? 

\quad

 \qquad   i. A1[0]="Gastrat", Using Skill $<$answer\_simple\_question$>$, answer Q2.1: Which movies did Gastrat act in?  

  \qquad \quad A2.1: Gastrat was an actor in the movie Partnershipmaker. Gastrat was an actor in the movie Partnershipmaker. Gastrat acted in the movie Warpstone.  A2.1=["Partnershipmaker", "Nilitude", "Warpstone"] 

\quad
  
  \qquad  ii.So A2=[A2.1]=["Partnershipmaker", "Nilitude", "Warpstone"] 

\quad
  
4. The answer is ["Partnershipmaker", "Nilitude", "Warpstone"]
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}    
\captionof{figure}{An examplar of skill composition in Skills-in-Context prompting for the CommaQA-E task.} \label{Tab:compose_qa_skill}
\end{minipage}

\newpage


\begin{tcolorbox}[title = {Skills for Dynamic Programming}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
Skill $<$list\_length$>$: Get the number of elements in a list.  \\
For example, D=[1,2,3], len(D)=3. A=[1,2,3,4,5,6], len(A)=6. \\ \\

Skill $<$find\_max$>$: Find the max number in a list. \\
For example, max(2,0,-1)=2. max(-3,-2,-1)=-1. max(5,-2,0)=5. max(0,-2,4)=4.  max(0,0,0)=0. max(-2,-1,0)=0. \\ \\

Skill $<$add$>$: Add two numbers. \\
For example, 1+2=3. -2+1=-1. 0+(-3)=-3. 1+(-1)=0. \\
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{The skills in Skills-in-Context prompt for the task of dynamic programming.} \label{Tab:dp_skill}
\end{minipage}

\newpage

\begin{tcolorbox}[title = {An Example of Skill Composition for the Dynamic Programming Task}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Example}: Compose these skills to do the task: Given a sequence of integers, find a subsequence with the highest sum, such that no two numbers in the subsequence are adjacent in the original sequence.  

A=[3,2,1,5].

 \quad

\textbf{Answer}:

1. A=[3,2,1,5] (A[0]=3,A[1]=2,A[2]=1,A[3]=5). Using Skill $<$list\_length$>$, len(A)=4. Construct a list D=[0,0,0,0] with the len(A)=4 zeros. \\ \\
2. Update the last element in D. A[3]=5. Using Skill $<$find\_max$>$, max(5,0)=5. D[3]=5 and D=[0,0,0,5]. \\ \\
3. Update the second last element in D. A[3] = 5, A[2] = 1. Using Skill $<$find\_max$>$, max(5,1,0) = 5. D[2] = 5 and D=[0,0,5,5]. \\ \\ 
4. Starting from the third last (len(A)-2=2) element in D, update each element in D based  on A=[3,2,1,5] (A[0]=3,A[1]=2,A[2]=1,A[3]=5): 

\quad

 \qquad   i. D[3]=5, D[2]=5, A[1]=2. Using Skill $<$add$>$, A[1]+D[3]=2+5=7.  Using Skill $<$find\_max$>$, max(D[2],A[1]+D[3],0)=max(5,7,0)=7.  D[1]=7 and D=[0,7,5,5]. 

 
  \qquad  ii. D[2]=5, D[1]=7, A[0]=3. Using Skill $<$add$>$, A[0]+D[2]=3+5=8. Using Skill $<$find\_max$>$, max(D[1],A[0]+D[2],0)=max(7,8,0)=8. D[0]=8 and D=[8,7,5,5]. 

\quad
  
5.  D=[8,7,5,5]. The highest sum is D[0]=8. 
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}    
\captionof{figure}{An examplar of skill composition in Skills-in-Context prompting for the dynamic programming task to find the highest sum of the subsequence.} \label{Tab:compose_dp_skill}
\end{minipage}

\newpage

\begin{tcolorbox}[title = {Skills for GSM8K}, colback = Apricot!25!white, colframe = BrickRed!75!black,fontupper =\fontsize{9pt}{9pt}\selectfont] 
Skill $<$extract\_digits$>$: Extract the digits in a number to a list. For example, extract digits in 123 to D=[1,2,3]. Extract digits in 7654 to D=[7,6,5,4] \\ \\

Skill $<$list\_length$>$: Get the number of elements in a list. For example, D=[1,2,3], len(D)=3. A=[1,2,4,5,6], len(A)=5. \\ \\

Skill $<$add\_two\_single\_digit\_number$>$: Add two single-digit numbers. For example, 0+0=0 0+1=1 0+2=2 0+3=3 0+4=4 0+5=5 0+6=6 0+7=7 0+8=8 0+9=9 \\ \\


Skill $<$sub\_two\_single\_digit\_number$>$: Subtract two single-digit numbers.  For example, 0-0=0 0-1=-1 0-2=-2 0-3=-3 0-4=-4 0-5=-5 0-6=-6 0-7=-7 0-8=-8 0-9=-9 \\ \\

Skill $<$sub\_10$>$: Subtract 10 from a given number. 10-10=0 11-10=1 12-10=2 13-10=3 14-10=4 15-10=5 16-10=6 17-10=7 18-10=8 19-10=9 \\ \\

Skill $<$add\_10$>$: Add 10 to a given number. -10+10=0 -9+10=1 -8+10=2 -7+10=3 -6+10=4 -5+10=5 -4+10=6 -3+10=7 -2+10=8 -1+10=9\\ \\

Skill $<$compare\_0$>$: Compare a number with 0.  10$>$0 9$>$0 8$>$0 7$>$0 6$>$0 5$>$0 4$>$0 3$>$0 2$>$0 1$>$0 0=0 -1$>$0 -2$>$0 -3$>$0 -4$>$0 -5$>$0 -6$>$0 -7$>$0 -8$>$0 -9$>$0 \\ \\

Skill $<$compare\_10$>$: Compare a number with 10.  0$<$10 1$<$10 2$<$10 3$<$10 4$<$10 5$<$10 6$<$10 7$<$10 8$<$10 9$<$10 10$=$10 11$>$10 12$>$10 13$>$10 14$>$10 15$>$10 16$>$10 17$>$10 18$>$10 19$>$10  \\ \\

Skill $<$mul\_two\_single\_digit\_number$>$: Multiply two single-digit numbers.  For example, 4*1=4 4*2=8 4*3=12 4*4=16 4*5=20 4*6=24 4*7=28 4*8=32 4*9=36 \\ \\


Skill $<$add\_multiple\_numbers$>$: Add multiple numbers such as m+n+p:  \\
\quad 1. Add the first two numbers m+n and get the result r1=m+n. \\ 
\quad 2. Add the third number p to r1 and get the result r2=r1+p.  \\ \\


Skill $<$add$>$: Use the skills to add two numbers. For example, calculate 86+964 $[$The steps to perform the add$]$ \\ \\


Skill $<$mul$>$: Use the skills to multiply two numbers. For example, calculate 86*964 $[$The steps to perform the multiplication$]$ \\ \\

Skill $<$sub$>$:  Use the skills to subtract a number from another number. For example, calculate 964-86 $[$The steps to perform the subtractraction$]$ \\ \\

Skill $<$age$>$: Describe the age of a person.  If a person is P years old, Q years ago, the person was P-Q years old.  If a person is P years old, in Q years, the person will be P+Q years old. If person A is P years old, person B is Q years old, and person A is R years older than person B, then P=Q+R. If person A is P years old, person B is Q years old, and person A is R years younger than person B, then P=Q-R. \\ \\


Skill $<$solve\_equation$>$: Solve an equation. When subtracting or adding the same number from both sides of the equation, the equation is still true. When moving a number from one side of the equation to the other side, the sign of the number changes. When moving a multiplication from one side of the equation to the other side, the sign of the multiplication changes. When moving a division from one side of the equation to the other side, the sign of the division changes. \\
For example, if the equation is 3x+5=7, move +5 to the other side, then 3x=7-5. Using the Skill $<$sub$>$, 3x=7-5=2. Move 3 to the other side, then x=2/3. \\ 
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth} 
\captionof{figure}{The skills in Skills-in-Context prompt for GSM8K.} \label{Tab:gsm8k_skill}
\end{minipage}

\newpage


\begin{tcolorbox}[title = {An Example of Skill Composition for GSM8K}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Example}:  Four years ago, Kody was only half as old as Mohamed. If Mohamed is currently twice 30 years old,  how old is Kody? 

 \quad

\textbf{Answer}:

1. Mohamed is currently twice 30 years old. Using the Skill $<$mul$>$, Mohamed is currently 30*2 = 60 years old. \\ \\
2. Using Skill $<$age$>$, four years ago, Mohamed was 4 years younger than now. Using the Skill $<$sub$>$,  Mohamed was 60-4 = 56 years old.  \\ \\
3. Four years ago, Kody was only half as old as Mohamed. Using the Skill $<$div$>$, Kody was 56/2 = 28 years old. \\ \\
4. Using Skill $<$age$>$, currently, Kody is 4 years older than four years ago. Using the Skill $<$add$>$, Kody is currently 28+4 = 32 years old. \\ \\
5. The answer is 32. 
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}  
\captionof{figure}{An examplar of skill composition in Skills-in-Context prompting for GSM8K math problems.} \label{Tab:compose_gsm8k_skill}
\end{minipage}

\newpage

\begin{tcolorbox}[title = {Skills for MATH}, colback = Apricot!25!white, colframe = BrickRed!75!black,fontupper =\fontsize{7.5pt}{6pt}\selectfont] 
You have the knowledge of many skills, the following are some examples: \\
Skill $<$Add$>$: Add two numbers. For example, 128+987=1115.  \\ \\

Skill $<$Sub$>$: Subtract a number from another number. For example, 128-67=61.   \\ \\

Skill $<$Mul$>$: Multiply two numbers. For example, 128*76=9728.   \\ \\

Skill $<$Div$>$: Divide a number from another number. For example 12/3=4.  \\ \\

Skill $<$Mod$>$: Modulus or modulo, it finds the remainder of a division operation. For example, 10 mod 3 = 1, because 10 divided by 3 leaves a remainder of 1.  \\ \\

Skill $<$Exp$>$: An exponent refers to the number of times a number is multiplied by itself.  $[$More Details$]$ \\ \\

Skill $<$Base Conversion$>$: Base conversion is a way to change numbers from one base to another.   $[$More Details$]$\\ \\

Skill $<$Radicals$>$: A radical represents the root of a number. The square root (represented by sqrt) is the most common radical. $[$More Details$]$\\ \\


Skill $<$Factoring$>$: In the context of integers, factorization involves expressing a number as the product of prime numbers. $[$More Details$]$\\ \\

Skill $<$Solve Equation$>$: Solve an equation.   $[$More Details$]$\\ \\

Skill $<$Quadratic Formula$>$: The quadratic formula is used to solve quadratic equations. $[$More Details$]$\\ \\


Skill $<$Complex Number$>$: The quadratic formula is used to solve quadratic equations. $[$More Details$]$\\ \\

Skill $<$Piecewise Function: Continuous$>$: A piecewise function is continuous if it is continuous at every point in its domain. $[$More Details$]$\\ \\

Skill $<$Factorial$>$:  Factorial is a function that multiplies a given number by every number below it until 1. $[$More Details$]$\\ \\

Skill $<$Probability$>$:   Probability is the measure of the likelihood that an event will occur. $[$More Details$]$\\ \\

Skill $<$Conditional Probability$>$: The probability of an event occurring given that another event has already occurred.  $[$More Details$]$\\ \\

Skill $<$Probability Addition Rule$>$: The Addition Rule in probability is used to calculate the probability of either of two events happening. $[$More Details$]$\\ \\

Skill $<$Probability Multiplication Rule$>$: A way to determine the probability of two events occurring at the same time (conjointly). $[$More Details$]$\\ \\

Skill $<$Counting Principle$>$: If there are m ways to do one thing, and n ways to do another, then there are m*n ways of doing both. $[$More Details$]$\\ \\

Skill $<$Permutations$>$: Permutations refer to the arrangement of items in a specific order. $[$More Details$]$\\ \\

Skill $<$Combination$>$:  Combinations refer to the selection of items without regard to the order. $[$More Details$]$\\ \\

Skill $<$Perimeter$>$:  The perimeter of a shape is the distance around its boundary. $[$More Details$]$\\ \\

Skill $<$Area$>$:  The area of a shape is the amount of space that it covers. $[$More Details$]$\\ \\

Skill $<$Volume$>$:   Volume is the measure of the amount of space that a three-dimensional object occupies. $[$More Details$]$\\ \\

Skill $<$Prime Numbers$>$: A prime number is a natural number greater than 1 that has no positive divisors other than 1 and itself. $[$More Details$]$\\ \\

Skill $<$Composite Numbers$>$: Composite numbers are positive integers that have at least one positive divisor other than one or the number itself. $[$More Details$]$\\ \\

Skill $<$GCD$>$:The Greatest Common Divisor (GCD), also known as the Greatest Common Factor (GCF),  $[$More Details$]$\\ \\

Skill $<$LCM$>$:The Least Common Multiple (LCM) of two integers is the smallest positive integer that is divisible by both numbers without leaving a remainder. $[$More Details$]$\\ \\

Skill $<$Congruences$>$: Two integers a and b are said to be congruent modulo n if they have the same remainder when divided by n. $[$More Details$]$ \\
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth} 
\captionof{figure}{The skills in Skills-in-Context prompt for MATH.} \label{Tab:math_skill}
\end{minipage}


\newpage

\begin{tcolorbox}[title = {An Example of Skill Composition for MATH}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Example}: Shown below are rows 1, 2, and 3 of Pascal's triangle.$[$Pascal's triangle$]$. Let $(a_i),$ $(b_i),$ $(c_i)$ be the sequence, from left to right, of elements in the 2005th, 2006th, and 2007th rows, respectively, with the leftmost element occurring at $i = 0.$  Compute $[\sum_{i = 0}^{2006} \frac{b_i}{c_i} - \sum_{i = 0}^{2005} \frac{a_i}{b_i}.]$ \\ \\
 \quad

\textbf{Answer}:

1. Using the Skill $<$Pascal's Triangle$>$, the number in the n-th row and k-th column of the Pascal's triangle is C(n,k). \\ \\
2. Suppose $(a_i), (b_i), (c_i)$ represent the entries in rows n - 1, n, n + 1 of Pascal's triangle. $a_i = C(n-1, i), b_i = C(n, i)$, $c_i = C(n+1, i)$ \\ \\
3. Using the Skill $<$Combination$>$, $\sum_{i = 0}^{2006} \frac{b_i}{c_i} = \sum_{i = 0}^{2006} \frac{\binom{2006}{i}}{\binom{2007}{i}} = \sum_{i = 0}^{2006} \frac{2007 - i}{2007} = 2007 - \frac{2006 \cdot 2007}{2 \cdot 2007} = 2007-(2006*2007)/(2*2007) = 2007-1003 = 1004$ \\ \\
4. Using the Skill $<$Combination$>$, $\sum_{i = 0}^{2005} \frac{a_i}{b_i} = \sum_{i = 0}^{2005} \frac{\binom{2005}{i}}{\binom{2006}{i}} = \sum_{i = 0}^{2005} \frac{2006 - i}{2006} = 2006 - \frac{2005 \cdot 2006}{2 \cdot 2006} = 2006-(2005*2006)/(2*2006) = 2006-1002.5 = 1003.5$ \\ \\ 
5. Using the Skill $<$Sub$>$, $[\sum_{i = 0}^{2006} \frac{b_i}{c_i} - \sum_{i = 0}^{2005} \frac{a_i}{b_i}] = 1004-1003.5=0.5$ \\ \\
6. The answer is 0.5. 
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}   
\captionof{figure}{An examplar of skill composition in Skills-in-Context prompting for MATH problems.} \label{Tab:compose_math_skill}
\end{minipage}



\newpage

\section{Appendix: Generation Examples} \label{Sec:examples}
We further share some example generation from ChatGPT with our Skills-in-Context prompts on all the tasks in Figure~\ref{Tab:example_last_letter_skill},\ref{Tab:example_simple_add_skill}, \ref{Tab:example_simple_mul_skill}, \ref{Tab:example_compose_qa_skill}, \ref{Tab:example_compose_dp_skill}, \ref{Tab:example_compose_gsm8k_skill}, \ref{Tab:example_compose_gsm8k_skill_1}, \ref{Tab:example_compose_gsm8k_skill_2}, \ref{Tab:example_compose_gsm8k_skill_3}, \ref{Tab:example_compose_math_skill_1}, \ref{Tab:example_compose_math_skill_2}, \ref{Tab:example_compose_math_skill_3}, \ref{Tab:example_compose_math_skill_4}, \ref{Tab:example_compose_math_skill_5}.


\begin{tcolorbox}[title = {Last Letter Concatenation}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Question}: Take the last letters of the words in 'than, appropriate, sees, daisy, disturbed, espn, stable, double, luther, shut' and concatenate them.
\tcblower
\textbf{Model Output}:

\quad

1. Using the Skill $<$words\_to\_list$>$, put the asked words, 'than, appropriate, sees, daisy, disturbed, espn, stable, double, luther, shut', to a list.  D=['than', 'appropriate', 'sees', 'daisy', 'disturbed', 'espn', 'stable', 'double', 'luther', 'shut'] \\ \\
2. Get the last letter of each word in the list D=['than', 'appropriate', 'sees', 'daisy', 'disturbed', 'espn', 'stable', 'double', 'luther', 'shut'] to a new list R=[]: 

\quad

   \qquad i. Using the Skill $<$last\_letter$>$, the last letter of D[0]='than' is 'n'. R=[n] 
   
   \qquad ii. Using the Skill $<$last\_letter$>$, the last letter of D[1]='appropriate' is 'e'. R=[n, e] 
   
   \qquad iii. Using the Skill $<$last\_letter$>$, the last letter of D[2]='sees' is 's'. R=[n, e, s] 
   
   \qquad iv. Using the Skill $<$last\_letter$>$, the last letter of D[3]='daisy' is 'y'. R=[n, e, s, y] 
   
   \qquad v. Using the Skill $<$last\_letter$>$, the last letter of D[4]='disturbed' is 'd'. R=[n, e, s, y, d] 
   
   \qquad vi. Using the Skill $<$last\_letter$>$, the last letter of D[5]='espn' is 'n'. R=[n, e, s, y, d, n] 
   
   \qquad vii. Using the Skill $<$last\_letter$>$, the last letter of D[6]='stable' is 'e'. R=[n, e, s, y, d, n, e] 
   
   \qquad viii. Using the Skill $<$last\_letter$>$, the last letter of D[7]='double' is 'e'. R=[n, e, s, y, d, n, e, e] 
   
   \qquad ix. Using the Skill $<$last\_letter$>$, the last letter of D[8]='luther' is 'r'. R=[n, e, s, y, d, n, e, e, r] 
   
   \qquad x. Using the Skill $<$last\_letter$>$, the last letter of D[9]='shut' is 't'. R=[n, e, s, y, d, n, e, e, r, t] 

\quad

3. R=[n, e, s, y, d, n, e, e, r, t]. The answer is 'n e s y d n e e r t'. 
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An example of the generated answer on last-letter-concatenation task using ChatGPT with our Skills-in-Context prompting.} \label{Tab:example_last_letter_skill}
\end{minipage}





\newpage

\begin{tcolorbox}[title = {Addition}, colback = Apricot!25!white, colframe = BrickRed!75!black,fontlower =\fontsize{9pt}{9pt}\selectfont] 
\textbf{Question}: Calculate 165789+876534
\tcblower
\textbf{Model Output}:

\quad

1. Using Skill $<$extract\_digits$>$ and Skill $<$list\_length$>$, extract the digits in 165789 to DM=[1,6,5,7,8,9].  len(DM)=6. Extract the digits in 876534 to DN=[8,7,6,5,3,4]. len(DN)=6. \\ \\
2. len(DM)=6=len(DN)=6. Align the two lists: DM=[1,6,5,7,8,9], DN=[8,7,6,5,3,4]. \\ \\
3. Using Skill $<$add\_two\_single\_digit\_number$>$, add every number in DM=[1,6,5,7,8,9] to the corresponding  number in DN =[8,7,6,5,3,4] to form a list, DS=[1+8,6+7,5+6,7+5,8+3,9+4]=[9,13,11,12,11,13]. \\ \\
4. Append a 0 to the beginning of DS: DS=[0,9,13,11,12,11,13]. Construct a list R=[0,0,0,0,0,0,0] with len(DS)=7 zeros. \\ \\
5. DS=[0,9,13,11,12,11,13] (DS[0]=0, DS[1]=9, DS[2]=13, DS[3]=11, DS[4]=12, DS[5]=11, DS[6]=13), starting from DS[6] to DS[1] (DS[6]=13, DS[5]=11, DS[4]=12, DS[3]=11, DS[2]=13, DS[1]=9): 

\quad

    \qquad i. DS[6]=13, R[6]=0, R[6]=R[6]+DS[6]=0+13=13. Based on Skill $<$compare\_10$>$, 13$>$10, R[6]=13$>$10, so R[5]=1 and R[6]=13-10=3 by Skill $<$sub\_10$>$. R=[R[0],R[1],R[2],R[3],R[4],R[5],R[6]]=[0,0,0,0,0,1,3]. 
    
    \qquad ii. DS[5]=11, R[5]=1, R[5]=R[5]+DS[5]=1+11=12. Based on Skill $<$compare\_10$>$, 12$>$10, R[5]=12$>$10, so R[4]=1 and R[5]=12-10=2 by Skill $<$sub\_10$>$. R=[R[0],R[1],R[2],R[3],R[4],R[5],R[6]]=[0,0,0,0,1,2,3]. 

    
    \qquad iii. DS[4]=12, R[4]=1, R[4]=R[4]+DS[4]=1+12=13. Based on Skill $<$compare\_10$>$, 13$>$10, R[4]=13$>$10, so R[3]=1 and R[4]=13-10=3 by Skill $<$sub\_10$>$. R=[R[0],R[1],R[2],R[3],R[4],R[5],R[6]]=[0,0,0,1,3,2,3]. 
    
    \qquad iv. DS[3]=11, R[3]=1, R[3]=R[3]+DS[3]=1+11=12. Based on Skill $<$compare\_10$>$, 12$>$10, R[3]=12$>$10, so R[2]=1 and R[3]=12-10=2 by Skill $<$sub\_10$>$. R=[R[0],R[1],R[2],R[3],R[4],R[5],R[6]]=[0,0,1,2,3,2,3]. 
    
    \qquad v. DS[2]=13, R[2]=1, R[2]=R[2]+DS[2]=1+13=14. Based on Skill $<$compare\_10$>$, 14$>$10, R[2]=14$>$10, so R[1]=1 and R[2]=14-10=4 by Skill $<$sub\_10$>$. R=[R[0],R[1],R[2],R[3],R[4],R[5],R[6]]=[0,1,4,2,3,2,3]. 
    
    \qquad vi. DS[1]=9, R[1]=1, R[1]=R[1]+DS[1]=1+9=10. Based on Skill $<$compare\_10$>$, 10=10, R[1]=10=10, so R[0]=1 and R[1]=10-10=0 by Skill $<$sub\_10$>$. R=[R[0],R[1],R[2],R[3],R[4],R[5],R[6]]=[1,0,4,2,3,2,3]. \\ \\
6. R=[1,0,4,2,3,2,3]. The answer is 1042323. 
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An example of the generated answer on the addition task using ChatGPT with Skills-in-Context prompting.} \label{Tab:example_simple_add_skill}
\end{minipage}


\newpage


\begin{tcolorbox}[title = {Multiplication}, colback = Apricot!25!white, colframe = BrickRed!75!black,] 
\textbf{Question}: Calculate 1467*7651
\tcblower
\textbf{Model Output}:

\quad

1. Using Skill $<$extract\_digits$>$ and Skill $<$list\_length$>$, extract the digits in 1467 to DM=[1,4,6,7]. len(DM)=4. Extract the digits in 7651 to DN=[7,6,5,1]. len(DN)=4. \\ 
2. Add 0,1,len(DM)-1=3 zeros to the end of every number in DM=[1,4,6,7] according to the position of the number in DM: DMO=[1*1000,4*100,6*10,7*1]=[1000,400,60,7]. \\
3. Add 0,1,len(DN)-1=3 zeros to the end of every number in DN=[7,6,5,1] according to the position of the number in DN: DNO=[7*1000,6*100,5*10,1*1]=[7000,600,50,1]. \\
4. Using Skill $<$mul\_two\_single\_digit\_number$>$, multiple every number in DMO=[1000,400,60,7] with  every number in DNO=[7000,600,50,1]  and get R=[1000*7000,1000*600,1000*50,1000*1, 400*7000,400*600,400*50,400*1,60*7000,60*600,60*50,60*1,7*7000,7*600,7*50,7*1]=  [7000000,600000,50000,1000,2800000,240000,20000,400,420000,36000,3000,60,49000,4200,350,7]. \\
5. Using Skill $<$add\_multiple\_numbers$>$, add all the numbers  in \\ R=[7000000,600000,50000,1000,2800000,240000,20000,400,420000,36000,3000,60,49000,4200,350,7], 7000000+600000+50000+1000+2800000+240000+20000+400+420000+36000+3000+60+49000+4200\\+350+7: 

\quad 

    \qquad i. Add the first two numbers: r1=7000000+600000=7600000. 
    
    \qquad ii. Add the third number 50000 to r1=7600000: r2=7600000+50000=7650000. 
    
    \qquad iii. Add the fourth number 1000 to r2=7650000: r3=7650000+1000=7651000. 
    
    \qquad iv. Add the fifth number 2800000 to r3=7651000: r4=7651000+2800000=10451000. 
    
    \qquad v. Add the sixth number 240000 to r4=10451000: r5=10451000+240000=10691000. 
    
    \qquad vi. Add the seventh number 20000 to r5=10691000: r6=10691000+20000=10711000. 
    
    \qquad vii. Add the eighth number 400 to r6=10711000: r7=10711000+400=10711400. 
    
    \qquad viii. Add the ninth number 420000 to r7=10711400: r8=10711400+420000=11131400. 
    
    \qquad ix. Add the tenth number 36000 to r8=11131400: r9=11131400+36000=11167400. 
    
    \qquad x. Add the eleventh number 3000 to r9=11167400: r10=11167400+3000=11170400. 
    
    \qquad xi. Add the twelfth number 60 to r10=11170400: r11=11170400+60=11170460. 
    
    \qquad xii. Add the thirteenth number 49000 to r11=11170460: r12=11170460+49000=11219460. 
    
    \qquad xiii. Add the fourteenth number 4200 to r12=11219460: r13=11219460+4200=11223660. 
    
    \qquad xiv. Add the fifteenth number 350 to r13=11223660: r14=11223660+350=11224010.
    
    \qquad xv. Add the sixteenth number 7 to r14=11224010: r15=11224010+7=11224017. \\ \\
6. So the answer is 11224017 
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An example of the generated answer on the multiplication task using ChatGPT with Skills-in-Context prompting.} \label{Tab:example_simple_mul_skill}
\end{minipage}

\newpage



\begin{tcolorbox}[title = {CommaQA-E}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Question}: 

\quad

movie: Skob ; directed by: Haldron. movie: Riften ; directed by: Conanopeia. movie: Tetroxidine ; directed by: Conanopeia. movie: Sheepcrest ; directed by: Flumph. movie: Sheepcrest ; award: Mariskenna. movie: Skob ; award: Jubeus. movie: Tetroxidine ; award: Handt. movie: Riften ; awarded: Handt. movie: Tetroxidine ; written by: Conanopeia. movie: Riften ; written by: Conanopeia. movie: Riften ; writer: Flumph. movie: Tetroxidine ; written by: Haldron. movie: Skob ; written by: Haldron. movie: Sheepcrest ; writer: Flumph. movie: Skob ; year: 1962. movie: Tetroxidine ; release year: 1997. movie: Riften ; release year: 1972. movie: Sheepcrest ; release year: 1997. Flumph was an actor in the movie Riften. Flumph acted in the movie Sheepcrest. Conanopeia was an actor in the movie Riften. Conanopeia acted in the movie Tetroxidine. Conanopeia acted in the movie Sheepcrest. Haldron acted in the movie Tetroxidine. Haldron acted in the movie Skob. Haldron was born in the year 1939. Flumph was born in the year 1938. Conanopeia was born in 1938. Haldron is from the country of Poquet. Conanopeia grew up in the nation of Poquet. Flumph grew up in the nation of Stridery. Diaqum was awarded to Flumph. Lidus was awarded to Conanopeia. Haldron won the Lidus award. Conanopeia was one of the producers of the movie Tetroxidine. Flumph was one of the producers of the movie Sheepcrest. Flumph produced the movie Skob with others. Haldron was one of the producers of the movie Sheepcrest. Haldron was one of the producers of the movie Riften. Haldron produced the movie Skob with others. Conanopeia was one of the producers of the movie Riften. \\ \\

Q: What movies have the people from Poquet written? 


\tcblower
\textbf{Model Output}:

\quad

1. Using Skill $<$decompose\_qa$>$, decompose the question "What movies have the people from Poquet written?" into the following sub-questions: 

\quad

  \qquad  Q1: Who is from the country Poquet? 
  
   \qquad Q2: Which movies did [A1] write? 

\quad
   
2. Using Skill $<$answer\_simple\_question$>$, answer Q1: Who is from the country Poquet? 

Conanopeia grew up in the nation of Poquet. Haldron is from the country of Poquet. A1=["Conanopeia", "Haldron"] \\
3. A1=["Conanopeia", "Haldron"]. Using Skill $<$answer\_simple\_question$>$, answer Q2: Which movies did [A1] write? 

\quad

   \qquad  i. A1[0]="Conanopeia", answer Q2.1: Which movies did Conanopeia write? 

   \qquad \qquad  A2.1: movie: Tetroxidine ; written by: Conanopeia. movie: Riften ; written by: Conanopeia.   A2.1=["Tetroxidine", "Riften"] 
   
    \qquad ii. A1[1]="Haldron", answer Q2.2: Which movies did Haldron write? 
    
    \qquad \qquad  A2.2: movie: Skob ; written by: Haldron. A2.2=["Skob"] 
    
   \qquad  iii. So A2=A2.1+A2.2=["Tetroxidine", "Riften", "Skob"] \\ \\
4. The answer is ["Tetroxidine", "Riften", "Skob"] \\  
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An example of the generated answer on the CommaQA-E task using ChatGPT with our Skills-in-Context prompting.} \label{Tab:example_compose_qa_skill}
\end{minipage}



\newpage



\begin{tcolorbox}[title = {DP}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Question}:  Given a sequence of integers, find a subsequence with the highest sum, such that no two numbers in the subsequence are adjacent in the original sequence.  \\ 
A=[1, -5, 3, -4, -1, -1, 2, 2]. \\


\tcblower
\textbf{Model Output}:

\quad

1. A=[1, -5, 3, -4, -1, -1, 2, 2] (A[0]=1,A[1]=-5,A[2]=3,A[3]=-4,A[4]=-1,A[5]=-1,A[6]=2,A[7]=2). Using Skill $<$list\_length$>$, len(A)=8. Construct a list D=[0,0,0,0,0,0,0,0] with the len(A)=8 zeros. \\ \\
2. Update the last element in D. A[7]=2. Using Skill $<$find\_max$>$, max(2,0)=2. D[7]=2 and D=[0,0,0,0,0,0,0,2].  \\ \\
3. Update the second last element in D. A[7]=2, A[6]=2. Using Skill $<$find\_max$>$,  max(2,2,0)=2. D[6]=2 and D=[0,0,0,0,0,0,2,2]. \\ \\
4. Starting from the third last (len(A)-2=6) element in D, update each element in D based on A=[1, -5, 3, -4, -1, -1, 2, 2] (A[0]=1,A[1]=-5,A[2]=3,A[3]=-4, A[4]=-1,A[5]=-1,A[6]=2,A[7]=2): 

\quad

 \qquad i. D[7]=2, D[6]=2, A[5]=-1.  Using Skill $<$add$>$, A[5]+D[7]=-1+2=1. Using Skill $<$find\_max$>$, max(D[6],A[5]+D[7],0)=max(2,1,0)=2. D[5]=2 and  D=[0,0,0,0,0,2,2,2]. 
 
   \qquad  ii. D[6]=2, D[5]=2, A[4]=-1.  Using Skill $<$add$>$, A[4]+D[6]=-1+2=1.  Using Skill $<$find\_max$>$, max(D[5],A[4]+D[6],0)=max(2,1,0)=2. D[4]=2 and  D=[0,0,0,0,2,2,2,2]. 
   
   \qquad  iii. D[5]=2, D[4]=2, A[3]=-4.  Using Skill $<$add$>$, A[3]+D[5]=-4+2=-2. Using Skill $<$find\_max$>$, max(D[4],A[3]+D[5],0)=max(2,-2,0)=2. D[3]=2 and  D=[0,0,0,2,2,2,2,2]. 
   
   \qquad  iv. D[4]=2, D[3]=2, A[2]=3.  Using Skill $<$add$>$, A[2]+D[4]=3+2=5.  Using Skill $<$find\_max$>$, max(D[3],A[2]+D[4],0)=max(2,5,0)=5. D[2]=5 and  D=[0,0,5,2,2,2,2,2]. 
   
   \qquad  v. D[3]=2, D[2]=5, A[1]=-5.  Using Skill $<$add$>$, A[1]+D[3]=-5+2=-3.  Using Skill $<$find\_max$>$, max(D[2],A[1]+D[3],0)=max(5,-3,0)=5. D[1]=5 and  D=[0,5,5,2,2,2,2,2]. 
   
   \qquad  vi. D[2]=5, D[1]=5, A[0]=1.  Using Skill $<$add$>$, A[0]+D[2]=1+5=6.  Using Skill $<$find\_max$>$, max(D[1],A[0]+D[2],0)=max(5,6,0)=6. D[0]=6 and  D=[6,5,5,2,2,2,2,2]. \\ \\
5. D=[6,5,5,2,2,2,2,2]. The highest sum is D[0]=6. 
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An example of the generated answer on the dynamic programming task using ChatGPT with our Skills-in-Context prompting.} \label{Tab:example_compose_dp_skill}
\end{minipage}


\newpage



\begin{tcolorbox}[title = {GSM8K}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Question}:  The girls are trying to raise money for a carnival. Kim raises \$320 more than Alexandra, who raises \$430, and Maryam raises \$400 more than Sarah, who raises \$300. How much money, in dollars, did they all raise in total? 


\tcblower
\textbf{Model Output}:

\quad

1. Alexandra raises \$430. \\ \\
2. Kim raises \$320 more than Alexandra. Using the Skill $<$add$>$, Kim raises \$430+\$320=\$750. \\ \\
3. Sarah raises \$300. \\ \\
4. Maryam raises \$400 more than Sarah. Using the Skill $<$add$>$, Maryam raises \$300+\$400=\$700. \\ \\
5. Using the Skill $<$add$>$, they all raise \$430+\$750+\$300+\$700=\$2180 in total. \\ \\
6. The answer is 2180.
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An example of the generated answer on the GSM8K task using ChatGPT with Skills-in-Context prompting.} \label{Tab:example_compose_gsm8k_skill}
\end{minipage}



\newpage




\begin{tcolorbox}[title = {GSM8K}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Question}: It's strawberry-picking time on Grandma Concetta's farm.  Tony can pick 6 quarts of strawberries per hour, while Bobby picks one less quart of strawberries per hour than Tony.  Kathy can pick twice as many strawberries per hour as Bobby, and Ricky picks two fewer quarts of strawberries per hour than does Kathy.  In total, how many quarts of strawberries can Tony, Bobby, Ricky, and Kathy pick per hour on  Grandma Concetta's farm? 
\tcblower
\textbf{Model Output}:



1. Tony can pick 6 quarts of strawberries per hour. \\ \\
2. Bobby picks one less quart of strawberries per hour than Tony. Using the Skill $<$sub$>$, Bobby picks 6-1=5 quarts of strawberries per hour. \\ \\
3. Kathy can pick twice as many strawberries per hour as Bobby. Using the Skill $<$mul$>$, Kathy picks 5*2=10 quarts of strawberries per hour. \\ \\
4. Ricky picks two fewer quarts of strawberries per hour than does Kathy.  Using the Skill $<$sub$>$, Ricky picks 10-2=8 quarts of strawberries per hour. \\ \\
5. In total, Tony, Bobby, Ricky, and Kathy can pick 6+5+10+8 quarts of strawberries per hour. Using the Skill \mybox[GreenYellow]{$<$add\_multiple\_numbers$>$}: 

\quad

   \qquad i. Add the first two numbers using Skill $<$add$>$: r1=6+5=11. 
   
     \qquad ii. Add the third number 10 to r1=11 using Skill $<$add$>$: r2=11+10=21. 
     
    \qquad  iii. Add the fourth number 8 to r2=21 using Skill $<$add$>$: r3=21+8=29. 

\quad
    
6. So the answer is 29. 
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An example of the generated answer on the GSM8K task with our Skills-in-Context prompting, where $<$add\_multiple\_numbers$>$ is included as a basic skill in the SKiC prompting context (see Table \ref{Tab:gsm8k_skill}) but is not demonstrated in any given examplar to show how to use it. LLMs automatically figure out how to use such skills in an innovative composition to solve an unseen complex problem.} \label{Tab:example_compose_gsm8k_skill_1}
\end{minipage}

\newpage



\begin{tcolorbox}[title = {GSM8K}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Question}: A merchant wants to make a choice of purchase between 2 purchase plans: jewelry worth \$5,000 or electronic gadgets worth \$8,000. His financial advisor speculates that the jewelry market will go up 2.5\% while the electronic gadgets market will rise 1.2\% within the same month. If the merchant is looking to maximize profit at the end of this month by making a choice, how much profit would this be?
\tcblower
\textbf{Model Output}:


\quad


1. If the merchant buys jewelry worth \$5,000 and the jewelry market goes up 2.5\%, using the Skill $<$mul$>$, the value of the jewelry will increase by \$5,000*2.5\%= \$125.  Using Skill $<$add$>$, the value of the jewelry will be \$5,000+\$125=\$5125. \\ \\
2. If the merchant buys electronic gadgets worth \$8,000 and the electronic gadgets market goes up 1.2\%, using the Skill $<$mul$>$, the value of the electronic gadgets will increase by \$8,000*1.2\%= \$96.  Using Skill $<$add$>$, the value of the electronic gadgets will be \$8,000+\$96=\$8096. \\ \\
3. The merchant wants to maximize profit. Using the Skill  $<$sub$>$,  the profit from buying jewelry will be \$5125-\$5000=\$125.  The profit from buying electronic gadgets will be \$8096-\$8000=\$96. \\ \\
4. Using the Skill \mybox[GreenYellow]{$<$compare$>$}, \$125$>$\$96, so the merchant should buy jewelry  to maximize profit. The profit will be \$125. \\ \\
5. The answer is 125.

\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An example of the generated answer on the GSM8K task with our Skills-in-Context prompting, where the skill $<$compare$>$ are neither included in the SKiC prompting context (see Table \ref{Tab:gsm8k_skill}) nor used in any given examplars. LLMs utilize the skills pre-existing in their pre-trained knowledge to solve the problem.} \label{Tab:example_compose_gsm8k_skill_2}
\end{minipage}



\newpage




\begin{tcolorbox}[title = {GSM8K}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Question}: Mr. Jackson‚Äôs fourth-grade class has 27 students. He wants to give each student 2 glue sticks. The glue sticks  come in packs of 8. How many packs will Mr. Jackson need to buy so every student can have 2 glue sticks, assuming he can only buy whole packs and he expects to have some extra glue sticks left over?
\tcblower
\textbf{Model Output}:


\quad


1. Mr. Jackson‚Äôs fourth-grade class has 27 students and he wants to give each student 2 glue sticks. Using the Skill $<$mul$>$, Mr. Jackson needs 27*2=54 glue sticks. \\ \\
2. The glue sticks come in packs of 8. Using the Skill $<$div$>$, Mr. Jackson needs 54/8=6.75  packs of glue sticks. \\ \\
3. Mr. Jackson can only buy whole packs. Using the Skill \mybox[GreenYellow]{$<$round$>$},  Mr. Jackson needs to buy 7 packs of glue sticks.  \\ \\
4. The answer is 7.
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An example of the generated answer on the GSM8K task with our Skills-in-Context prompting, where the skill $<$round$>$ are neither included in the original SKiC prompting context (see Table \ref{Tab:gsm8k_skill}) nor used in any given examplars. LLMs utilize the skills pre-existing in their pre-trained knowledge to solve the problem.} \label{Tab:example_compose_gsm8k_skill_3}
\end{minipage}


\newpage


\begin{tcolorbox}[title = {MATH}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Question}: What is the smallest possible average of four distinct positive even integers?
\tcblower
\textbf{Model Output}:


\quad


1. The smallest possible average of four distinct positive even integers is achieved when the four integers  are the smallest possible. \\ \\
2. The smallest four distinct positive even integers are 2, 4, 6, and 8. \\ \\
3. Using the Skill \mybox[GreenYellow]{$<$Average$>$}, the average of these four numbers is (2+4+6+8)/4=20/4=5. \\ \\
4. The answer is 5. 
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An example of the generated answer on the MATH task with our Skills-in-Context prompting, where the skill $<$Average$>$  are neither included in the original SKiC prompting context (see Table \ref{Tab:math_skill}) nor used in any given examplars. LLMs(GPT4) utilize the skills pre-existing in their pre-trained knowledge to solve the problem.} \label{Tab:example_compose_math_skill_1}
\end{minipage}




\newpage



\begin{tcolorbox}[title = {MATH}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Question}: How many numbers are in the list $2008, 2003, 1998, \ldots, 8, 3?$
\tcblower
\textbf{Model Output}:


\quad


1. The list starts at 2008 and ends at 3, and the difference between consecutive terms is 5. \\ \\
2. Using the Skill \mybox[GreenYellow]{$<$Arithmetic Sequence$>$}, the n-th term of an arithmetic sequence can be found using the formula $a_n = a_1 + (n - 1)d$, where $a_n$ is the nth term, $a_1$ is the first term, $n$ is the term number, and $d$ is the common difference. \\ \\
3. Substitute $a_n$ with 3, $a_1$ with 2008, and d with $-5$ into the formula, $3 = 2008 + (n - 1)(-5)$. \\ \\
4. Using the Skill $<$Solve Equation$>$, move $2008$ to the other side, $(n - 1)(-5) = 3 - 2008$. Using the Skill $<$Sub$>$, $(n - 1)(-5) = -2005$. \\ \\
5. Using the Skill $<$Solve Equation$>$, move $*(-5)$ to the other side, $n - 1 = -2005 / -5$.  Using the Skill $<$Div$>$, $n - 1 = 401$. \\ \\
6. Using the Skill $<$Solve Equation$>$, move $-1$ to the other side, $n = 401 + 1$.  Using the Skill $<$Add$>$, $n = 402$. \\ \\
7. The answer is 402. \\
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An example of the generated answer on the MATH task with our Skills-in-Context prompting, where the skill $<$Arithmetic Sequence$>$ are neither included in the original SKiC prompting context (see Table \ref{Tab:math_skill}) nor used in any given examplars. LLMs(GPT4) utilize the skills pre-existing in their pre-trained knowledge to solve the problem.} \label{Tab:example_compose_math_skill_2}
\end{minipage}


\newpage


\begin{tcolorbox}[title = {MATH}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Question}: Suppose $P$ is the point $(5,3)$ and $Q$ is the point $(-3,6)$. What is the midpoint of $\overline{PQ}$?
\tcblower
\textbf{Model Output}:


\quad


1. Using the Skill \mybox[GreenYellow]{$<$Midpoint Formula$>$}, the midpoint of two points $(x_1, y_1)$ and $(x_2, y_2)$ is given  by $\left(\frac{x_1+x_2}{2}, \frac{y_1+y_2}{2}\right)$. \\ \\
2. For points $P(5,3)$ and $Q(-3,6)$, the midpoint is $\left(\frac{5+(-3)}{2}, \frac{3+6}{2}\right)$. \\ \\
3. Using the Skill $<$Add$>$ and $<$Div$>$, the midpoint is $\left(\frac{2}{2}, \frac{9}{2}\right) = (1, 4.5)$. \\ \\
4. The answer is $(1, 4.5)$. \\
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An example of the generated answer on the MATH task with our Skills-in-Context prompting, where the skill $<$Midpoint Formula$>$  are neither included in the original SKiC prompting context (see Table \ref{Tab:math_skill}) nor used in any given examplars. LLMs(GPT4) utilize the skills pre-existing in their pre-trained knowledge to solve the problem.} \label{Tab:example_compose_math_skill_3}
\end{minipage}


\newpage

\begin{tcolorbox}[title = {MATH}, colback = Apricot!25!white, colframe = BrickRed!75!black] 
\textbf{Question}: If $\mathbf{a}$ and $\mathbf{b}$ are vectors such that $\|\mathbf{a}\| = 2,$ $\|\mathbf{b}\| = 7,$ and $\mathbf{a} \times \mathbf{b} = \begin{pmatrix} 3 \\ 2 \\ 6 \end{pmatrix}$, then find the smallest possible angle between $\mathbf{a}$ and $\mathbf{b}.$ 
\tcblower
\textbf{Model Output}:


\quad


1. Using the Skill \mybox[GreenYellow]{$<$Cross Product$>$}, the magnitude of the cross product of two vectors is equal to the  product of the magnitudes of the vectors and the sine of the angle between them. So, we have  $\|\mathbf{a} \times \mathbf{b}\| = \|\mathbf{a}\|\|\mathbf{b}\|\sin \theta$, where $\theta$ is the angle between $\mathbf{a}$ and $\mathbf{b}$. \\ \\
2. Using the Skill \mybox[GreenYellow]{$<$Vector Magnitude$>$}, the magnitude of the cross product $\|\mathbf{a} \times \mathbf{b}\|$ is $\sqrt{3^2 + 2^2 + 6^2} = \sqrt{49} = 7$. \\ \\
3. Substituting the given values, we get $7 = 2*7*\sin \theta$. Using the Skill $<$Div$>$ and $<$Mul$>$, we get $\sin \theta = 7/(2*7) = 1/2$. \\ \\
4. Using the Skill \mybox[GreenYellow]{$<$Inverse Trigonometric Functions$>$}, the angle whose sine is 1/2 is 30 degrees or 150 degrees. But we want the smallest possible angle, so $\theta = 30$ degrees. \\ \\
5. The answer is 30. 
\end{tcolorbox}
\noindent\begin{minipage}{\textwidth}
\captionof{figure}{An example of the generated answer on the MATH task with our Skills-in-Context prompting, where the skill  $<$Cross Product$>$, $<$Vector Magnitude$>$,$<$Inverse Trigonometric Functions$>$  are neither included in the original SKiC prompting context (see Table \ref{Tab:math_skill}) nor used in any given examplars. LLMs(GPT4) utilize the skills pre-existing in their pre-trained knowledge to solve the problem.} \label{Tab:example_compose_math_skill_4}
\end{minipage}




\newpage









\begin{figure*}[ht]
\vskip 0.2in
\begin{center}
\centerline{\includegraphics[width=1.0\columnwidth]{figures/error_example.png}}
\caption{Examples of the generated answers from Decomp prompting and our SKiC prompting, respectively. The correct answer should be ``Myristorrhoid, Chimpwurst, Geissant, Riften''. Errors (highlighted in red) in early stages in Decomp propagate to final incorrect answers while our SKiC avoids such errors (highlighted in green).} 
\label{fig:error_example}
\end{center}
\vskip -0.2in
\end{figure*}



%\section{Appendix: the Most Frequently Used Skills by GPT-4 for Solving MATH Benchmark}
%In Table~\ref{Tab:math_top_skills}, we report the most frequently used skills by GPT-4 to solve the MATH problems. There are two sources of the skills: (i) the ones provided in the context of SKiC prompts, and (ii) the ones originating from GPT-4's internal knowledge (acquired through pretraining).







\end{document}