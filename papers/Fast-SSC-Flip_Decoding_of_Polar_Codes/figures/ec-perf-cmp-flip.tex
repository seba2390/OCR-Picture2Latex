\usetikzlibrary{plotmarks}

\definecolor{darkgreen}{RGB}{0, 128, 0}
\definecolor{mypurple}{RGB}{153, 71, 155}

\begin{tikzpicture}

  \pgfplotsset{
    grid style = {
      dash pattern = on 0.05mm off 1mm,
      line cap = round,
      black,
      line width = 0.5pt
    },
    title style = {font=\fontsize{10pt}{7.2}\selectfont},
    label style = {font=\fontsize{10pt}{7.2}\selectfont},
    tick label style = {font=\fontsize{9pt}{7.2}\selectfont}
  }

  \begin{semilogyaxis}[%
    title={$T_{\max}=8$}, title style={yshift=-0.6em},
    xlabel=$E_b/N_0$ (dB),xtick={1,1.5,2,...,4},%
    xlabel style={yshift=0.4em},%
    minor x tick num={1},
    xmin=1.5,xmax=3.5,% 
    ymin=1e-4,ymax=1e-1,% 
    ylabel=Frame-error rate, ylabel style={yshift=-0.6em},%
    width=0.5\columnwidth, height=6.75cm, grid=major,%
    legend style={
      anchor={center},
      cells={anchor=west},
      column sep=1.5mm,
      font=\fontsize{9pt}{7.2}\selectfont,
      mark size=3.0pt,
      mark options=solid
    },
    legend columns=3,
    legend to name=ec-perf-cmp-flip-legend,
    mark size=3.0pt,
    mark options=solid]
    
    \addlegendimage{empty legend}
    \addlegendentry[anchor=east]{SCF \cite{Afisiadis2014}:}
    \addplot[very thick,color=black,mark=asterisk] table[x=EbN0dB,y=FER] {data/512.128.s1.029.float.scf.t8.c16.csv};
    \addlegendentry{}
    \addlegendimage{empty legend}
    \addlegendentry{}

    \addlegendimage{empty legend}
    \addlegendentry[anchor=east]{this work:}

    \addplot[very thick,color=cyan, mark=o] table[x=EbN0dB,y=FER] {data/512.128.s1.029.float.fastsscf.t8.c16.ssc+rep+r1+drep.csv};
    \addlegendentry{No SPC}
    \addlegendimage{empty legend}
    \addlegendentry{}

    \addlegendimage{empty legend}
    \addlegendentry[anchor=east]{\phantom{this work:}}

    \addplot[very thick,color=magenta, mark=Mercedes star] table[x=EbN0dB,y=FER] {data/512.128.s1.029.float.fastsscf.t8.c16.ssc+rep+r1+rspc+0spc+drep+repspc.csv};
    \addlegendentry{w/ SPC ($s=1$)}

    \addplot[very thick,color=orange, mark=diamond] table[x=EbN0dB,y=FER] {data/512.128.s1.029.float.fastsscf.t8.c16.ssc+rep+r1+rspc+0spc+drep+repspc.0.5.csv};
    \addlegendentry{w/ SPC ($s=0.5$)}

    \addlegendimage{empty legend}
    \addlegendentry[anchor=east]{SCL:}

    \addplot[very thick,dashed,color=darkgreen, mark=triangle] table[x=EbN0dB,y=FER] {data/512.128.s1.029.float.scl.l2.c16.csv};
    \addlegendentry{$L = 2$}

    \addplot[very thick,dashed,color=red, mark=x] table[x=EbN0dB,y=FER] {data/512.128.s1.029.float.scl.l4.c16.csv};
    \addlegendentry{$L = 4$}

  \end{semilogyaxis}
\end{tikzpicture}\hspace{-5pt}
\begin{tikzpicture}

  \pgfplotsset{
    grid style = {
      dash pattern = on 0.05mm off 1mm,
      line cap = round,
      black,
      line width = 0.5pt
    },
    title style = {font=\fontsize{10pt}{7.2}\selectfont},
    label style = {font=\fontsize{10pt}{7.2}\selectfont},
    tick label style = {font=\fontsize{9pt}{7.2}\selectfont}
  }

  \begin{semilogyaxis}[%
    title={$T_{\max}=16$}, title style={yshift=-0.6em},
    xlabel=$E_b/N_0$ (dB),xtick={1,1.5,2,...,4},%
    xlabel style={yshift=0.4em},%
    minor x tick num={1},
    xmin=1.5,xmax=3.5,% 
    ymin=1e-4,ymax=1e-1,% 
    ylabel=Frame-error rate, ylabel style={yshift=-0.6em},%
    width=0.5\columnwidth, height=6.75cm, grid=major,%
    mark size=3.0pt,
    mark options=solid]
    
    \addplot[very thick,color=black,mark=asterisk] table[x=EbN0dB,y=FER] {data/512.128.s1.029.float.scf.t16.c16.csv};

    \addplot[very thick,color=cyan, mark=o] table[x=EbN0dB,y=FER] {data/512.128.s1.029.float.fastsscf.t16.c16.ssc+rep+r1+drep.csv};

    \addplot[very thick,color=magenta, mark=Mercedes star] table[x=EbN0dB,y=FER] {data/512.128.s1.029.float.fastsscf.t16.c16.ssc+rep+r1+rspc+0spc+drep+repspc.csv};

    \addplot[very thick,color=orange, mark=diamond] table[x=EbN0dB,y=FER] {data/512.128.s1.029.float.fastsscf.t16.c16.ssc+rep+r1+rspc+0spc+drep+repspc.0.5.csv};

    \addplot[very thick,dashed,color=darkgreen, mark=triangle] table[x=EbN0dB,y=FER] {data/512.128.s1.029.float.scl.l2.c16.csv};

    \addplot[very thick,dashed,color=red, mark=x] table[x=EbN0dB,y=FER] {data/512.128.s1.029.float.scl.l4.c16.csv};

  \end{semilogyaxis}
\end{tikzpicture}
\\
\ref{ec-perf-cmp-flip-legend}
