\begin{tikzpicture} [darkstyle/.style={draw,fill=gray!40,minimum size=20},scale=1]
    \path [draw, ->, thick] (0, -0.5) to (4, -0.5);
    \path [draw, ->, thick] (-0.75, 0) to (-0.75, 4);

    \node at (-0.5, -1) {$g$};
    \node at (-1.2, -0.5) {$h$};

    \foreach \x in {0,...,4}
    \node  at (1*\x,-1) {\x};

    \foreach \y in {0,...,4}
    \node  at (-1.2,1*\y) {\y};

    \foreach \x/\y/\i/\t in {0/2/1/ \init}{
            \node [darkstyle]  (\x\y) at (1*\x,1*\y) {\t};
            \node [] at (-0.225+\x, -0.2+\y)  {\small{$\i$}};
        }

    \foreach \x/\y/\i/\t in {1/1/2/, 1/2/3/, 2/1/4/, 1/3/5/, 2/2/6/, 3/1/7/,4/0/8/\goal}{
            \node [darkstyle]  (\x\y) at (1*\x,1*\y) {\t};
            \node [] at (-0.225+\x, -0.2+\y)  {\small{$\i$}};
        }

    \foreach \x/\y in {1/4,2/3,2/4,3/3,3/4,4/1,1/4,3/2}{
            \node [draw, minimum size=20]  (\x\y) at (1*\x,1*\y) {};
        }

    \foreach \x/\y in {02/12, 02/11, 02/13, 02/14, 11/21, 11/22, 12/21, 12/22, 12/23, 13/23,13/22,13/24,21/31,22/31,22/32,22/33,22/34,31/40,31/41}{
            \path[draw, ->, thick] (\x) to (\y);
        }


    \draw[dashed] (-0.0, 3.0) node [above] {\footnotesize $f=3$} -- (3.0, -0.0) ;
    \draw[dashed] (-0.0, 4.0) node [above] {\footnotesize $f=4$} -- (4.0, -0.0) ;

    \foreach \x/\y in {1/4,2/3,2/4,3/3,3/4,4/1,1/4,3/2}{
            \node [draw=red, sloped, cross out, line width=.5ex, minimum width=1.5ex, minimum height=1ex, anchor=center]  (\x\y) at (1*\x,1*\y) {};
        }

\end{tikzpicture}