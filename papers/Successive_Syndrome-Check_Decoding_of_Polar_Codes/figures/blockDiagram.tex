\begin{tikzpicture}[scale=1.2,thick]\scriptsize
\draw (0,.5) rectangle ++(2,-1) node [pos=.5,align=center] {Initialize $\bm{x}$\\[.1cm]$x_i \!=\! \begin{cases}0 & \text{if } y_i\geq0 \\1 & \text{if } y_i<0 \end{cases}$};

\draw[->] (1,-.5) -- ++(0,-.5);
\draw (0,-1) rectangle ++(2,-.5) node [pos=.5,align=center] {$\bm{x}\bm{H} = 0$?};

\draw[->] (2,-1.25) -- ++(1,0) node [midway,fill=white] {Yes};
\draw (3,-.75) rectangle ++(1.5,-1) node [pos=.5,align=center] {Output\\$\bm{u} = \bm{x}\bm{G}^{\otimes n}$};

\draw[->] (1,-1.5) -- ++(0,-.75) node [midway,fill=white] {No};
\draw (0,-2.25) rectangle ++(2,-1) node [pos=.5,align=center] {Identify first $u_i\!\in\!\mathcal{F}$\\where $u_i \neq 0$};

\draw[->] (1,-3.25) -- ++(0,-.5);
\draw (0,-3.75) rectangle ++(2,-.5) node [pos=.5,align=center] {Generate $\bm{e}_i$};

\draw[->] (1,-4.25) -- ++(0,-.5);
\draw (0,-4.75) rectangle ++(2,-.5) node [pos=.5,align=center] {$\bm{x} = \bm{x} \oplus \bm{e}_i$};

\draw[->] (0,-5) -- ++(-1,0) -- ++(0,3.75) -- ++(1,0);

\end{tikzpicture}
