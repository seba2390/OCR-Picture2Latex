\section{Conclusion}
In this paper, we propose convolutional spatial propagation network (CSPN), which can be jointly learned with any type of CNN.  It can be regarded as a linear diffusion process with guarantee to converge. Comparing with previous spatial propagation network~\cite{liu2017learning} which learns the affinity, CSPN is not only more efficient (2-5$\times$ faster), but also more accurate (over $30\%$ improvement) in terms of depth refinement. We also extend CSPN by embedding sparse depth samples into the propagation process, which provides superior improvement over other SOTA methods~\cite{Ma2017SparseToDense}. Since our framework is general, in the future, we plan to apply it to other tasks such as image segmentation and enhancement.

\begin{figure}[!htpb]
\centering
\includegraphics[width=0.95\textwidth]{fig/kitti_2.pdf}
\caption{Qualitative comparisons on KITTI dataset. (a) Input image; (b) Sparse depth samples(500); (c) Ground Truth; (d) Ma \etal \cite{Ma2017SparseToDense}; (e) Ma\cite{Ma2017SparseToDense}+SPN\cite{liu2016learning};(f) UNet+CSPN(Ours). Some details in the red bounding boxes are zoomed in for better visualization (best view in color).}
\label{fig:kitti}
\end{figure}