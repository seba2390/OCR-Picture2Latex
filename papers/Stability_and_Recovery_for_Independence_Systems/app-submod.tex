\section{Proof of \hyperref[th:submod]{Theorem} for welfare maximization}\label{app:submod}

\begin{theorem}
Let $(X,\I)$ be a matroid on the elements of $X$, let $B_1,B_2,\dots,B_k$ be a partition of $X$, $f_i: 2^{B_i}\to \RR^+\cup\{0\}$, for $i\in \{1,2,\dots,k\}$ be monotone submodular and let $f=\sum_{i=1}^kf_i$. If the optimal solution $S^*$ of $\max\{f(S): S\in \I\}$ is $2$-stable with respect only to individual perturbations of the functions $f_i$, greedy will recover $S^*$.
\end{theorem}

\begin{proof}
We note that the $B_i$'s form a partition of $X$ which is not tied to the matroid in any way. To avoid confusion, we should first emphasize the greedy algorithm in this case: It starts with the empty set $S_0=\emptyset$, at step $t$ it selects: $e=\arg\max_{x\in X}\{f(S_{t-1}+x)-f(S_{t-1})\}$ subject to the matroid constraint and it updates $S_t\leftarrow S_{t-1}+e$. This is a particular instantiation of the standard greedy algorithm in welfare maximization that first picks an item giving it to the player so that it yields maximum marginal improvement.

Suppose greedy outputs $S\neq S^*$ and that it chose elements $A_i\subseteq B_i$. Let $S_e$ be the greedy solution right before adding element $e$. Then a 2-perturbation of the individual functions is:
\[
\tilde{f_i}(A_i)=f_i(A_i)+\sum_{e\in (S\cap B_i)\sm S^*}f_i((B_i\cap S_e)+e)-f_i(B_i\cap S_e)
\]
Now coming back to the total welfare function $f$ we get:
\[
\tilde{f}(S)=\sum_{i=1}^k\tilde{f}_i(S\cap B_i)=f(S)+\sum_{e\in S\sm S^*}f_{S_e}(e)\ge f(S)+\sum_{e'\in S^*\sm S, e\leftrightarrow e'}f_{S_e}(e')\ge
\]
\[
\ge f(S)+f_S(S^*\sm S)\ge f(S^*\cup S)\ge f(S^*)=\tilde{f}(S^*)
\]
where we made use of the greedy criterion, submodularity and the matroid matching $e\leftrightarrow e'$ between elements $e\in S\sm S^*$ and $e' \in S^*\sm S$. We got $\tilde{f}(S)\ge \tilde{f}(S^*)$, hence a contradiction to the 2-stability of $S^*$ and hence $S\equiv S^*$ and greedy exactly recovers the optimal solution. 
\end{proof}
























%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
