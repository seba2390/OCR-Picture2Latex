\section{Experiments}\label{sec:experiments}
%
We implemented a prototype using the \tool{Python} interfaces of the probabilistic model checker \tool{STORM}~\cite{DBLP:journals/corr/DehnertJK016} and the optimization solver \tool{MOSEK}~\cite{mosek}.
 All experiments were run on a 2.6 GHz machine with 32 GB RAM. 
 We used \tool{PRISM}~\cite{KNP11} to correct approximation errors as explained before. 
%
We evaluated our approaches using mainly examples from the \tool{PARAM}--webpage~\cite{param_website} and from \tool{PRISM}~\cite{KNP12b}.
We considered several parametric instances of the \emph{Bounded Retransmission Protocol} (BRP)~\cite{HSV94},  \emph{NAND Multiplexing}~\cite{HJ02}, and the \emph{Consensus} protocol (CONS)~\cite{consensus}. For BRP, we have a pMC and a pMDP version, NAND is a pMC, and CONS is a pMDP.
For obtaining feasibility solutions, we compare to the SMT solver \tool{Z3}~\cite{demoura_nlsat}. For additional optimality criteria, there is no comparison to another tool possible as \tool{IPOPT}~\cite{ipopt} already fails for the smallest instances we consider.

Fig.~\ref{tab:scalability} states for each benchmark instance the number of states (\#{}states) and the number of parameters (\#{}par). We defined two specifications consisting of a expected cost property ($\er$) and a reachability property ($\p$). For some benchmarks, we also maximized the probability to reach a set of ``good states'' ($*$). We list the times taken by \tool{MOSEK}; for optimality problems we also list the times \tool{PRISM} took to compute precise probabilities or costs (Section~\ref{sec:approximation}). For feasibility problems we list the times of \tool{Z3}. The timeout (\emph{TO}) is $90$ minutes.
%
%
%\begin{minipage}{0.7\textwidth}
%\begin{table*}[t]
%\centering
%\caption{Experimental results.}
%\label{tab:scalability}
\begin{figure}[t]
	\centering
	\subfigure[Benchmark results]{\scalebox{0.75}{\input{pics/results_table}}\label{tab:scalability}}
	\subfigure[Sensitivity to \#par]{\scalebox{0.95}{\input{pics/plot_die}\label{plot:param}}}
%	\vspace{-0.3cm}
\caption{Experiments.}
%\vspace{-0.7cm}
%\label{tab:scalability}
\end{figure}

%\end{table*}
We observe that both for feasibility with optimality criteria we can handle most benchmarks of up to $10^5$ states within the timeout, while we ran into a timeout for CONS. The number of iterations $N$ in the sequential convex programming is less than $12$ for all benchmarks with $\epsilon=10^{-3}$.
As expected, simply solving feasibility problems is faster by at least one order of magnitude. Raising the number of parameters from $2$ to $4$ for BRP does not cause a major performance hit, contrary to existing tools. For all benchmarks except NAND, \tool{Z3} only delivered results for the smallest instances within the timeout. 
%As mentioned before, this is expected due to the complexity of SMT solving.

To demonstrate the insensitivity of our approach to the number of parameters, we considered a pMC of rolling multiple  Knuth--Yao dice with $156$ states, $522$ transitions and considered instances with up to $8$ different parameters. The timeout is $100$ seconds.
In Fig.~\ref{plot:param} we compare our encoding in \tool{MOSEK} for this benchmark to the mere computation of a rational function using \tool{PROPhESY}~\cite{dehnert-et-al-cav-2015} and again to \tool{Z3}. \tool{PROPhESY} already runs into a timeout for $4$ parameters\footnote{Due to the costly computation of greatest common divisors employed in \prophesy.}.
%; this is due to the fact that \tool{PROPhESY} uses state elimination which involves the costly computation of the greatest common divisor of polynomials. 
\tool{Z3} needs around $15$ seconds for most of the tests. Using GPs with \tool{MOSEK} proves far more efficient  as it needs less than one second for all instances.

In addition, we test model repair (Section~\ref{sec:applications}) on a BRP instance with $17415$ states for $\varphi=\reachProp{0.9}{T}$. The initial parameter instantiation violates $\varphi$. We performed model repair towards satisfaction of $\varphi$. The probability of reaching $T$ results in $0.79$ and the associated cost is $0.013$. The computation time is $21.93$ seconds. We compare our result to an implementation of~\cite{chen2013model}, where the probability of reaching $T$ is $0.58$ and the associated cost is $0.064$. However, the time for the simulation-based method is only $2.4$ seconds, highlighting the expected trade-off between optimality and computation times for the two methods.
	
Finally, we encode model repair for the small pMC from Example~\ref{ex:die} in \tool{IPOPT}, see~\cite{bartocci2011model}. For $\psi=\reachProp{0.125}{T}$ where $T$ represents the outcome of the die being $2$, the initial instantiation induces probability $1/6$. With our method, the probability of satisfying $\psi$ is $0.1248$ and the cost is $0.0128$. With \tool{IPOPT}, the probability is $0.125$ with cost $0.1025$, showing that our result is nearly optimal.
%	For the instance with two die, the reachability specification is given as $\reachProplT$ where $\lambda =0.01$ and The initial parameter instantiation satisfies the reachability property with probability $1/36.$ With our method, the propability of satisfying the specification is $0.0022$ and the associated cost is 0.0134. With \tool{IPOPT}, the propability of satisfying the specification is $0.01$ and the associated cost is 0.0136




%\begin{itemize}
%%\item for Knuth Yao Die, report in \tool{IPOPT} results in comparison
%%		\item We also compared our approach to bertocci for Knuth Yao Die in two instances. 
%%	For the instance with one die, the reachability specification is given as $\reachProplT$ where $\lambda =0.125$ and The initial parameter instantiation satisfies the reachability property with probability $1/6.$ With our method, the propability of satisfying the specification is $0.1248$ and the associated cost is 0.0128. With \tool{IPOPT}, the propability of satisfying the specification is $0.125$ and the associated cost is 0.1025.
%%	For the instance with two die, the reachability specification is given as $\reachProplT$ where $\lambda =0.01$ and The initial parameter instantiation satisfies the reachability property with probability $1/36.$ With our method, the propability of satisfying the specification is $0.0022$ and the associated cost is 0.0134. With \tool{IPOPT}, the propability of satisfying the specification is $0.01$ and the associated cost is 0.0136.
%	\item for BRP with 4 parameters, list running times of \prophesy to just generate the rational function in comparison to solve the whole feasibility problem with our approach
%	\item mention that no tool can directly handle multi-objective properties.
%	\item discuss that if this approach would be part of a mature tool like \tool{PRISM} or \tool{PROPhESY}, eg bisimulation minimization would enable way larger benchmarks.
%	\item add benchmarks with more parameters
%\end{itemize}
