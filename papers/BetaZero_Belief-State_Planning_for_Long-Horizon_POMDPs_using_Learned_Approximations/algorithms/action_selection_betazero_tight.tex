\begin{algorithm}[H]
    \small
    \caption{BetaZero action progressive widening.}
    \label{alg:betazero-action-pw}
    \begin{algorithmic}[1]
        \Function{ActionSelection$(f_\theta, b)$}{}
            \State $\tilde{b} \leftarrow \phi(b)$ \GrayComment{belief representation \cref{eq:belief_rep}}
            \If {$| A(b) | \le kN(b)^\alpha\phantom{\tilde{b}}$} \GrayComment{action progressive widening}
                \State $a \sim P_\theta(\tilde{b}, \cdot)$ \GrayComment{prioritized from network}
                % \State $a \sim \begin{cases}
                %     P_\theta(\tilde{b}, \cdot) & \text{w/ prob. $1-\epsilon$}\\
                %     \mathcal{A}(b) & \text{otherwise}
                % \end{cases}$
                \State $N(b,a) \leftarrow N_0(b,a)$
                \State $Q(b,a) \leftarrow Q_0(b,a)$ \label{line:init_q} \GrayComment{bootstrap initial $Q$-value}
                \State $A(b) \leftarrow A(b) \cup \{a\}$ \GrayComment{add to visited actions $A(b)$}
            \EndIf
            \State \Return ${\displaystyle\argmax_{a \in A(b)}}\ Q(b,a) + c\Bigl(P_\theta(\tilde{b},a)\frac{\sqrt{N(b)}}{1 + N(b,a)}\Bigr)$ \GrayComment{PUCT}
        \EndFunction
    \end{algorithmic}
\end{algorithm}
