%%% PACKAGES

%\usepackage{amsmath}
%\usepackage{amsthm}
%\usepackage{amssymb}
\usepackage{anyfontsize}
%\usepackage{bm}
\usepackage{enumerate}
\usepackage{esint}
\usepackage{etoolbox}
%\usepackage{fourier}
\usepackage{isomath}
\usepackage{mathrsfs}
\usepackage{mathtools}
\usepackage{multicol}
\usepackage{pgfplots}
\usepackage{scalerel}
\usepackage{stackengine}
\usepackage{tabulary}
\usepackage{tikz}


%%% COMMAND DEFINITIONS

% Formatting Commands

\newcommand{\ds}[1]{\displaystyle{#1}}
\newcommand{\ts}[1]{\textstyle{#1}}

\newcommand{\ns}{\!\!}
\newcommand{\nss}{\ns\ns}
\newcommand{\nsss}{\nss\nss}
\newcommand{\nssss}{\nsss\nsss}

\newcommand{\qqquad}{\qquad\qquad}
\newcommand{\qqqquad}{\qqquad\qqquad}

% General Sets and Spaces

\newcommand{\set}[1]{\mathcal{#1}}
\newcommand{\class}[1]{\mathscr{#1}}

% Special Measures
\newcommand{\Leb}{\mathscr{L}}
\newcommand{\Haus}{\mathscr{H}}

% Set Operations

\newcommand{\setm}{\setminus}
\newcommand{\comsub}{\Subset}
\newcommand{\haus}{\mathscr{H}}

% Special Sets

\newcommand{\cmpx}{\mathbb{C}}
\newcommand{\cmpxn}{\cmpx^n}
\newcommand{\cmpxo}{\ov{\cmpx}}
\newcommand{\nats}{\mathbb{N}}
\newcommand{\whls}{\mathbb{W}}
\newcommand{\ints}{\mathbb{Z}}
\newcommand{\rats}{\mathbb{Q}}
\newcommand{\re}{\mathbb{R}}
\newcommand{\rej}{\re^j}
%\newcommand{\rem}{\re^m}
\newcommand{\ren}{\re^n}
\newcommand{\reN}{\re^N}
\newcommand{\renm}{\re^{n\times m}}
\newcommand{\renn}{\re^{n\times n}}
\newcommand{\reNn}{\re^{N\times n}}
\newcommand{\ret}[2]{\re^{#1\otimes #2}}
\newcommand{\ok}{\otimes k}
\newcommand{\reo}{\ov{\re}}

\newcommand{\bll}{\set{B}}
\newcommand{\sph}{\set{S}}
\newcommand{\ann}{\set{A}}
\newcommand{\nhd}{\set{N}}

% Special Spaces

\newcommand{\cnt}{\class{C}}
\newcommand{\bdd}{\class{B}}

% Algebra and Constants

\newcommand{\smfrac}[2]{{\textstyle{\frac{#1}{#2}}}}
\newcommand{\ee}{\mathrm{e}}

% Calculus

\newcommand{\lint}[1]{\int\limits_{#1}}
\newcommand{\luint}[2]{\int\limits_{#1}^{#2}}
\newcommand{\flint}[1]{\fint\limits_{#1}}
\newcommand{\dd}{\mathrm{d}}

\newcommand{\der}[2]{\frac{\dd #1}{\dd #2}}
\newcommand{\derk}[3]{\frac{\dd^{#1} #2}{\dd #3^{#1}}}
\newcommand{\smder}[2]{\smfrac{\dd #1}{\dd #2}}
\newcommand{\smderk}[3]{\smfrac{\dd^{#1} #2}{\dd #3^{#1}}}
\newcommand{\pder}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\pderk}[3]{\frac{\partial^{#1} #2}{\partial #3^{#1}}}
\newcommand{\pderkl}[4]{\frac{\partial^{#1} #2}{\partial #3^{#4}}}
\newcommand{\smpder}[2]{\smfrac{\partial #1}{\partial #2}}
\newcommand{\smpderk}[3]{\frac{\partial^{#1} #2}{\partial #2^{#1}}}
\newcommand{\grd}{\te{\nabla}}

% Arc Symbol

\newcommand\widearc[2][\textstyle]{\ensuremath{%
  \!\ns\array[b]{c}\text{\scalebox{2}[1.2]{$#1\frown$}}\\[-1.8ex]#1#2\endarray}\!\ns}

% Vectors

\makeatletter
\newcommand*\bdot{\mathpalette\bdot@{.65}}
\newcommand*\bdot@[2]{\mathbin{\vcenter{\hbox{\scalebox{#2}{$\m@th#1\bullet$}}}}}
\makeatother

\makeatletter
\newcommand*\bddot{\mathpalette\bddot@{.65}}
\newcommand*\bddot@[2]{\mathbin{\vcenter{\hbox{\scalebox{#2}
    {$\m@th#1\smash{{}_{\bullet}^{\bullet}}$}}}}}
\makeatother

%\circled[#1]{#2}   % [#1]: size of circle; {#2}: symbol in circle

\newcommand{\circled}[2][]{%
  \tikz[baseline=(char.base)]{%
    \node[shape = circle, draw, inner sep = .5pt]
    (char) {\phantom{\ifblank{#1}{#2}{#1}}};%
    \node at (char.center) {\makebox[0pt][c]{#2}};}}
\robustify{\circled}

\newcommand{\ve}[1]{\vectorsym{#1}}
\newcommand{\valp}{\ve{\alpha}}
\newcommand{\vbet}{\ve{\beta}}
\newcommand{\vvph}{\ve{\vph}}
\newcommand{\vps}{\ve{\psi}}
\newcommand{\vPh}{\ve{\Phi}}
\newcommand{\vxi}{\ve{\xi}}
\newcommand{\vzet}{\ve{\zeta}}
\newcommand{\vom}{\ve{\omega}}
\newcommand{\va}{\ve{a}}
\newcommand{\vf}{\ve{f}}
\newcommand{\vg}{\ve{g}}
\newcommand{\vei}{\ve{i}}
\newcommand{\vK}{\ve{K}}
\newcommand{\vP}{\ve{P}}
\newcommand{\vu}{\ve{u}}
\newcommand{\vv}{\ve{v}}
\newcommand{\vw}{\ve{w}}
\newcommand{\vx}{\ve{x}}
\newcommand{\vy}{\ve{y}}
\newcommand{\vY}{\ve{Y}}
\newcommand{\vz}{\ve{z}}
\newcommand{\vZ}{\ve{Z}}

% Braces

\newcommand{\lp}{\left(}
\newcommand{\rp}{\right)}
\newcommand{\ls}{\left[}
\newcommand{\rs}{\right]}
\newcommand{\lc}{\left\{}
\newcommand{\rc}{\right\}}
%\newcommand{\la}{\left\langle}
\newcommand{\ra}{\right\rangle}
\newcommand{\lvl}{\left|}
\newcommand{\rvl}{\right|}
\newcommand{\lper}{\left.}
\newcommand{\rper}{\right.}

% Tensors

\newcommand{\te}[1]{\tensorsym{#1}}
\newcommand{\tA}{\te{A}}
\newcommand{\tD}{\te{D}}
\newcommand{\tI}{\te{I}}
\newcommand{\tInn}{\tI^{n\times n}}
\newcommand{\tnu}{\te{\nu}}
\newcommand{\tP}{\te{P}}
\newcommand{\tR}{\te{R}}
\newcommand{\tX}{\te{X}}
\newcommand{\tPhi}{\te{\Phi}}
\newcommand{\tPsi}{\te{\Psi}}

% Matrices

\newcommand{\mx}[1]{\matrixsym{#1}}

% Operators

\def\comp{\operatorname{c}}
\def\bdd{\operatorname{b}}
\def\loc{\operatorname{loc}}
\def\dist{\operatorname{dist}}
\def\diverge{\operatorname{div}}
\def\Hom{\operatorname{Hom}}
\def\sint{\operatorname{int}}
\def\sgn{\operatorname{sgn}}
\def\supp{\operatorname{supp}}
\def\esssup{\operatorname*{ess\;sup}}
\def\essinf{\operatorname*{ess\;inf}}
\def\range{\operatorname{range}}
\def\vspan{\operatorname{span}}
\def\nullsp{\operatorname{Null}}
\def\coker{\operatorname{coker}}
\def\colsp{\operatorname{col}}
\def\rowsp{\operatorname{row}}
\def\range{\operatorname{rng}}
\def\tran{\operatorname{T}}
\def\trace{\operatorname{tr}}
\def\codim{\operatorname{codim}}
\def\rank{\operatorname{rank}}
\def\nullity{\operatorname{nullity}}
\def\DNE{\operatorname{DNE}}
\def\closure{\operatorname{cl}}
\def\interior{\operatorname{int}}
\def\diam{\operatorname{diam}}
\def\conv{\operatorname{Conv}}
\def\card{\operatorname{card}}
\def\proj{\operatorname{proj}}

% Operator Norms

% \opnorm{a}        % normal size
% \opnorm[\big]{a}  % slightly larger
% \opnorm[\Bigg]{a} % largest
% \opnorm*{a}       % \left and \right

\makeatletter
\newcommand{\opnorm}{\@ifstar\@opnorms\@opnorm}
\newcommand{\@opnorms}[1]{%
  \left|\mkern-1.5mu\left|\mkern-1.5mu\left|
   #1
  \right|\mkern-1.5mu\right|\mkern-1.5mu\right|
}
\newcommand{\@opnorm}[2][]{%
  \mathopen{#1|\mkern-1.5mu#1|\mkern-1.5mu#1|}
  #2
  \mathclose{#1|\mkern-1.5mu#1|\mkern-1.5mu#1|}
}
\makeatother

% Other Stuff

\newcommand{\nd}{\quad\text{ and }\quad}
\newcommand{\frl}{\quad\text{ for all }}
\newcommand{\st}{\text{ s.t. }}
\newcommand{\ov}[1]{\overline{#1}}
%\newcommand{\vep}{\varepsilon}
%\newcommand{\vph}{\varphi}
\newcommand{\vrh}{\varrho}
\newcommand{\vth}{\vartheta}
\newcommand{\wt}[1]{\widetilde{#1}}
\newcommand{\wh}[1]{\widehat{#1}}
\newcommand{\wto}{\rightharpoonup}
\newcommand{\supst}[1]{#1^\text{st}}
\newcommand{\supnd}[1]{#1^\text{nd}}
\newcommand{\suprd}[1]{#1^\text{rd}}
\newcommand{\supth}[1]{#1^\text{th}}

\newcommand{\txt}[1]{\textup{#1}}
\newcommand{\gsol}[1]{\underbrace{#1}_{\txt{\small General Solution}}}
\newcommand{\step}[1]{{\textup{Step #1:}}\quad}
\newcommand{\sstep}[1]{{\textup{substep #1:}}\quad}
\newcommand{\rd}{\mathrm{d}}

\newcommand{\dom}{\Omega}
\newcommand{\bnd}{\Gamma}

\newcommand{\bbD}{\mathbb{D}}

\newcommand{\renok}{\ret{n}{k}}


\newcommand{\oA}{\mathscr{A}}
\newcommand{\oD}{\mathscr{D}}
\newcommand{\oL}{\mathscr{L}}
\newcommand{\oP}{\mathscr{P}}
\newcommand{\oR}{\mathscr{R}}
\newcommand{\oT}{\mathscr{T}}

%\newcommand{\bi}{\bar{i}}
\newcommand{\ci}{\check{i}}
\newcommand{\hi}{\hat{i}}
\newcommand{\ti}{\tilde{i}}
\newcommand{\hvx}{\hat{\vx}}
\newcommand{\hvy}{\hat{\vy}}
\newcommand{\hS}{\hat{S}}
\newcommand{\whi}{\wh{i}}
\newcommand{\hJ}{\hat{J}}
\newcommand{\whk}{\wh{k}}
\newcommand{\whvx}{\wh{\vx}}
\newcommand{\whvy}{\wh{\vy}}

\newcommand\ochar[1]{\circled[1]{#1}\,}
\newcommand\oempt{\circled[a]{}\,}


\stackMath
\newcommand\reallywidecheck[1]{%
\savestack{\tmpbox}{\stretchto{%
  \scaleto{%
    \scalerel*[\widthof{\ensuremath{#1}}]{\kern-.6pt\bigwedge\kern-.6pt}%
    {\rule[-\textheight/2]{1ex}{\textheight}}%WIDTH-LIMITED BIG WEDGE
  }{\textheight}%
}{0.5ex}}%
\stackon[1pt]{#1}{\scalebox{-1}{\tmpbox}}%
}