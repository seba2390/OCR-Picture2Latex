In this section, we briefly summarize the problem formulation, transformation and solution reconstruction in \cite{HongIJER15}. Note that the formulations of three optimization problems in \cite{HongIJER15} are similar, which can be securely transformed and solved using the same secure communication problem. Thus, we only focus on the basic formulation. 

\subsection{Problem Formulation}

Given $n$ microgrids $M_1,\dots, M_i$, the demand and supply of $M_i$ at time $t$ is denoted as $D_i(t)$ and $S_i(t)$, respectively. Then, given $x_{ij}$ as the amount of energy transmitted from $M_i$ to $M_j$, the optimization (LP) problem to minimize the overall energy delivery loss in the sharing is formulated as follows.

\begin{equation}
\small
\begin{gathered}
\min: \sum_{i=1}^{n}\sum_{j=1}^n \theta_{ij}x_{ij}\\
s.t.{\centering
	\begin{cases}
	\forall i\in[1,n], \sum_{j=1}^n(1-\theta_{ji})
	x_{ji}-\sum_{j=1}^nx_{ij}+S_i(t)\geq D_i(t)\\
	\forall i\in[1,n], \sum_{j=1}^nx_{ij} \leq S_i(t)\\
	\forall i\in [1,n], \forall j\in[1,n], x_{ij}\geq 0
	\end{cases}}
\end{gathered}\label{eq:meet}
\end{equation}

where $\theta_{ij}$ represents the energy loss rate for transmission between $M_i$ and $M_j$, which is determined by the distance between them on the power transmission network and the power quality data, such as voltage and current. $D_i(t)$, $S_i(t)$ and $\theta_{ij}$ are privately held by microgrid $M_i$. The general form of Equation \ref{eq:meet} can be derived as below:

\begin{equation}
\begin{gathered}
\min ~~~~~\vec{c_1}^T\vec{x_1}+\vec{c_2}^T\vec{x_2}+\dots+\vec{c_n}^T\vec{x_n}\\
s.t.{\centering
	\begin{cases}
	\begin{array}{ccc}
	A_1\vec{x_1}+& \ldots &+ A_n\vec{x_n} \\
	B_1\vec{x_1}&  & \\
	& \ddots&\\
	& & B_n\vec{x_n}\\
	%\vec{z_1}, & \dots & ,\vec{z_n}
	\end{array}\begin{array}{c}
	\leq\\
	\leq\\
	\vdots\\
	\leq\\
	%\geq
	\end{array}
	\begin{array}{c}
	\vec{b_0}\\
	\vec{b_1}\\
	\vdots\\
	\vec{b_n}\\
	\end{array}
	\end{cases}}
\end{gathered}
\label{eq:std}
\end{equation}

where $\vec{x_i}$ represents $M_i$'s variables $(x_{i1},\dots, x_{in})$, which is privately held by $M_i$. Matrices/vectors $A_i$, $B_i$, $\vec{c_i}^T$ and $\vec{b_i}$ are $M_i$'s private inputs in the LP problem. 

\subsection{Transformation}

The above LP problem is heterogeneously partitioned into $n$ shares -- global constraints are co-held by all the parties (vertically partitioned \cite{HongJCS12,HongDBSEC14,HongThesis}) while each constraint belongs to only one party (horizontally partitioned \cite{HongOpt13,HongJIS14,HongTDSC15}). To ensure privacy protection in solving and realizing the above problem, a transformation-based approach \cite{HongIJER15} was proposed:

\begin{align}
\forall i\in[1,n], A_i&\longrightarrow A_iQ_i\nonumber\\
\forall i\in[1,n], B_i&\longrightarrow B_iQ_i\nonumber\\
\forall i\in[1,n], \vec{c_i}^T&\longrightarrow \vec{c_i}^TQ_i\nonumber\\
\forall i\in[1,n], \vec{x_i}&\longrightarrow \vec{y_i}
\label{eq:trans}  
\end{align}

where each party $M_i$ locally post-multiplies its shares (i.e., $A_i$, $B_i$ and $\vec{c_i}^T$) in the LP problem by an $n\times n$ random nonnegative monomial matrix $Q_i$ \cite{HongJCS12} which is privately generated by itself, and variables in the new problem $\forall \vec{y_i}$ correspond to $\forall \vec{x_i}$. Then, $\forall i\in[1,n], A_iQ_i, B_iQ_i, \vec{c_i}^TQ_i$ can be disclosed to other parties.

Note that the righthand side values $\vec{b_0},\vec{b_1},\dots,\vec{b_n}$ are also transformed to random numbers in \cite{HongIJER15}, and we still keep such transformation. Thus, we will focus on the security/privacy improvement on the transformation in Equation \ref{eq:trans}.

\subsection{Reconstruction}

In \cite{HongIJER15}, after solving the transformed problem to obtain the optimal solution $\forall \vec{y_i}^*$, the solver (any party or an external party, e.g., the cloud) distributes the solution shares to the corresponding parties. Then, the optimal solution of the original problem $\forall i\in[1,n], \vec{x_i}^*$ can be locally reconstructed as: $\vec{x_i}^*=Q_i\vec{y_i}^*$ \cite{HongIJER15,HongDBsec,HongJCS12}. The solver and other parties cannot learn the details of $\vec{x_i}^*$, $A_i$, $B_i$ since $Q_i$ is unknown to them. 


