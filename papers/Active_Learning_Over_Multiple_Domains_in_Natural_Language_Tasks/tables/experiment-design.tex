\begin{algorithm}[htb]
    \caption{\label{alg:exp-design}\textsc{Experimental Design}}
  \label{alg:experiment}
\begin{algorithmic}[1]
    % \SetCommentSty{itshape}
% \SetKwComment{Comment}{$\triangleright$ }{}
  \footnotesize
  \FOR{each Acquisition Function $A_f$}
  \FOR{each Target set $D_T \sim D$}
  \STATE $D_{T}^{train}, D_{T}^{dev}, D_{T}^{test} \sim D_T$ \\
  \STATE $D_{S} := \{x \in D \; | \; x \notin D_T \}$
  \STATE $M_A \leftarrow \textsc{Train}(D_{T}^{train}, D_{T}^{dev})$\\
  \STATE $D^{chosen} \leftarrow [\text{Rank}_{x \in D_{S}} A_{f}(x, M_A)][:n]$\\
  \STATE $D^{final-train} = D_T^{train} \cup D^{chosen}$
  \STATE $M \leftarrow \textsc{GridSearch} (D^{final-train}, D_{T}^{dev})$\\
  \STATE $(A_f, D_T) = s_T^{A_f} \leftarrow  M(D_{T}^{test}) $ \\
  \ENDFOR
  \ENDFOR

  \RETURN Scores Dictionary $(A_f, D_T) \rightarrow s_T^{A_f}$ \\
\end{algorithmic}
\end{algorithm}


% \begin{algorithm}[t]
%     \caption{\textsc{Experimental Design}}
%   \label{alg:experiment}
% \begin{algorithmic}[1]
%     % \SetCommentSty{itshape}
% % \SetKwComment{Comment}{$\triangleright$ }{}
%   \footnotesize
%   \REQUIRE{Model $M_{1}$, Acquisition Method $A$, Target sets ($D^{T}_{train}$, $D^{T}_{val}$, $D^{T}_{test}$), Source sets $D^{j}_{source}\sim Q_j$ Sample Size $n$}
%   \ENSURE{Accuracy $s$ of each acquisition method on each target test set \{($A$, $D^T$) $ \rightarrow s^T_A$\}} \\
%   \STATE $|D^{T}_{train}|$ $\gets$ $2,000$
% %   \STATE $D_{train}$ $\gets$ {sample(shuffle($D$), $N$)}
  
%   \FOR{each Acquisition Method $A$}
%   \FOR{each Target set $T$}
%   \STATE // \textit{Train $M_1$ on $D^T_{train}$, with $D^T_{val}$ validation}\\
%   \STATE $M_1 \leftarrow $ \textsc{Train}($M_1$, $D^T_{train}$, $D^T_{val}$)\\
  
% %   \STATE $M_{\alpha} \leftarrow $ $M.$\textsc{Use}($H_{\alpha}$) \\ \label{alg:apply-hyp}
  
%   \STATE // \textit{Use $A$ to select $n$ unlabelled examples $E$ from $D_{source}$.}
%   \STATE $E \leftarrow $ \textsc{A}($M_1$, $D_{source}$)\\
  
%   \STATE // \textit{Select best new model $M_2$ tuned on $E$}
%   \STATE $M_2 \leftarrow $ \textsc{GridSearch}($(D^T_{train},E)$, $D^T_{val}$)\\
%   \STATE $($A$, $D^T$):=s^T_A \leftarrow $ $M_2(D^T_{test})$ \\
%   \ENDFOR
%   \ENDFOR

%   \RETURN Scores Dict $($A$, $D^T$) \rightarrow s^T_A$ \\
% \end{algorithmic}
% \end{algorithm}