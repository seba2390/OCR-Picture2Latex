
\subsection{Metadata for Strong Transactions} \label{ss:metadata-strong}

\begin{applemma} \label{lemma:knownvc-strong-nondecreasing}
  For any replica $p^{m}_{d}$ in any data center $d$,
  $\knownVC^{m}_{d}[\strongentry]$ is non-decreasing.
\end{applemma}

\begin{proof} \label{proof:knownvc-strong-nondecreasing}
  By \ref{tcs-requirement:deliver-order}
  and line~\code{\ref{alg:unistore-strong-commit}}{\ref{line:deliverupdates-foreach-wbuff}}.
\end{proof}

\begin{applemma} \label{lemma:stablevc-strong-nondecreasing}
  For any replica $p^{m}_{d}$ in any data center $d$,
  $\stableVC^{m}_{d}[\strongentry]$ is non-decreasing.
\end{applemma}

\begin{proof} \label{proof:stablevc-strong-nondecreasing}
  By Lemma~\ref{lemma:knownvc-strong-nondecreasing},
  Assumption~\ref{assumption:message},
  and line~\code{\ref{alg:unistore-clock}}{\ref{line:knownvclocal-stablevc-strong}}.
\end{proof}

\begin{applemma}[\prop{6}] \label{lemma:knownvc-strong}
  Let $\tvar \in \strongtxs$ be a strong transaction
  that originates at data center $i$
  and accesses partition $m$.
  If
  \[
    \commitVC(\tvar)[\strongentry] \le \knownVC^{m}_{d}[\strongentry]
  \]
  for some replica $p^{m}_{d}$ in data center $d$,
  then
  \[
    \log(\tvar)[m] \subseteq \oplog^{m}_{d}.
  \]
\end{applemma}

\begin{proof} \label{proof:knownvc-strong}
  Note that $\knownVC^{m}_{d}[\strongentry]$ can be updated
  only at line~\code{\ref{alg:unistore-strong-commit}}{\ref{line:deliverupdates-knownvc-strongentry}}.
  By \ref{tcs-requirement:deliver-order},
  all committed strong transactions with strong timestamps
  less than or equal to $\knownVC^{m}_{d}[\strongentry]$
  have been delivered to $p^{m}_{d}$.
  By line~\code{\ref{alg:unistore-strong-commit}}{\ref{line:deliverupdates-oplog}},
  \[
    \log(\tvar)[m] \subseteq \oplog^{m}_{d}.
  \]
\end{proof}
