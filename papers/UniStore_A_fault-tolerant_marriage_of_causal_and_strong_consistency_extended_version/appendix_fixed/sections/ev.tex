
\subsection{Eventual Visibility} \label{ss:ev}

\begin{apptheorem} \label{thm:ev}
  \[
    A \models \ev.
  \]
\end{apptheorem}

\begin{proof} \label{proof:ev}
  Consider a transaction $\tvar \in \txs$ such that
  \begin{align*}
    \dc(\tvar) \in \C \lor (\exists \fencerange \in \Fence.\; \tvar \rel{\vis} \fencerange)
    \lor \tvar \in \strongtxs.
  \end{align*}
  By Lemma~\ref{lemma:so-vis},
  it suffices to show that for any client $\cl$,
  \[
    \Big\lvert \txs|_{\cl} \Big\rvert = \infty
      \implies \exists \tvar' \in \txs|_{\cl}.\; \tvar \rel{\vis} \tvar'.
  \]
  By Lemmas~\ref{lemma:uniformity-correct-dc},
  \ref{lemma:uniformity-causal-fence}, \ref{lemma:uniformity-strong},
  and \ref{lemma:uniformity-strongtx-i},
  there exists some time $\realtime$ such that
  \begin{align}
    &\forall \cdrange \in \C.\; \forall n \in \P. \nonumber\\
      &\quad (\forall i \in \D.\; \timestamp(\tvar)[i]
        \le \uniformVC^{n}_{\cdrange}(\realtime)[i])
      \;\land \nonumber\\
      &\quad\;\; \timestamp(\tvar)[\strongentry]
        \le \stableVC^{n}_{\cdrange}(\realtime)[\strongentry].
    \label{eqn:time-t}
  \end{align}
  Since $\Big\lvert \txs|_{\cl} \Big\rvert = \infty$,
  there exists some correct data center $d \in \C$
  to which $\cl$ issues an infinite number of transactions.
  Let $\tvar' \in \txs$ be the first transaction
  issued by client $\cl$ to data center $d$
  which starts after time $\realtime$ such that
  \[
    \lclock(\tvar) < \lclock(\tvar').
  \]
  Thus, by Definition~\ref{def:lco} of $\lcorder$,
  \[
    \tvar \rel{\lcorder} \tvar'.
  \]
  Let $m \triangleq \coord(\tvar')$.
  Since $d$ is correct, by (\ref{eqn:time-t}),
  \begin{align*}
    &(\forall i \in \D.\; \timestamp(\tvar)[i] \le \uniformVC^{m}_{d}(\realtime)[i])
    \;\land \\
    &\;\;\timestamp(\tvar)[\strongentry] \le \stableVC^{m}_{d}(\realtime)[\strongentry].
  \end{align*}
  By Lemma~\ref{lemma:uniformvc-nondecreasing},
  \[
    \forall i \in \D.\;
      \uniformVC^{m}_{d}(\realtime)[i] \le (\uniformVC^{m}_{d})_{\startoftx(\tvar')}[i].
  \]
  By Lemma~\ref{lemma:stablevc-strong-nondecreasing},
  \[
    \stableVC^{m}_{d}(\realtime)[\strongentry] \le
      (\stableVC^{m}_{d})_{\startoftx(\tvar')}[\strongentry].
  \]
  By Lemma~\ref{lemma:ts-start},
  \begin{gather*}
    (\forall i \in \D.\; (\uniformVC^{m}_{d})_{\startoftx(\tvar')}[i]
      \le \timestamp(\startoftx(\tvar'))[i])
    \;\land \\
    (\stableVC^{m}_{d})_{\startoftx(\tvar')}[\strongentry]
      \le \timestamp(\startoftx(\tvar'))[\strongentry].
  \end{gather*}
  Putting it together yields
  \[
    \timestamp(\tvar) \le \timestamp(\startoftx(\tvar')).
  \]
  By Definition~\ref{def:vis-tx} of $\vis$,
  \[
    \tvar \rel{\vis} \tvar'.
  \]
\end{proof}
