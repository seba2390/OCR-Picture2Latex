
\newcommand{\set}[1]{\{#1\}}
\DeclareMathOperator*{\argmin}{argmin}

\newcommand{\hStatex}{\vspace{4pt}}

\newcommand{\causalentry}{\textsl{causal}}
\newcommand{\strongentry}{\textsl{strong}}

\newcommand{\IfThenElse}[3]{
  \State \algorithmicif\ #1\ \algorithmicthen\ #2\ \algorithmicelse\ #3}

\newcommand{\redcolor}[1]{\textcolor{red}{#1}}
\newcommand{\bluecolor}[1]{\textcolor{blue}{#1}}
\newcommand{\teal}[1]{\textcolor{teal}{#1}}
\newcommand{\cyan}[1]{\textcolor{cyan}{#1}}
\newcommand{\purple}[1]{\textcolor{purple}{#1}}

\newcommand{\lccolor}[1]{\bluecolor{#1}}
\newcommand{\tscolor}[1]{\purple{#1}}
\newcommand{\strongcolor}[1]{\redcolor{#1}}
\newcommand{\versioncolor}[1]{\cyan{#1}}

\newcommand{\unistore}{\textsc{UniStore}}
\newcommand{\code}[2]{#1:#2}

\newcommand{\pastVC}{{\sf pastVec}}
\newcommand{\ok}{\mathrm{ok}}

\newcommand{\var}{{\bf var}\;}
\newcommand{\pre}{{\bf pre:}\;}
\newcommand{\rpc}{{\bf remote\; call}\;}
\newcommand{\at}{\;{\bf at}\;}
\newcommand{\send}{{\bf send}\;}
\newcommand{\sendto}{\;{\bf to}\;}
\newcommand{\from}{\;{\bf from}\;}
\newcommand{\repeatkw}{{\bf repeat}\;}
\newcommand{\notkw}{{\bf not}\;}
\newcommand{\timeout}{{\bf timeout}\;}
\newcommand{\wait}{{\bf wait}\;}
\newcommand{\asyncwait}{{\bf async wait}\;}
\newcommand{\until}{{\bf until}\;}
\newcommand{\receive}{{\bf receive}\;}
\newcommand{\received}{{\bf received}\;}
\newcommand{\upon}{{\bf upon}\;}
\newcommand{\upcall}{{\bf upcall}\;}
\newcommand{\prop}[1]{\textbf{\textsc{Property #1}}}

\newcommand{\N}{\mathbb{N}}
\newcommand{\D}{\mathcal{D}}
\newcommand{\C}{\mathcal{C}}
\newcommand{\OP}{O}
\newcommand{\cdrange}{c} %
\renewcommand{\P}{\mathcal{P}}
\newcommand{\opfunc}{\textsl{op}}

\newcommand{\p}{\mathit{p}}
\newcommand{\decvar}{\mathit{dec}}
\newcommand{\clientdc}{{\sf d}}
\newcommand{\cldc}{\textsl{cur\_dc}}
\newcommand{\clientcoord}{{\sf p}}
\newcommand{\starttx}{\textsc{start\_tx}}
\newcommand{\start}{\textsc{start}}
\renewcommand{\read}{\textsc{read}}
\newcommand{\updateproc}{\textsc{update}}
\newcommand{\commit}{\textsc{commit}}
\newcommand{\commitcausaltx}{\textsc{commit\_causal\_tx}}
\newcommand{\commitstrongtx}{\textsc{commit\_strong\_tx}}
\newcommand{\abort}{\textsc{abort}}
\newcommand{\commitcausal}{\textsc{commit\_causal}}
\newcommand{\commitstrong}{\textsc{commit\_strong}}

\newcommand{\vc}{V}
\newcommand{\vcvar}{\mathit{vc}}
\newcommand{\generatetid}{\texttt{generate\_tid}}
\newcommand{\partitionofproc}{\mathtt{partition}}
\newcommand{\doop}{\textsc{do\_op}}
\newcommand{\doread}{\textsc{do\_read}}
\newcommand{\doupdate}{\textsc{do\_update}}

\newcommand{\find}{\texttt{find}}
\newcommand{\readkey}{\textsc{get\_version}}
\newcommand{\getversion}{\textsc{get\_version}}
\newcommand{\versionproc}{\textsc{version}}
\newcommand{\prepare}{\textsc{prepare}}
\newcommand{\prepareack}{\textsc{prepare\_ack}}

\newcommand{\heartbeat}{\textsc{heartbeat}}
\newcommand{\replicate}{\textsc{replicate}}
\newcommand{\propagate}{\textsc{propagate\_local\_txs}}
\newcommand{\forward}{\textsc{forward\_remote\_txs}}

\newcommand{\bcast}{\textsc{broadcast\_vecs}}
\newcommand{\knownvclocal}{\textsc{knownvec\_local}}
\newcommand{\stablevcproc}{\textsc{stablevec}}
\newcommand{\knownvcglobal}{\textsc{knownvec\_global}}

\renewcommand{\log}{\textsl{log}}
\newcommand{\oplog}{{\sf opLog}}
\newcommand{\txlog}{{\sf txLog}}
\newcommand{\ep}{{\sf ep}}
\newcommand{\shards}{{\sf shards}}

\newcommand{\events}{\textsl{events}}
\newcommand{\ws}{\textsl{ws}}
\newcommand{\rs}{\textsl{rs}}
\newcommand{\rsvar}{\mathit{rs}}
\newcommand{\key}{\textsl{key}}
\newcommand{\client}{\textsl{client}}
\newcommand{\clients}{\mathbb{C}}
\newcommand{\dc}{\textsl{dc}}
\newcommand{\coord}{\textsl{coord}}
\newcommand{\startoftx}{\textsl{st}}
\newcommand{\commitoftx}{\textsl{ct}}
\newcommand{\partitionsfunc}{\textsl{partitions}}
\newcommand{\snapshotVC}{\textsl{snapshotVec}}
\newcommand{\snapshotproc}{\texttt{snapshot}}
\newcommand{\commitVC}{\textsl{commitVec}}
\newcommand{\prepareVC}{\textsl{prepareVec}}
\newcommand{\certfunc}{F}
\newcommand{\fdec}{\certfunc_{\rm dec}}
\newcommand{\fvec}{\certfunc_{\rm vec}}
\newcommand{\flc}{\certfunc_{\rm lc}}

\newcommand{\ud}{\textsl{ud}} %
\newcommand{\W}{W}
\newcommand{\R}{R}
\newcommand{\payload}{W}

\newcommand{\txs}{T}
\newcommand{\txsvar}{\mathit{txs}}
\newcommand{\txsincertify}{T_{c}}
\newcommand{\causaltxs}{\txs_{\causalentry}}
\newcommand{\strongtxs}{\txs_{\strongentry}}
\newcommand{\allstrongtxs}{\txs_{\textsl{all-strong}}}

\newcommand{\conflict}{\bowtie}

\newcommand{\intcertify}{{\sf certify}}
\newcommand{\intdecide}{{\sf decide}}
\newcommand{\intdeliver}{{\sf deliver}}
\newcommand{\intdeliverinv}{{\sf deliver\_inv}}
\newcommand{\intdeliverresp}{{\sf deliver\_resp}}
\newcommand{\act}{{\sf act}}
\newcommand{\actvar}{\mathit{act}}
\newcommand{\complete}{\mathit{complete}}
\newcommand{\lccertify}{C}

\newcommand{\Decision}{\mathbb{D}}
\newcommand{\Vector}{\mathbb{V}}
\newcommand{\Key}{\mathit{Key}}
\newcommand{\Val}{\mathit{Val}}

\newcommand{\certify}{\textsc{certify}}
\newcommand{\preparestrong}{\textsc{prepare\_strong}}
\newcommand{\heartbeatstrong}{\textsc{heartbeat\_strong}}
\newcommand{\alreadydecided}{\textsc{already\_decided}}
\newcommand{\acceptack}{\textsc{accept\_ack}}
\newcommand{\replicas}{\textsc{replicas}}
\newcommand{\leaderproc}{\textsc{leader}}
\newcommand{\leaderof}{{\sf leader}}
\newcommand{\decision}{\textsc{decision}}
\newcommand{\decisionvar}{\mathit{decision}}
\newcommand{\learndecision}{\textsc{learn\_decision}}
\newcommand{\follower}{\textsc{follower}}
\newcommand{\certification}{\textsc{certification\_check}}
\newcommand{\deliver}{\textsc{deliver}}
\newcommand{\deliverupdates}{\textsc{deliver\_updates}}
\newcommand{\newleader}{\textsc{new\_leader}}
\newcommand{\newleaderack}{\textsc{new\_leader\_ack}}
\newcommand{\newstate}{\textsc{new\_state}}
\newcommand{\newstateack}{\textsc{new\_state\_ack}}
\newcommand{\retry}{\textsc{retry}}

\newcommand{\votevar}{\mathit{vote}}
\renewcommand{\leaders}{\mathit{leaders}}

\newcommand{\reqIdVar}{\mathit{rid}}
\newcommand{\generateReqId}{\texttt{generate\_req\_id}}
\newcommand{\trustedVar}{{\sf trusted}}
\newcommand{\recover}{\textsc{recover}}
\newcommand{\nack}{\textsc{nack}}
\newcommand{\normalMode}{\textsc{normal}}
\newcommand{\recovering}{\textsc{recovering}}
\newcommand{\restoring}{\textsc{restoring}}
\newcommand{\doNotWaitFor}{{\sf doNotWaitFor}}
\newcommand{\unknownTx}{\textsc{unknown\_tx}}
\newcommand{\unknowntxAck}{\textsc{unknown\_tx\_ack}}
\newcommand{\unknowntx}{\textsc{unknown}}
\newcommand{\callerMode}{\mathit{callerMode}}
\newcommand{\senderMode}{\mathit{senderMode}}

\newcommand{\dvar}{\mathit{d}}
\newcommand{\mvar}{\mathit{m}}
\newcommand{\nvar}{\mathit{n}}
\newcommand{\pvar}{\mathit{p}}
\newcommand{\lvar}{\mathit{l}}
\newcommand{\cl}{\mathit{cl}}
\newcommand{\preparevc}{\mathit{prepareVec}}
\newcommand{\snapvc}{\mathit{snapVec}}
\newcommand{\commitvc}{\mathit{commitVec}}
\newcommand{\knownvc}{\mathit{knownVec}}
\newcommand{\stablevc}{\mathit{stableVec}}
\newcommand{\preparedstrongvar}{\mathit{preparedStrong}}
\newcommand{\decidedstrongvar}{\mathit{decidedStrong}}

\newcommand{\knownVC}{{\sf knownVec}}
\newcommand{\stableVC}{{\sf stableVec}}
\newcommand{\snapVC}{{\sf snapVec}}
\newcommand{\uniformVC}{{\sf uniformVec}}
\newcommand{\localmatrix}{{\sf localMatrix}}
\newcommand{\globalmatrix}{{\sf globalMatrix}}
\newcommand{\stablematrix}{{\sf stableMatrix}}

\newcommand{\realtime}{\tau}
\newcommand{\txfunc}{\textsl{tx}}
\newcommand{\txvar}{\mathit{tx}}
\newcommand{\tidselector}{\textsl{tid}}
\newcommand{\tidvar}{\mathit{tid}}
\newcommand{\tids}{{\sf TID}}
\newcommand{\tvar}{\mathit{t}}
\newcommand{\ctid}{{\sf tid}} %
\newcommand{\rset}{{\sf rset}}
\newcommand{\rsetvar}{\mathit{rset}}
\newcommand{\wbuff}{{\sf wbuff}}
\newcommand{\wbuffvar}{\mathit{wbuff}}
\newcommand{\clockVar}{{\sf clock}}
\newcommand{\statusVar}{{\sf status}}
\newcommand{\committedVar}{{\sf committed}}
\newcommand{\committedcausal}{{\sf committedCausal}}
\newcommand{\preparedcausal}{{\sf preparedCausal}}
\newcommand{\preparedstrong}{{\sf preparedStrong}}
\newcommand{\decidedstrong}{{\sf decidedStrong}}
\newcommand{\accept}{\textsc{accept}}
\newcommand{\ballotVar}{{\sf ballot}}
\newcommand{\ballotvar}{\mathit{b}}
\newcommand{\cballot}{{\sf cballot}}
\newcommand{\cballotvar}{\mathit{cballot}}
\newcommand{\lastdeliveredVar}{{\sf lastDelivered}}

\newcommand{\Fence}{Q}
\newcommand{\fencerange}{q}
\newcommand{\fence}{\textsc{cl\_uniform\_barrier}}
\newcommand{\uniformbarrier}{\textsc{uniform\_barrier}}

\newcommand{\Attach}{A}
\newcommand{\attachrange}{a}
\newcommand{\clattach}{\textsc{cl\_attach}}
\newcommand{\attach}{\textsc{attach}}

\newcommand{\maxPrep}{\mathit{maxPrep}}
\newcommand{\maxDec}{\mathit{maxDec}}

\newcommand{\intread}{R_{\textsc{int}}}
\newcommand{\extread}{R_{\textsc{ext}}}
\newcommand{\rocommit}{C_{\textsc{ro}}}
\newcommand{\updatecommit}{C_{\textsc{rw}}}

\newcommand{\tsfunc}{\textsl{ts}}
\newcommand{\tsvar}{\mathit{ts}}
\newcommand{\lc}{{\sf lc}}
\newcommand{\lcvar}{\mathit{lc}}
\newcommand{\lclock}{\textsl{lclock}}
\newcommand{\lcorder}{\textsl{lc}}
\newcommand{\timestamp}{\textsl{ts}}

\newcommand{\eo}{\textsl{eo}}
\newcommand{\eok}{\textsl{eo}_{k}}
\newcommand{\po}{\textsl{po}}
\newcommand{\so}{\textsl{so}}
\newcommand{\vis}{\textsl{vis}}
\newcommand{\ar}{\textsl{ar}}
\newcommand{\rel}[1]{\xrightarrow{#1}} %
\newcommand{\relation}{\mathcal{R}}

\newcommand{\txevents}{s}
\newcommand{\txnevents}{Y}

\newcommand{\rval}{\textsl{rval}}
\newcommand{\uval}{\textsl{uval}}

\newcommand{\retval}{\textsc{RVal}}
\newcommand{\intretval}{\textsc{IntRVal}}
\newcommand{\extretval}{\textsc{ExtRVal}}
\newcommand{\cc}{\textsc{CausalConsistency}}
\newcommand{\cv}{\textsc{CausalVisibility}}
\newcommand{\ca}{\textsc{CausalArbitration}}
\newcommand{\ev}{\textsc{EventualVisibility}}
\newcommand{\por}{\textsc{PoR}}
\newcommand{\conflictaxiom}{\textsc{ConflictOrdering}}