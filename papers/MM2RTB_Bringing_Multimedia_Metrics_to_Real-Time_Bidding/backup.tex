\begin{table}[t]
\small
\centering
\caption{Summary of key notations.}
\label{tab:notations}
\vspace{-7pt}
\begin{tabular}{r|p{2.75in}}
\hspace{-20pt} Notation \hspace{-5pt} & Description\\
\hline
$W$ & Set of webpages of the publisher\\
$A_w$  & Set of ad slots on webpage $w \in W$\\
%$A_w$  & Set of auctions for a user's visit at webpage $w \in W$\\
$N_{a,w}$   & Set of advertisers in the auction for ad slot $a \in A_w$\\
$K$     & Set of metric variables in the trade-offs optimization, $|K| = 6$\\
$b_{i,a,w}$ & Bid price of advertiser $i$ in the auction for slot $a$, $i \in N_{a,w}$\\
$b_{(i),a,w}$ & $i$th highest bid in auction $a$, $i \in N_{a,w}$\\
$y_{i,j,a,w}$ & Probability that advertiser $i$ is allocated to slot $j$ in auction $z$\\
$p_{i,z}(b_z)$ & Payment of advertiser $i$ in auction $z$, $b_z=(b_{1,z}, \cdots, b_{n_z,z})$\\
$\omega_k$ & Weight of variable $k$ in the re-ranking, $k \in K$\\
$x_{k,*,z}$ & Value of variable $k$ for the selected advertiser in auction $z$ by our proposed model\\
$x_{k,\neg,z}$ & Value of variable $k$ for the selected advertiser in auction $z$ by the SP auction (the ground truth)\\
$\xi_{k,Z}$ & Average change of value for variable $k$ of auctions in set $Z$\\
$\theta_k$ & Threshold for the change of value for variable $k$\\
$rs_{i,z}$ & Rank score of advertiser $i$ in auction $z$\\
$rs_{*,z}$ & Rank score of the selected advertiser in auction $z$ by our proposed model\\
$rs_{\neg,z}$ & Rank score of the selected advertiser in auction $z$ by the SP auction (the ground truth)\\
\end{tabular}
\end{table}



\begin{table}[t]
\footnotesize
\centering
\caption{Multimedia datasets. The crawler type I collect webpages as many as possible from a seed URL and the crawler type II repeatedly accesses to a set of particular webpages. }
\label{tab:multimedia_datasets}
\vspace{-7pt}
\begin{tabular}{r|r|r|r|r|r}
\hline
\multicolumn{2}{r|}{Platform} & Yahoo & Yahoo & MSN & MSN \\
\hline
\multicolumn{2}{r|}{Crawler type} & I & II & I & II \\
\multicolumn{2}{r|}{From} & \hspace*{-2pt} 20 Jan 2017 & \hspace*{-2pt} 20 Jan 2017 & \hspace*{-2pt}  20 Jan 2017 & \hspace*{-2pt}  20 Jan 2017\\
\multicolumn{2}{r|}{To}   & \hspace*{-2pt} 30 Jan 2017 & \hspace*{-2pt} 30 Jan 2017 & \hspace*{-2pt} 30 Jan 2017 & \hspace*{-2pt} 30 Jan 2017\\
\multicolumn{2}{r|}{Location} & Singapore & Singapore & Singapore & Singapore\\
\multicolumn{2}{r|}{\# of webpages} & & & &\\ 
\multicolumn{1}{r}{}  & with 1 slot  & 1481 & 1909 & 798 & 686\\
\multicolumn{1}{r}{}  & with 2 slots & 1978 & 3510 & 1519 & 3689\\
\multicolumn{1}{r}{}  & with 3 slots & 1173 & 4329 & 3633 & 146\\
\multicolumn{1}{r}{}  & with $\geq 4$ slots & 1599 & 2468 & 41 & 241\\
\multicolumn{2}{r|}{\# of total impressions} & 15836 & 31951 & 14899 & 9466\\
\multicolumn{2}{r|}{\# of unique advertisers} & 692 & 631 & 160 & 163\\
\hline
\end{tabular}
\vspace{10pt}
\caption{Ad auction datasets.}
\vspace{-7pt}
\label{tab:auc_datasets}
\begin{tabular}{r|r|r}
\hline
Dataset & SSP & Microsoft\\ 
\hline
Ad type    & Display  & Search\\
Ad auction & SP (RTB) & GSP   \\
Market  & UK & US\\

[From, To]  & [08 Jan 2013, 14 Feb 2013] & [26 Dec 2011, 03 Mar 2012]\\
\# of ad slots      & 31 & 4,376      \\
\# of user tags     & NA & NA        \\
\# of publishers    & NA & 1 \\
\# of bidders       & 374      & NA\\ 
\# of auctions      & 6,646,643  & 35,550\\ 
\# of bids          & 33,043,127 & NA\\
Bid quote               & GBP/CPM  & GBP/CPC\\
Bids of each auction & $\surd$ & NA\\
Winning bid          & $\surd$ & $\surd$\\
Winning payment      & $\surd$ & $\surd$\\
Estimated CTR        & NA      & $\surd$\\
\hline
\end{tabular}
\vspace{10pt}
\caption{Summary of CTRs in the Microsoft dataset.}
\label{tab:microsoft_dataset}
\vspace{-7pt}
\begin{tabular}{r|r|r|r|r}
\hline
Position & Minimum of CTR & Maximum of CTR & Mean of CTR & Std. of CTR \\
\hline
1  &     0.00\textperthousand  & 333.30\textperthousand  &   13.97\textperthousand & 28.49\textperthousand  \\
2  &     0.00\textperthousand  & 200.00\textperthousand  &   7.97\textperthousand  & 15.30\textperthousand  \\
3  &     0.00\textperthousand  & 750.00\textperthousand  &   5.66\textperthousand  &  12.47\textperthousand \\
4  &     0.00\textperthousand  & 90.90\textperthousand   &   4.53\textperthousand  &  9.68\textperthousand  \\
5  &     0.00\textperthousand  & 76.90\textperthousand   &   1.53\textperthousand  &  3.58\textperthousand  \\
6  &     0.00\textperthousand  & 333.30\textperthousand  &   1.11\textperthousand  &  3.62\textperthousand  \\
7  &     0.00\textperthousand  & 1000.00\textperthousand &   0.68\textperthousand  &  5.73\textperthousand  \\
8  &     0.00\textperthousand  & 108.10\textperthousand  &   0.51\textperthousand  &  1.65\textperthousand  \\
\hline
\end{tabular}
\end{table}

\begin{algorithmic}[0]
\State \textbf{Step 1: Sampling an auction in RTB:}\\ 
We randomly sample an auction from the SSP dataset. The auction contains a set of advertisers and their bids. 

\State \textbf{Step 2: Creating the ground truth data}\\
Since the given webpage has an ad displayed when it is web crawled. This original ad is considered as the ground truth. 

\State \textbf{Step 3: Sampling candidate ads:}\\ 
Let $n$ denote the number of advertisers in the sampled auction in Step 1. We then randomly sample $n-1$ ads from the same multimedia dataset of the webpage. To ensure the uniqueness of each ad in the auction, we exclude the original ad when we sample $n-1$ ads from the multimedia dataset. 

\State \textbf{Step 4: Matching ads and bids:}\\ We match the $n$ bids with $n$ ads. Since the original ad is displayed, we consider it belongs to the winning advertiser in the auction and match it with the highest bid. The rest $n-1$ ads and $n-1$ bids are then randomly matched. 

\State \textbf{Step 5: Simulating CTRs:}\\ For each ad, we generate its CTR from a uniform distribution in the range of 0 and 13.97\textperthousand $+$ 1.96 $\times$ 28.49\textperthousand. This is based on the mean and std. of CTRs in the first position in the Microsoft dataset, as also shown in Table~\ref{tab:microsoft_dataset}.
\end{algorithmic}

% \begin{table*}[tp]
% \small
% \centering
% \caption{Specifications of metric variables for Stage II.}
% \label{tab:second_stage_var_spec}	
% \vspace{-7pt}
% \begin{tabular}{l|l|l|l|l}
% \hline
% \multirow{2}{*}{Variable}   & \multicolumn{3}{c|}{Computation} & \multirow{2}{*}{Input for Stage II}\\
% \cline{2-4}
%           & Method & Input & Output         & \\
% \hline
% Publisher's revenue    & Stage I       & Bid & Payment & $x_{1,i,z} = $ normalized $p_{i,z}$\\
% Advertiser's utility    & Stage I      & Bid, payment & Utility    & $x_{2,i,z} = $ normalized $(v_{i,z} - p_{i,z})$\\
% Ad memorability & MemNet~\cite{khosla2015understanding} & Ad image & Memorability score & $x_{3,i,z} = $ normalized score\\
% Ad CTR    & Given by data         & CTR &  CTR & $x_{4,i,z} = $ normalized CTR\\
% Contextual relevance & TakeLab~\cite{vsaric2012takelab} & Title, keywords, description & Semantic similarity score & $x_{5,i,z} = $ normalized score\\
% Ad saliency & MBS~\cite{zhang2015minimum} & Web page snapshot, ad image & Saliency map and ratio & $x_{6,i,z} = $ normalized ratio \\
% \hline 
% \end{tabular}
% \end{table*}
