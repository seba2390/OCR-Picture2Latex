\newcommand{\automatacloudother}[2][.44]{%
	\begin{scope}[#2]
		\node [rectangle,draw,thick,text width=8.1cm,minimum height=7.6cm,
		text centered,rounded corners, fill=white, name = re] {};
\end{scope}}    


\newcommand{\innerstateloop}{
\begin{scope}
  \node[state] (s1) at (0,0) {}; \node (s1label) at (0.5,-.1) {$\in Q$};
  \node[state] (s11) at (-0.5,0.6) {};  \node (s11label) at (0.32,0.6) {$\in Q_{p_2-1}$};
  %\node[state] (s14) at ( 0.5,0.6);
  \node (s12) at (-0.25,1.2) {};
  \node (s13) at ( 0.25,1.2) {};
  \path[->] (s1)  edge [bend left] node [left] {$b$} (s11);
%  \path[->] (s14) edge [bend left] node [right] {$b$} (s1);
   \path[->] (s11) edge [bend left] node [left] {$b$} (s12);
%   \path[->] (s13) edge [bend left] node [right] {$b$} (s14);
  \draw[dashed] (-0.25,1.2) -- (0.25,1.2);
\end{scope}
}

\begin{figure}[htb]
     \centering
    \scalebox{.65}{    
 \begin{tikzpicture}
 \tikzset{every state/.style={minimum size=1pt},>=stealth'}
 \node (cloud) at (0,0) {\tikz \automatacloudother{fill=gray!0,thick};};
 
  \node (reset1) at (0,3) {};
  \node (reset2) at (-10,2.5) {};
  \path[->] (reset1) edge [bend right] node [above] {$a$} (reset2);
  
  \node (reset3) at (0,-3) {};
  \node (reset4) at (-10,-2.5) {};
  \path[->] (reset3) edge [bend left] node [below] {$a$} (reset4);
  
  \node (reset5) at (-5.4,2.8) {};
  \node (reset6) at (-10,2.5) {};
  \path[->] (reset5) edge [bend right] node [above,pos=.3] {$a$} (reset6);
  
  \node (reset7) at (-5.4,-2.8) {};
  \node (reset8) at (-10,-2.5) {};
  \path[->] (reset7) edge [bend left] node [below,pos=.3] {$a$} (reset8);
  
 
  %\draw (-3,0) ellipse (1.1cm and 3.1cm);
  %\draw (-5.5,0) ellipse (1.1cm and 3.1cm);
  %\draw (-10,0) ellipse (1.1cm and 3.1cm);
  \draw[rounded corners] (-4.1,-3) rectangle (-1.7, 3) {};
  \draw[rounded corners] (-6.3,-3) rectangle (-4.8, 3) {};
  \draw[rounded corners] (-10.5,-3) rectangle (-9, 3) {};
    
  %\draw (3,0) ellipse (1cm and 3cm);
  \draw[rounded corners] (1.7,-3) rectangle (4.1, 3) {};
  
  \node[state] (t) at (7,0) {$t$};
  
  \node at (3,3.4) {{\LARGE $T$}};
  \node at (-3,3.4) {{\LARGE $S$}};
  \node at (-10,3.5) {{\LARGE $S_{r_2}$}};
  \node at (-5.5,3.5) {{\LARGE $S_{1}$}};
  \node at (0.1,4.1) {{\LARGE Original $\mathcal A$ (altered)}};
   % (altered for new alphabet)
  
  \node (s1) at (-.5,2) {\tikz \innerstateloop;};
  \node (s2) at (.5,-1.5) {\tikz \innerstateloop;};
  %\node (s2) at (-1.2,-2) {\tikz \innerstateloop;};
  
  \node (sT1) at (3,1.9) {\tikz \innerstateloop;}; \node (sT1copy) at (3,1.5) {};
  \node (sT2) at (2.8,0.4) {\tikz \innerstateloop;}; \node (sT2copy) at (2.8,0) {};
  \node (sT3) at (3.1,-1.5) {\tikz \innerstateloop;}; \node (sT3copy) at (3.15,-2) {};
  
  \node (sS1) at (-3,1.7) {\tikz \innerstateloop;}; \node (sS1copy) at (-2.95,1.15) {};
  \node (sS2) at (-2.7,0) {\tikz \innerstateloop;}; \node (sS2copy) at (-2.65,-.55) {};
  \node (sS3) at (-3,-1.8) {\tikz \innerstateloop;};\node (sS3copy) at (-3,-2.3) {};
   
  \node[state] (sS11) at (-5.5,1.7) {};
  \node[state] (sS12) at (-5.2,0) {};
  \node[state] (sS13) at (-5.7,-2) {};
  
  \node[state] (sSr1) at (-10,1.7) {};
  \node[state] (sSr2) at (-9.7,0) {};
  \node[state] (sSr3) at (-10.1,-2) {};
  
  \path[->] (t) edge [loop right] node {$\Sigma$} (t);
  
  % nichteinzeichnen, self loop implied
  \path[->] (sT1copy) edge [bend left=35] node [above] {$a$} (t)
            (sT2copy) edge [bend left=10] node [above] {$a$} (t)
            (sT3copy) edge node [above] {$a$} (t);
            
            
  \node (sSr1a) at (-8.5,1.7) {};
  \node (sSr2a) at (-8.2,0) {};
  \node (sSr3a) at (-8.7,-2) {};
  
  \node (sSr1b) at (-7.2,1.7) {};
  \node (sSr2b) at (-6.9,0) {};
  \node (sSr3b) at (-7.4,-2) {};
  
  \path[->] (sSr1) edge node [above,pos=.3] {$b$} (sSr1a);
  \path[->] (sSr2) edge node [above,pos=.27] {$b$} (sSr2a);
  \path[->] (sSr3) edge node [above] {$b$} (sSr3a);
 
  \path[->] (sSr1b) edge node [above,pos=.35] {$b$} (sS11);
  \path[->] (sSr2b) edge node [above] {$b$} (sS12);
  \path[->] (sSr3b) edge node [above] {$b$} (sS13);
  
  \path[->] (sS11) edge [bend right=10] node [above,pos=.38] {$b$} (sS1copy);
  \path[->] (sS12) edge [bend right=10] node [above,pos=.2] {$b$} (sS2copy);
  \path[->] (sS13) edge [bend right=10] node [above,pos=.4] {$b$} (sS3copy);
  
  \draw[dashed] (-8.5,1.7) -- (-7.2,1.7);
  \draw[dashed] (-8.2,0) -- (-6.9,0);
  \draw[dashed] (-8.7,-2) -- (-7.4,-2);
 \end{tikzpicture}}
  \caption{%Schematic illustration of the reduction from the proof of Proposition \ref{prop:stricly_bounded_np_hard}.
   The reduction from the proof sketch sketch of Lemma~\ref{lem:np_hardness}.
   The letter $a$ transfers everything surjectively onto $S_{r_2}$,
   indicated by four large arrows at the top and bottom and labelled 
   by $a$.
   The auxiliary states $Q_1, \ldots, Q_{p_2-1}$, which are meant
   to interpret a sequence $b^{p_2}$ like a single symbol in the original
   automaton, are also only indicated inside of $\mathcal A$, but not fully written out.}
  \label{fig:reduction_np_hard}
\end{figure}

