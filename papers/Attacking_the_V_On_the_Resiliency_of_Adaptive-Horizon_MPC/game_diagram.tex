	\begin{tikzpicture}[scale=1, every node/.style={transform shape},auto, node distance=2cm,>=latex', cross/.style={path 
		picture={ 
			\draw[black]
			(path picture bounding box.south east) -- (path picture bounding 
			box.north west) (path picture bounding box.south west) -- (path picture 
			bounding box.north east);
		}}]
		
		%%%%%%%%%%%%%%%% blocks
		\tikzstyle{arrow} = [thick,draw=black,->,>=stealth]
		\tikzstyle{proc} = [rectangle, rounded corners, minimum width=1cm, minimum 
		height=1cm,text centered, draw=black]
		\tikzstyle{output} = [coordinate]
		
		\node (start) [proc, text width=4.2cm] {\textbf{Controller}\\ \scriptsize{$\va(t) = {\it AMPC}\left(f, \xv(t), \vv(t), J\right)$}};
		\node (c1) [proc, text width=4.2cm] at (0,-1.3) {\textbf{Advanced Attacker}\\ \scriptsize{$\vd(t) = {\it AMPC}\left(g, \xv(t), \vv(t), -J\right)$}};
		\node (c2) [proc, text width=5.1cm, minimum height=2.3cm] at (6,-0.65) {\textbf{Flock}\\ \vspace*{0.1cm} \scriptsize{$\vv(t+1) = \vv(t) + \va(t)$}\\ \scriptsize{$\xv(t+1) = \xv(t) + \vv(t+1) + \vd(t)$}};
		\node (c3) [output,right=3.5em of start] {};
		\node (c4) [output,right=3.5em of c1] {};
		\node (c5) [output,right=1em of c2] {};
		\node (c6) [output,below=1em of c1] {};
		\node (c7) [output,left=1em of c1] {};
		\node (c8) [output,left=1em of start] {};
		
		%%%%%%%%%%%%%%%%%%% paths
		\draw[arrow] (start)-- node{\scriptsize{$\va(t)$}} (c3);
		\draw[arrow] (c1)-- node{\scriptsize{$\vd(t)$}} (c4);
		\draw[-,thick] (c2)--(c5) {};
		\draw[-,thick,near end] (c5)|- node{\scriptsize{$\xv(t+1),\vv(t+1)$}} (c6);
		\draw[-,thick] (c6)-|(c7) {};
		\draw[-,thick] (c7)-|(c8) {};
		\draw[arrow] (c7)--(c1) {};
		\draw[arrow] (c8)--(start) {};
		
\end{tikzpicture}