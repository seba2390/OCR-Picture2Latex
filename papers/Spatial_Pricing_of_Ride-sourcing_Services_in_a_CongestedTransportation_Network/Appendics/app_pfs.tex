% jd 2015-05-22 23:30
\section{Proofs.}\label{app:pfs}

\state Proof (Lemma \ref{lem:CDA}).
The proof of Lemma \ref{lem:CDA} is outlined as follows. Since (\ref{obj:lower}) is strictly convex (assuming $t_a(\cdot)$ is a strictly monotone increasing function) and constraints of model (\ref{model:lower}) are linear, Karush-Kuhn-Tucker (KKT) conditions are the sufficient and necessary optimality conditions. One can show that the KKT conditions are equivalent to the Wardrop equilibrium conditions (i.e., travel time in all routes actually used are equal and less than those that would be experienced by a single vehicle on any unused route) and logit model solutions. For details, please refer to \citep{evans1976derivation}.
\eop

\state Proof (Lemma \ref{lem:balance_matches}).
Denote the optimized drivers distribution of model (\ref{model:lower}) as $q_{rs}^{\ast}$. Because of constraint (\ref{cons:q_Q}), the total drivers supply is:
\[\sum_{r\in R}\sum_{s \in S}q_{rs}^{\ast} = \sum_{r\in R}Q_{r} \doteq \bar{Q},\] which is a constant.

Because of constraint (\ref{cons:matches}), $ m_s \leq \sum_{r \in \mathcal{R}} q_{rs}^{\ast}$. Therefore, $\sum_{s \in \mathcal{S}} m_s \leq \sum_{s \in \mathcal{S}}\sum_{r \in \mathcal{R}} q_{rs}^{\ast} = \bar{Q}$.  Denote the optimal value of $m_s$ as $m^{\ast}_s$, we have: 
\begin{equation}
    \sum_{s \in \mathcal{S}}m^{\ast}_s \leq \bar{Q}\label{eq:matches_cap}
\end{equation}

On the other hand, 
\begin{equation}
    \sum_{s \in \mathcal{S}}m^{\ast}_s \geq 0\label{eq:matches_cap_lower}
\end{equation}
The equality in (\ref{eq:matches_cap_lower}) holds if and only if 
\begin{equation}
    \sum_{r\in \mathcal{R}}q_{rs}^{\ast} = D_s - b_s\rho_s, \forall s \in \mathcal{S}\label{eq:balance}
\end{equation}
In other words, we just need to show that $\exists \bm{\rho} \in \reals^{S}$, s.t. (\ref{eq:balance}) holds.

%On the other hand, , $q^{rs}$ is a lower semicontinuous function with respect to $\rho$ and based on (\ref{cons:q_d}),
Define excess supply $ES^s (\bm{\rho}) = \sum_{r \in \mathcal{R}}q_{rs}^{\ast} (\bm{\rho}) - (D_s - b_s \rho_s), \forall s$. For each location $s$, the ride-sourcing supply $\sum_{r \in \mathcal{R}}q_{rs}^{\ast} (\bm{\rho}) \leq \bar{Q}$; the equality holds when all the drivers relocate to location $s$. Therefore, the minimum locational price $\underline{\rho}^s = (D^s-\bar{Q})/b^s$. On the other hand, the minimum ride-sourcing supply is strictly positive. Therefore, the maximum locational price $\bar{\rho}_s = D_s/b_s$. This implies that $\rho_s \in [\underline{\rho}_s, \bar{\rho}_s], \forall s$.

Define a convex compact set $H = \Pi_{s\in \mathcal{S}}[\underline{\rho}_s, \overline{\rho}_s]$. Next, we construt a function $\boldsymbol{\rho}' = h(\boldsymbol{\rho}) = (h_s(\rho_s), \forall s)$, such that:
\[ \rho'_s = h_s(\rho_s) = \rho_s - \frac{(\overline{\rho}_s - \underline{\rho}_s) ES_s(\boldsymbol{\rho})}{\bar{Q}} = \rho_s - \frac{ES_s(\boldsymbol{\rho})}{b_s}, \rho_s \in [\underline{\rho}_s, \overline{\rho}_s] \]


We would like to show that $\rho'_s \in [\underline{\rho}_s, \overline{\rho}_s]$. Firstly, it can be easily seen that $h_k(\underline{\rho}_s) = \underline{\rho}_s - \frac{ES_s(\boldsymbol{\rho})}{b_s} = \underline{\rho}_s - \frac{\sum_{r \in \mathcal{R}}q_{rs}^{\ast} (\bm{\rho}) - (D_s - b_s \underline{\rho}_s)}{b_s} \leq \frac{D_s-\bar{Q}}{b_s}- \frac{0 - \bar{Q}}{b_s}= \overline{\rho}_s $, and $h_k(\overline{\rho}_s) = \overline{\rho}_s - \frac{ES_s(\boldsymbol{\rho})}{b_s} = \overline{\rho}_s - \frac{\sum_{r \in \mathcal{R}}q_{rs}^{\ast} (\bm{\rho}) - (D_s - b_s \overline{\rho}_s)}{b_s} \geq \frac{D_s}{b_s} - \frac{(Q - 0)}{b_s} = \underline{\rho}_s$. Secondly, we only need to show $h_s(\rho_s)$ is a monotone decreasing function. To show that, we take first order derivative of $h_s(\rho_s)$ with respect to $\rho_s$:
\[ \dot{h}_s(\rho_s) = 1 - \frac{1}{b_s}\frac{\partial ES_s(\boldsymbol{\rho})}{\partial\rho_s } = 1 - \frac{1}{b_s}(\frac{\partial \sum_{r \in \mathcal{R}}q_{rs}^{\ast} (\bm{\rho})}{\partial\rho_s } - \frac{\partial(D_s - b_s \rho_s)}{\partial\rho_s })\]


Because $\frac{\partial \sum_{r \in \mathcal{R}}q^{rs\ast} (\bm{\rho})}{\partial\rho^s } \geq 0$, 
\[ \dot{h}_s(\rho^s) \leq 1 - \frac{1}{b^s} (0 + b^s) = 0\]
 
Therefore, we have proved function $h(\cdot)$ is a mapping from $H$ to $H$. 
In addition, because $h(\cdot)$ is monotone and continuous; and $H$ is a convex compact subset of Euclidean space, based on Brouwer's fixed-point theorem, there exists $\boldsymbol{\rho}^{\ast} \in H$, such that $\boldsymbol{\rho}^{\ast} = h(\boldsymbol{\rho}^{\ast})$. Therefore, for any $s$, $\rho_s^{\ast} = \rho_s^{\ast} - \frac{ES_s(\boldsymbol{\rho}^{\ast})}{b^s}$, which leads to $ES_s(\boldsymbol{\rho}^{\ast}) = 0, \forall s$.

To show the uniqueness of $\bm{\rho}^{\ast}$, assuming that there exist $\bm{\rho}^{\ast\ast}$ such that $ES_s(\boldsymbol{\rho}^{\ast\ast}) = 0, \forall s$. Therefore,  $h(\boldsymbol{\rho}^{\ast\ast}) = \boldsymbol{\rho}^{\ast\ast}$, i.e., $\boldsymbol{\rho}^{\ast\ast}$ is another fixed point of $\boldsymbol{\rho}' = h(\boldsymbol{\rho})$. Without lost of generality, assuming ${\rho}_s^{\ast\ast} > {\rho}_s^{\ast}$. Since $h_s(\cdot)$ is monotone decreasing, $\rho_s^{\ast\ast} = h_s(\rho_s^{\ast\ast}) \leq h_s(\rho_s^{\ast}) = \rho_s^{\ast}$, which is a contraction with the assumption that ${\rho}_s^{\ast\ast} > {\rho}_s^{\ast}$.
\eop

\state Proof (Theorem \ref{thm:combine}).
Because problem (\ref{model:combine}), (\ref{model:lower}) and (\ref{model:demand}) are convex optimization, KKT conditions are both necessary and sufficient conditions. It can be shown that the KKT conditions of problem (\ref{model:combine}) are identical to the KKT conditions of problem (\ref{model:lower}), (\ref{model:demand}) and equilibirum constraint (\ref{model:equilibrium_constraints}). Therefore, $\bm{\rho}^{\ast}$ that solves problem (\ref{model:combine}) also soves MOPEC problem (\ref{model:lower}), (\ref{model:demand}) and (\ref{model:equilibrium_constraints}). Based on Lemma \ref{lem:balance_matches},  $\bm{\rho}^{\ast}$ solves original problem (\ref{model:upper}).

\eop


\state Proof (Lemma \ref{lem:mieq}).
On one hand, if $\rho^*$ is a maxinf-point of the Walrasian with $W(\rho^*,\cdot) \geq 0$, 
it follows that for all unit vectors $e^s=(0,\ldots,1,\ldots)$, the $s$-th 
entry is 1, $W(\rho^*,e^s) \geq 0$ which implies ${\rm ES}_s(\rho^*) = 0$. On the other hand, if $\rho^*$ is an equilibrium prices, i.e. ${\rm ES}_s(\rho^*) = 0$, it follows that $W(\rho^*,\cdot) = 0$. Because $W(\rho,\cdot) \leq 0$ for any $\rho$, $\rho^*$ is a maxinf point of the Walrasian.

\eop

