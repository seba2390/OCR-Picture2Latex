\section{FLASHTEXT}
FlashText is an algorithm based on Trie dictionary data structure and inspired by the Aho Corasick Algorithm. The way it works is, first it takes all relevant keywords as input. Using these keywords a trie dictionary is built (As shown in Figure \ref{fig:trie}).

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/trie.png}
    \caption{Trie dictionary with 2 keywords, j2ee and java both mapped to standardised term java.}
    \label{fig:trie}
\end{figure}

\textbf{Start} and \textbf{eot} are both special symbols that define word boundary, as defined in Regex. This trie dictionary is used for searching keywords in string as well as replacing keywords in string.

\subsection{Search with FlashText}

For an input string (document), we iterate over it character by character. When a sequence of characters in the document \textbf{\textit{$\textless$\textbackslash b$\textgreater$word$\textless$\textbackslash b$\textgreater$}} match in the trie dictionary from \textbf{\textit{$\textless$start$\textgreater$word$\textless$eot$\textgreater$}} (\textbf{\textit{Start}} and \textbf{\textit{eot}} both stand for word-boundary), we consider it as a complete match. We add the standardized term corresponding to the matched term into a list of keywords found.


\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/trie_search.png}
    \caption{For input string matched character sequence is shown in Green and unmatched in Red.}
    \label{fig:trie_search}
\end{figure}

\subsection{Replace with FlashText}

For an input string (document), we iterate over it character by character. We create an empty return string and when a sequence of characters in the document \textbf{\textit{$\textless$\textbackslash b$\textgreater$word$\textless$\textbackslash b$\textgreater$}} doesnâ€™t match in the trie dictionary, we copy the original word as it is into the return string. When we do have a match, we add the standardised term instead. Thus the return string is a copy of input string, with only matched terms replaced.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/trie_replace.png}
    \caption{For input string matched character sequence is replaced with standardised name.}
    \label{fig:trie_replace}
\end{figure}

\subsection{FlashText algorithm}
\noindent FlashText algorithm has 3 major parts. We will go over each part separately.
\begin{enumerate}
\item Building the trie dictionary
\item Searching keywords
\item Replacing keywords
\end{enumerate}

\subsubsection{Building the trie dictionary}
To build the trie dictionary, we start with the \textbf{\textit{root}} node which points to an \textit{empty\_dictionary~\footnote{ \texttt{Associative\_array  dictionary data structure: \url{https://en.wikipedia.org/wiki/Associative_array}}}}. This node is used as the start point for all words. We insert a word in the dictionary by inserting the first character to the root node and pointing that to an empty dictionary. The next character from the word, goes as a key in this dictionary, and that again points to an empty dictionary. This process is repeated till we reach the last character in the word. If any character is already present in the dictionary we move to the child dictionary and the next character in the word.
When we reach the end of the word  we insert a special key \textit{\_keyword\_}, to signify end of term (\textbf{\textit{eot}}), and standardized name is stored against this key.

\paragraph*{Input}\hfill\break

\noindent Keyword \textit{w = $c_1$ $c_2$ $c_3$ ... $c_n$} where each \textit{$c_i$} is an input character and \textit{w} is the input keyword.\hfill\break
Standardized name \textit{s} for keyword \textit{w}.
\newpage
\paragraph*{Method}\hfill\break
\lstinputlisting[language=Python, caption=Python code for FlashText Initialization and adding keywords to dictionary., label=code:flashinit]{codes/flashtext_initialize.py}

\paragraph*{Output}
A dictionary will be created which will look like Figure \ref{fig:trie}.

\subsubsection{Searching for keywords}
Once all keywords are added to the trie dictionary, we can find keywords present in an input string.

\paragraph*{Input}\hfill\break

\noindent String \textit{x = $a_1$ $a_2$ $a_3$ ... $a_n$} where each \textit{$a_i$} is an input character and \textit{x} is the input string.

\paragraph*{Method}\hfill\break
\lstinputlisting[language=Python, caption=Python code to get keywords in input string which are present in dictionary., label=code:flashsearch]{codes/flashtext_search.py}

\paragraph*{Output}
A list of standardized names found in the string x, as shown in Figure \ref{fig:trie_search}.


\subsubsection{Replacing keywords}
We can use the same trie dictionary to replace keywords present in an input string with standardized names.

\paragraph*{Input}\hfill\break

\noindent String \textit{x = $a_1$ $a_2$ $a_3$ ... $a_n$} where each \textit{$a_i$} is an input character and \textit{x} is the input string.

\paragraph*{Method}\hfill\break
\lstinputlisting[language=Python, caption=Python code for replacing keywords with standardized names\, from dictionary in input string., label=code:flashreplace]{codes/flashtext_replace.py}

\paragraph*{Output}
A new string with replaced standardized names found in the string x, as shown in Figure \ref{fig:trie_replace}.
