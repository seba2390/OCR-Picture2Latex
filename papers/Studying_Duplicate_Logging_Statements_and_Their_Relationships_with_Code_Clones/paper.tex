\documentclass[10pt,journal,compsoc]{IEEEtran}


\input{setup}


\begin{document}


\title{Studying Duplicate Logging Statements and Their Relationships with Code Clones}
%\title{Studying Duplicate Logging Code Smells and Their Relationships with Code Clones}

\author{Zhenhao~Li,~\IEEEmembership{Student Member,~IEEE,}
        Tse-Hsun~(Peter)~Chen,~\IEEEmembership{Member,~IEEE,}
        Jinqiu~Yang,~\IEEEmembership{Member,~IEEE,}
        and~Weiyi~Shang,~\IEEEmembership{Member,~IEEE}
\IEEEcompsocitemizethanks{\IEEEcompsocthanksitem Z. Li, T. Chen J. Yang and W. Shang are with the Department of Computer Science and Software Engineering, Concordia University, Montreal, Quebec, Canada.\protect\\
% note need leading \protect in front of \\ to get a newline within \thanks as
% \\ is fragile and will error, could use \hfil\break instead.
E-mail: {l\_zhenha,peterc,jinqiuy,shang}@encs.concordia.ca 
}% <-this % stops an unwanted space
%\thanks{Manuscript received xxx, 2018; revised xxx, 2018.}
}

% in the abstract or keywords.
\IEEEtitleabstractindextext{%
\begin{abstract}
\input{texfiles/abstract}
\end{abstract}

% Note that keywords are not normally used for peerreview papers.
\begin{IEEEkeywords}
log, code smell, duplicate log, code clone, static analysis, empirical study.
\end{IEEEkeywords}
}

\maketitle

\IEEEdisplaynontitleabstractindextext

\IEEEpeerreviewmaketitle


% ------------Main sections------------
\IEEEraisesectionheading{\section{Introduction}\label{sec:intro}}
\input texfiles/intro
\input texfiles/prestudy
\input texfiles/pattern
\input texfiles/detection
\input texfiles/results
\input texfiles/rq4
\input texfiles/rq5
\input texfiles/threats
\input texfiles/related
\input texfiles/conclusion

% ------------reference------------
\bibliographystyle{IEEEtran}
\footnotesize
\bibliography{paper}



% ------------bio info------------
\begin{IEEEbiography}[{\includegraphics[width=1in,height=1.25in,clip,keepaspectratio]{bio/zhenhao.jpg}}]{Zhenhao Li}
Zhenhao Li is a Ph.D. student at the Department of Computer Science and Software Engineering at Concordia University, Montreal, Canada. He obtained his M.ASc degree from Concordia University and B.Eng. from Harbin Institute of Technology. His work has been published at renowned venues such as ICSE and ASE.
His research interests include software log analysis, improving logging practices, program analysis, and mining software repositories. More information at: https://ginolzh.github.io/.
\end{IEEEbiography}


\begin{IEEEbiography}[{\includegraphics[width=1in,height=1.25in,clip,keepaspectratio]{bio/peter.png}}]{Tse-Hsun (Peter) Chen}
Tse-Hsun (Peter) Chen is an Assistant Professor in the Department of Computer Science and Software Engineering at Concordia University, Montreal, Canada. He leads the Software PErformance, Analysis, and Reliability (SPEAR) Lab, which focuses on conducting research on performance engineering, program analysis, log analysis, production debugging, and mining software repositories. His work has been published in flagship conferences and journals such as ICSE, FSE, TSE, EMSE, and MSR. He serves regularly as a program committee member of international conferences in the field of software engineering, such as ASE, ICSME, SANER, and ICPC, and he is a regular reviewer for software engineering journals such as JSS, EMSE, and TSE. Dr. Chen obtained his BSc from the University of British Columbia, and MSc and PhD from Queen's University. Besides his academic career, Dr. Chen also worked as a software performance engineer at BlackBerry for over four years. Early tools developed by Dr. Chen were integrated into industrial practice for ensuring the quality of large-scale enterprise systems. More information at: https://petertsehsun.github.io/.
\end{IEEEbiography}

\begin{IEEEbiography}[{\includegraphics[width=1in,height=1.25in,clip,keepaspectratio]{bio/jinqiu.png}}]{Jinqiu Yang}
        Jinqiu Yang is an Assistant Professor in the Department of Computer Science and Software Engineering at Concordia University, Montreal, Canada. Her research interests include automated program repair, software testing, software text analytics, and mining software repositories. Her work has been published flagship conferences and journals such as ICSE, FSE, EMSE. She serves regularly as a program committee member of international conferences in Software Engineering, such as ASE, ICSE, ICSME and SANER. She is a regular reviewer for Software Engineering journals such as EMSE and JSS. Dr. Yang obtained her BEng from Nanjing University, and MSc and PhD from University of Waterloo. More information at: https://jinqiuyang.github.io/.
\end{IEEEbiography}

\begin{IEEEbiography}[{\includegraphics[width=1in,height=1.25in,clip,keepaspectratio]{bio/ian.png}}]{Weiyi Shang}
Weiyi Shang is an Assistant Professor and Concordia University Research Chair in Ultra-large-scale Systems at the Department of Computer Science and Software Engineering at Concordia University, Montreal.
He has received his Ph.D. and M.Sc. degrees from Queens University (Canada) and he obtained B.Eng.
from Harbin Institute of Technology. His research interests include big data software engineering, software
engineering for ultra-largescale systems, software log mining, empirical software engineering, and software
performance engineering. His work has been published at premier venues such as ICSE, FSE, ASE, ICSME,
MSR and WCRE, as well as in major journals such as TSE, EMSE, JSS, JSEP and SCP. His work has won
premium awards, such as SIGSOFT Distinguished paper award at ICSE 2013 and best paper award at WCRE
2011. His industrial experience includes helping improve the quality and performance of ultra-large-scale
systems in BlackBerry. Early tools and techniques developed by him are already integrated into products
used by millions of users worldwide. Contact him at shang@encs.concordia.ca; \url{https://users.encs.concordia.ca/~shang}.
\end{IEEEbiography}


\clearpage

\appendices


\section{Precision of NiCad on Detecting Duplicate Logging Statements that Reside in Cloned Code}
\label{sec:appendix2}
We rely on NiCad for automated clone detection. To examine the false positives of NiCad, we then manually verify a randomly sampled set of duplicate logging statements (281 sets in total, with 95\% confidence level and 5\% confidence interval) that are classified as clones by NiCad. For each set of the sampled duplicate logging statements, we manually go through the logging statements and their surrounding code to verify whether they are clones or not. Overall, we find that 272 out of the 281 sampled sets (96.8\%) are clones, which is similar to the performance of NiCad that is reported in prior studies. For the 9 false positives, 3 of them are duplicate logging statements located in different branches of a nested method (i.e., developers define a method within a method). In such cases, NiCad would analyze the code block twice. For example, in ElasticSearch~\footnote{\url{https://github.com/elastic/elasticsearch/blob/70b8d7bc64f165735502de9d8c5fa673fa21e02b/server/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java}}, two duplicate logging statements with the same static text message {\em ``Failed to execute NodeStatsAction for ClusterInfoUpdateJob''} are located in different branches of the same nested method {\em onFailure(Exception e)}. However, since the method {\em onFailure(Exception e)} is defined in the method {\em refresh()}, NiCad would analyze the same code block twice and detect them as clones. For the remaining 6 out of 9 false positives, we could not identify the reasons that they are classified as clones, since the code snippets look neither structurally nor semantically similar.



\end{document}
